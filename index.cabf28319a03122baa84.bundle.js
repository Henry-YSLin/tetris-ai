(self.webpackChunktetris_ai=self.webpackChunktetris_ai||[]).push([[826],{163:(t,e,n)=>{"use strict";var r=n(294),o=n(935),i=n(727),a=n(977);const u=function(t){return r.createElement("p",null,"Not found")};const c=function(){return r.createElement("div",{className:"flex flex-col justify-center items-center select-none min-h-screen bg-gradient-to-br from-gray-900  to-blue-700"},r.createElement("h1",{className:"text-6xl text-green-500 border-b-4 pb-4"},"Hello World !"),r.createElement("h2",{className:"text-2xl text-gray-300 mt-10"},"Click"," ",r.createElement(i.rU,{to:"/test",className:"text-green-400 underline"},"here")," ","to play pre-alpha Tetris",r.createElement("br",null),r.createElement(i.rU,{to:"/multi/local",className:"text-green-400 underline"},"Local Multi")))};const l=function(t){return r.createElement(c,null)};var f,s=n(210),p=n.n(s);function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}!function(t){t[t.None=0]="None",t[t.SoftDrop=1]="SoftDrop",t[t.HardDrop=2]="HardDrop",t[t.Hold=3]="Hold",t[t.ShiftLeft=4]="ShiftLeft",t[t.ShiftRight=5]="ShiftRight",t[t.RotateCW=6]="RotateCW",t[t.RotateCCW=7]="RotateCCW"}(f||(f={}));const h=f;function b(t){return t===f.RotateCCW||t===f.RotateCW}var v=function(){function t(e,n,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Tick=e,this.Input=n,this.Success=r,this.Falling=o,this.Player=i}var e,n,r;return e=t,(n=[{key:"Clone",value:function(){return new t(this.Tick,this.Input,this.Success,this.Falling,this.Player)}}])&&y(e.prototype,n),r&&y(e,r),t}();function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"Tick",value:function(t){return h.None}}])&&w(e.prototype,n),r&&w(e,r),t}();function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?T(t):e}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,E(t,e,"get"))}function j(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,E(t,e,"set"),n),n}function E(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=H(t);if(e){var o=H(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return G(this,n)}}function G(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var I,M,W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(n,t);var e=B(n);function n(){return A(this,n),e.apply(this,arguments)}return n}((I=d,M=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(i,t);var e,n,r,o=k(i);function i(){var t;m(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=o.call.apply(o,[this].concat(n)),M.set(T(t),{writable:!0,value:void 0}),j(T(t),M,[]),t}return e=i,(n=[{key:"Tick",value:function(t){var e;return"Update"in I?O(C(i.prototype),"Tick",this).call(this,t):null!==(e=_(this,M).shift())&&void 0!==e?e:h.None}},{key:"Update",value:function(t,e){var n;return e&&null!==(n=_(this,M).shift())&&void 0!==n?n:h.None}},{key:"Enqueue",value:function(t){_(this,M).push(t)}}])&&S(e.prototype,n),r&&S(e,r),i}(I))),L=20,F=.5;function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Y,z,X,V,K,U,Q,q,$,J,Z,tt,et,nt,rt,ot,it=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.X=e,this.Y=n}var e,n,r;return e=t,(n=[{key:"Add",value:function(e){return new t(this.X+e.X,this.Y+e.Y)}},{key:"Subtract",value:function(e){return new t(this.X-e.X,this.Y-e.Y)}},{key:"Clone",value:function(){return new t(this.X,this.Y)}}])&&N(e.prototype,n),r&&N(e,r),t}();function at(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.None=0]="None",t[t.I=1]="I",t[t.J=2]="J",t[t.L=3]="L",t[t.O=4]="O",t[t.S=5]="S",t[t.T=6]="T",t[t.Z=7]="Z",t[t.Garbage=8]="Garbage"}(nt||(nt={})),function(t){t[t.R0=0]="R0",t[t.R90=1]="R90",t[t.R180=2]="R180",t[t.R270=3]="R270"}(rt||(rt={})),function(t){t[t.CW=1]="CW",t[t.CCW=-1]="CCW"}(ot||(ot={}));var ut=Object.freeze([(Y={},at(Y,-1,[new it(0,0),new it(1,0),new it(1,1),new it(0,-2),new it(1,-2)]),at(Y,1,[new it(0,0),new it(-1,0),new it(-1,1),new it(0,-2),new it(-1,-2)]),Y),(z={},at(z,-1,[new it(0,0),new it(1,0),new it(1,-1),new it(0,2),new it(1,2)]),at(z,1,[new it(0,0),new it(1,0),new it(1,-1),new it(0,2),new it(1,2)]),z),(X={},at(X,-1,[new it(0,0),new it(-1,0),new it(-1,1),new it(0,-2),new it(-1,-2)]),at(X,1,[new it(0,0),new it(1,0),new it(1,1),new it(0,-2),new it(1,-2)]),X),(V={},at(V,-1,[new it(0,0),new it(-1,0),new it(-1,-1),new it(0,2),new it(-1,2)]),at(V,1,[new it(0,0),new it(-1,0),new it(-1,-1),new it(0,2),new it(-1,2)]),V)]),ct=Object.freeze([(K={},at(K,-1,[new it(0,0),new it(-1,0),new it(2,0),new it(-1,2),new it(2,-1)]),at(K,1,[new it(0,0),new it(-2,0),new it(1,0),new it(-2,-1),new it(1,2)]),K),(U={},at(U,-1,[new it(0,0),new it(2,0),new it(-1,0),new it(2,1),new it(-1,-2)]),at(U,1,[new it(0,0),new it(-1,0),new it(2,0),new it(-1,2),new it(2,-1)]),U),(Q={},at(Q,-1,[new it(0,0),new it(1,0),new it(-2,0),new it(1,-2),new it(-2,1)]),at(Q,1,[new it(0,0),new it(2,0),new it(-1,0),new it(2,1),new it(-1,-2)]),Q),(q={},at(q,-1,[new it(0,0),new it(-2,0),new it(1,0),new it(-2,-1),new it(1,2)]),at(q,1,[new it(0,0),new it(1,0),new it(-2,0),new it(1,-2),new it(-2,1)]),q)]),lt=Object.freeze([($={},at($,-1,[new it(0,0)]),at($,1,[new it(0,0)]),$),(J={},at(J,-1,[new it(0,0)]),at(J,1,[new it(0,0)]),J),(Z={},at(Z,-1,[new it(0,0)]),at(Z,1,[new it(0,0)]),Z),(tt={},at(tt,-1,[new it(0,0)]),at(tt,1,[new it(0,0)]),tt)]),ft=Object.freeze((at(et={},nt.None,{Rotations:[[]],WallKick:lt}),at(et,nt.I,{Rotations:[[new it(0,2),new it(1,2),new it(2,2),new it(3,2)],[new it(2,0),new it(2,1),new it(2,2),new it(2,3)],[new it(0,1),new it(1,1),new it(2,1),new it(3,1)],[new it(1,0),new it(1,1),new it(1,2),new it(1,3)]],WallKick:ct}),at(et,nt.J,{Rotations:[[new it(0,2),new it(0,1),new it(1,1),new it(2,1)],[new it(2,2),new it(1,2),new it(1,1),new it(1,0)],[new it(0,1),new it(1,1),new it(2,1),new it(2,0)],[new it(0,0),new it(1,0),new it(1,1),new it(1,2)]],WallKick:ut}),at(et,nt.L,{Rotations:[[new it(0,1),new it(1,1),new it(2,1),new it(2,2)],[new it(1,2),new it(1,1),new it(1,0),new it(2,0)],[new it(0,0),new it(0,1),new it(1,1),new it(2,1)],[new it(0,2),new it(1,2),new it(1,1),new it(1,0)]],WallKick:ut}),at(et,nt.O,{Rotations:[[new it(0,0),new it(0,1),new it(1,0),new it(1,1)]],WallKick:lt}),at(et,nt.S,{Rotations:[[new it(0,1),new it(1,1),new it(1,2),new it(2,2)],[new it(1,2),new it(1,1),new it(2,1),new it(2,0)],[new it(0,0),new it(1,0),new it(1,1),new it(2,1)],[new it(0,2),new it(0,1),new it(1,1),new it(1,0)]],WallKick:ut}),at(et,nt.T,{Rotations:[[new it(0,1),new it(1,1),new it(1,2),new it(2,1)],[new it(1,2),new it(1,1),new it(2,1),new it(1,0)],[new it(0,1),new it(1,0),new it(1,1),new it(2,1)],[new it(1,2),new it(0,1),new it(1,1),new it(1,0)]],WallKick:ut}),at(et,nt.Z,{Rotations:[[new it(0,2),new it(1,1),new it(1,2),new it(2,1)],[new it(2,2),new it(1,1),new it(2,1),new it(1,0)],[new it(0,1),new it(1,0),new it(1,1),new it(2,0)],[new it(1,2),new it(0,1),new it(1,1),new it(0,0)]],WallKick:ut}),at(et,nt.Garbage,{Rotations:[[new it(0,0)]],WallKick:lt}),et));const st=ft;function pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const yt=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),pt(this,"listeners",[]),pt(this,"listenersOncer",[]),pt(this,"on",(function(t){return e.listeners.push(t),{dispose:function(){return e.off(t)}}})),pt(this,"once",(function(t){e.listenersOncer.push(t)})),pt(this,"off",(function(t){var n=e.listeners.indexOf(t);n>-1&&e.listeners.splice(n,1)})),pt(this,"emit",(function(t){if(e.listeners.forEach((function(e){return e(t)})),e.listenersOncer.length>0){var n=e.listenersOncer;e.listenersOncer=[],n.forEach((function(e){return e(t)}))}})),pt(this,"pipe",(function(t){return e.on((function(e){return t.emit(e)}))}))};Array.prototype.max||Object.defineProperty(Array.prototype,"max",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var t=this.length,e=this[0];t--;)this[t]>e&&(e=this[t]);return e}}),Array.prototype.maxBy||Object.defineProperty(Array.prototype,"maxBy",{enumerable:!1,writable:!1,configurable:!1,value:function(t){for(var e=this.length,n=t(this[0]),r=this[0];e--;){var o=t(this[e]);o>n&&(n=o,r=this[e])}return r}}),Array.prototype.min||Object.defineProperty(Array.prototype,"min",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var t=this.length,e=this[0];t--;)this[t]<e&&(e=this[t]);return e}}),Array.prototype.minBy||Object.defineProperty(Array.prototype,"minBy",{enumerable:!1,writable:!1,configurable:!1,value:function(t){for(var e=this.length,n=t(this[0]),r=this[0];e--;){var o=t(this[e]);o<n&&(n=o,r=this[e])}return r}});const ht=function(t){return function(){var e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}};function bt(t){return function(t){if(Array.isArray(t))return vt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return vt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,St(t,e,"get"))}function mt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,St(t,e,"set"),n),n}function St(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ot=new WeakMap,Pt=new WeakMap,kt=new WeakMap,Rt=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(wt(this,t),Ot.set(this,{writable:!0,value:void 0}),Pt.set(this,{writable:!0,value:void 0}),kt.set(this,{writable:!0,value:void 0}),n instanceof Array)return mt(this,Pt,null),mt(this,kt,new Array(r+n.length).fill(nt.None)),(e=gt(this,kt)).splice.apply(e,[r,n.length].concat(bt(n))),void mt(this,Ot,null);mt(this,Pt,void 0===n?Math.floor(Math.random()*Math.pow(2,32)):n),mt(this,Ot,ht(gt(this,Pt))),mt(this,kt,[])}var e,n,r;return e=t,(n=[{key:"Seed",get:function(){return gt(this,Pt)}},{key:"generate",value:function(){if(null!==gt(this,Pt)&&null!==gt(this,Ot))for(var t=[nt.I,nt.J,nt.L,nt.O,nt.S,nt.T,nt.Z];t.length>0;){var e=Math.floor(gt(this,Ot).call(this)*t.length)%t.length;gt(this,kt).push(t.splice(e,1)[0])}else gt(this,kt).push(nt.None)}},{key:"Get",value:function(t){for(;gt(this,kt).length<=t;)this.generate();return gt(this,kt)[t]}},{key:"GetRange",value:function(t,e){for(;gt(this,kt).length<=t+e;)this.generate();return gt(this,kt).slice(t,t+e)}}])&&dt(e.prototype,n),r&&dt(e,r),t}();function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _t,jt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rt.R0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:NaN,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:h.None;Tt(this,t),this.Type=e,this.Rotation=n,r?this.Position=r:(this.Position=new it(4,21),this.Bottom=21,this.Left=Math.floor(5-this.Width/2)),this.LastActionTick=o,this.ActionCount=i,this.DropTick=a,this.LastAction=u}var e,n,r;return e=t,r=[{key:"Spawn",value:function(e,n){return new t(e,void 0,void 0,n,0,n)}}],(n=[{key:"Clone",value:function(){return new t(this.Type,this.Rotation,this.Position.Clone(),this.LastActionTick,this.ActionCount,this.DropTick,this.LastAction)}},{key:"InternalPoints",get:function(){return ft[this.Type].Rotations[this.Rotation]}},{key:"Points",get:function(){var t=this;return ft[this.Type].Rotations[this.Rotation].map((function(e){return e.Add(t.Position)}))}},{key:"InternalLeft",get:function(){return this.InternalPoints.map((function(t){return t.X})).min()}},{key:"InternalRight",get:function(){return this.InternalPoints.map((function(t){return t.X})).max()}},{key:"InternalTop",get:function(){return this.InternalPoints.map((function(t){return t.Y})).max()}},{key:"InternalBottom",get:function(){return this.InternalPoints.map((function(t){return t.Y})).min()}},{key:"Left",get:function(){return this.Position.X+this.InternalLeft},set:function(t){this.Position.X=t-this.InternalLeft}},{key:"Right",get:function(){return this.Position.X+this.InternalRight},set:function(t){this.Position.X=t-this.InternalRight}},{key:"Top",get:function(){return this.Position.Y+this.InternalTop},set:function(t){this.Position.Y=t-this.InternalTop}},{key:"Bottom",get:function(){return this.Position.Y+this.InternalBottom},set:function(t){this.Position.Y=t-this.InternalBottom}},{key:"Width",get:function(){return this.InternalRight-this.InternalLeft+1}},{key:"Height",get:function(){return this.InternalTop-this.InternalBottom+1}},{key:"Rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot.CW;this.Rotation+=t;var e=ft[this.Type].Rotations.length;this.Rotation>=e&&(this.Rotation=0),this.Rotation<0&&(this.Rotation=e-1)}}])&&Ct(e.prototype,n),r&&Ct(e,r),t}();function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}!function(t){t[t.LineClear=0]="LineClear",t[t.TSpin=1]="TSpin",t[t.TSpinMini=2]="TSpinMini",t[t.PerfectClear=3]="PerfectClear"}(_t||(_t={}));const xt=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.LinesCleared=e,this.Type=n,this.Combo=r,this.BackToBack=o}var e,n,r;return e=t,(n=[{key:"Clone",value:function(){return new t(this.LinesCleared,this.Type,this.Combo,this.BackToBack)}},{key:"Rating",get:function(){var t=Math.pow(1.1,this.LinesCleared.length);switch(this.Type){case _t.PerfectClear:t*=1.5;case _t.TSpin:t*=1.3;case _t.TSpinMini:t*=1.1}return this.BackToBack&&(t*=1.1),this.Combo&&(t*=Math.pow(1.05,this.Combo)),t}},{key:"Garbage",get:function(){var t=0,e=0;switch(this.BackToBack&&t++,this.Combo){case 0:case 1:break;case 2:case 3:t+=1;break;case 4:case 5:t+=2;break;case 6:case 7:t+=3;break;case 8:case 9:case 10:t+=4;break;default:t+=5}if(this.Type===_t.PerfectClear)e+=6;else if(this.Type===_t.LineClear)switch(this.LinesCleared.length){case 0:case 1:break;case 2:t++;break;case 3:t+=2;break;default:t+=4}else this.Type===_t.TSpinMini?t+=this.LinesCleared.length:this.Type===_t.TSpin&&(t+=2*this.LinesCleared.length,this.BackToBack&&3===this.LinesCleared.length&&t++);return{Targeted:t,Universal:e}}},{key:"toString",value:function(){var t="",e="";switch(this.Combo>0&&(t+="".concat(this.Combo," REN ")),this.BackToBack&&(t+="Back-to-back "),this.Type){case _t.PerfectClear:e+="Perfect Clear ";break;case _t.TSpinMini:e+="T-Spin Mini ";break;case _t.TSpin:e+="T-Spin "}if(this.Type!==_t.PerfectClear)switch(this.LinesCleared.length){case 4:e+="Tetris ";break;case 3:e+="Triple ";break;case 2:e+="Double ";break;case 1:e+="Single "}return[t.trim(),e.trim()]}}])&&Et(e.prototype,n),r&&Et(e,r),t}();function At(t){return t.Type===_t.LineClear&&t.LinesCleared.length>=4||(t.Type===_t.TSpin||t.Type===_t.TSpinMini)&&t.LinesCleared.length>0}function Dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ht(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Mt(t,e,"get"))}function It(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Mt(t,e,"set"),n),n}function Mt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Lt=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nt.None,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,s=arguments.length>9&&void 0!==arguments[9]&&arguments[9];Wt(this,t),this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(nt.None)})),o&&o.forEach((function(t,n){return t.forEach((function(t,r){return e.Grid[n][r]=t}))})),this.Falling=i?i.Clone():null,this.Hold=a,this.BlockHold=c,this.TicksElapsed=u,this.PieceQueue=n,this.PieceIndex=r,this.Combo=l,this.LastAchievement=f,this.IsDead=s},Ft=new WeakMap,Nt=new WeakMap,Yt=new WeakMap;const zt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:nt.None,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];if(Wt(this,t),Ft.set(this,{writable:!0,value:void 0}),Nt.set(this,{writable:!0,value:void 0}),Yt.set(this,{writable:!0,value:void 0}),e instanceof Lt){var f=e;this.Grid=f.Grid,this.Falling=f.Falling,this.Hold=f.Hold,this.BlockHold=f.BlockHold,this.TicksElapsed=f.TicksElapsed,It(this,Ft,new Rt(f.PieceQueue,f.PieceIndex)),this.PieceIndex=f.PieceIndex,this.Combo=f.Combo,this.LastAchievement=f.LastAchievement,this.IsDead=f.IsDead}else this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(nt.None)})),this.Falling=r,this.Hold=o,this.BlockHold=a,this.TicksElapsed=i,It(this,Ft,new Rt(e)),this.PieceIndex=n,this.Combo=u,this.LastAchievement=c,this.IsDead=l;It(this,Nt,new yt),It(this,Yt,new yt)}var e,n,r;return e=t,(n=[{key:"GetVisibleState",value:function(){var t;return new Lt(this.PieceQueue,this.PieceIndex,this.Grid,this.Falling,this.Hold,this.TicksElapsed,this.BlockHold,this.Combo,null===(t=this.LastAchievement)||void 0===t?void 0:t.Clone(),this.IsDead)}},{key:"Achievement",get:function(){return Ht(this,Nt)}},{key:"Dead",get:function(){return Ht(this,Yt)}},{key:"GridWidth",get:function(){return 10}},{key:"GridHeight",get:function(){return 40}},{key:"PlayfieldHeight",get:function(){return 20}},{key:"PieceQueue",get:function(){return Ht(this,Ft).GetRange(this.PieceIndex,6)}},{key:"Get",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t instanceof it)e=t.X,n=t.Y;else{if(void 0===r)return null;e=t,n=r}return e<0||n<0||e>=10||n>=40?null:this.Grid[n][e]}},{key:"IsPieceValid",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?!e.Points.some((function(e){var n;return(null!==(n=t.Get(e))&&void 0!==n?n:nt.I)!==nt.None})):!this.Falling||!this.Falling.Points.some((function(e){var n;return(null!==(n=t.Get(e))&&void 0!==n?n:nt.I)!==nt.None}))}},{key:"DequeuePiece",value:function(){return null===this.Falling&&(this.Falling=jt.Spawn(Ht(this,Ft).Get(this.PieceIndex++),this.TicksElapsed),this.BlockHold=!1,!!this.IsPieceValid()||(this.IsDead=!0,Ht(this,Yt).emit(),!1))}},{key:"HoldPiece",value:function(){if(null===this.Falling)return!1;if(this.BlockHold)return!1;var t=this.Hold;return this.Hold=this.Falling.Type,t===nt.None&&(t=Ht(this,Ft).Get(this.PieceIndex++)),this.Falling=jt.Spawn(t,this.TicksElapsed),this.BlockHold=!0,this.Falling.LastAction=h.Hold,!0}},{key:"ClearLines",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=[],o=null;if((null==n?void 0:n.Type)===nt.T&&b(n.LastAction)){var i=[[0,0],[2,0],[0,2],[2,2]].reduce((function(t,r){var o=Dt(r,2),i=o[0],a=o[1];return e.Get(n.Position.X+i,n.Position.Y+a)!==nt.None?t+1:t}),0);if(i>=3){var a=[[1,0],[0,1],[1,2],[2,1]].some((function(t){var r=Dt(t,2),o=r[0],i=r[1];return!n.InternalPoints.find((function(t){return t.X===o&&t.Y===i}))&&e.Get(n.Position.X+o,n.Position.Y+i)!==nt.None}));o=a?_t.TSpinMini:_t.TSpin}}for(var u=this.GridHeight-1;u>=0;u--)this.Grid[u].some((function(t){return t===nt.None}))||(this.Grid.splice(u,1),this.Grid.push(new Array(this.GridWidth).fill(nt.None)),r.push(u));if(0===r.length){if(this.Combo=0,null===o)return}else r.length>1&&o===_t.TSpinMini&&(o=_t.TSpin);var c=new xt(r,null!==(t=o)&&void 0!==t?t:_t.LineClear,this.Combo,!!this.LastAchievement&&At(this.LastAchievement));r.length>0&&this.Combo++,this.Grid.some((function(t){return t.some((function(t){return t!==nt.None}))}))||(c.Type=_t.PerfectClear),c.BackToBack=At(c)&&c.BackToBack;var l=c.Clone();Ht(this,Nt).emit(c),this.LastAchievement=l}},{key:"LockPiece",value:function(){var t=this;if(null===this.Falling)return!1;for(;!this.IsPieceValid();)this.Falling.Position.Y++;return this.Falling.Points.forEach((function(e){var n,r;return t.Grid[e.Y][e.X]=null!==(n=null===(r=t.Falling)||void 0===r?void 0:r.Type)&&void 0!==n?n:nt.None})),this.ClearLines(this.Falling),this.Falling.Points.map((function(t){return t.Y})).min()>=this.PlayfieldHeight&&(this.IsDead=!0,Ht(this,Yt).emit()),this.Falling=null,!0}},{key:"RotatePiece",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot.CW;if(null===this.Falling)return!1;var n=ft[this.Falling.Type].WallKick[this.Falling.Rotation][e].find((function(n){var r,o=null===(r=t.Falling)||void 0===r?void 0:r.Clone();return!!o&&(o.Rotate(e),o.Position=o.Position.Add(n),t.IsPieceValid(o))}));return!!n&&(this.Falling.Rotate(e),this.Falling.Position=this.Falling.Position.Add(n),this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=e===ot.CW?h.RotateCW:h.RotateCCW,!0)}},{key:"ShiftPiece",value:function(t){if(null===this.Falling)return!1;var e=this.Falling.Clone();return e.Position.X+=t,!!this.IsPieceValid(e)&&(this.Falling=e,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=t>0?h.ShiftRight:h.ShiftLeft,!0)}},{key:"CanPieceDrop",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)t=e.Clone();else{if(!this.Falling)return!1;t=this.Falling.Clone()}return t.Position.Y--,this.IsPieceValid(t)}},{key:"SoftDropPiece",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null!==this.Falling&&!!this.CanPieceDrop()&&(this.Falling.Position.Y--,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount=0,t?this.Falling.DropTick=this.TicksElapsed:this.Falling.LastAction=h.SoftDrop,!0)}},{key:"HardDropPiece",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)t=e;else{if(!this.Falling)return!1;t=this.Falling}for(var n=t.Position.Y;this.IsPieceValid(t);)t.Position.Y--;return t.Position.Y++,n!==t.Position.Y&&(t.LastAction=h.HardDrop),t!==this.Falling||this.LockPiece()}},{key:"Tick",value:function(){this.IsDead||(null===this.Falling?this.DequeuePiece():(this.TicksElapsed-this.Falling.DropTick>=15&&this.SoftDropPiece(!0),this.TicksElapsed-this.Falling.LastActionTick>=60&&!this.CanPieceDrop()&&this.LockPiece()),this.TicksElapsed++)}}])&&Gt(e.prototype,n),r&&Gt(e,r),t}();function Xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ut(t,e,"get"))}function Kt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ut(t,e,"set"),n),n}function Ut(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Qt=new WeakMap,qt=new WeakMap,$t=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Qt.set(this,{writable:!0,value:void 0}),qt.set(this,{writable:!0,value:void 0}),Kt(this,qt,void 0===e?Math.floor(Math.random()*Math.pow(2,32)):e),Kt(this,Qt,ht(Vt(this,qt)))}var e,n,r;return e=t,(n=[{key:"Seed",get:function(){return Vt(this,qt)}},{key:"Get",value:function(t){return Math.floor(Vt(this,Qt).call(this)*t)}}])&&Xt(e.prototype,n),r&&Xt(e,r),t}();function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,e,n){return(Zt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ce(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function te(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ne(t,e,"get"))}function ee(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ne(t,e,"set"),n),n}function ne(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function re(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oe(t,e)}function oe(t,e){return(oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ce(t);if(e){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ae(this,n)}}function ae(t,e){return!e||"object"!==Jt(e)&&"function"!=typeof e?ue(t):e}function ue(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ce(t){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function se(t,e,n){return e&&fe(t.prototype,e),n&&fe(t,n),t}var pe=function(){function t(e,n){le(this,t),this.Lines=e,this.TickEnqueued=n}return se(t,[{key:"Clone",value:function(){return new t(this.Lines,this.TickEnqueued)}}]),t}(),ye=function(t){re(n,t);var e=ie(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nt.None,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,p=arguments.length>9&&void 0!==arguments[9]&&arguments[9],y=arguments.length>10&&void 0!==arguments[10]?arguments[10]:[];return le(this,n),(t=e.call(this,r,o,i,a,u,c,l,f,s,p)).GarbageMeter=y.map((function(t){return t.Clone()})),t}return n}(Lt),he=new WeakMap;const be=function(t){re(n,t);var e=ie(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:nt.None,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,s=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],y=arguments.length>10&&void 0!==arguments[10]?arguments[10]:void 0;if(le(this,n),t=e.call(this,r,o,null!=i?i:void 0,a,u,c,l,f,s),he.set(ue(t),{writable:!0,value:void 0}),r instanceof ye){var h=r;t.GarbageMeter=h.GarbageMeter,ee(ue(t),he,null)}else t.GarbageMeter=p,ee(ue(t),he,new $t(y));return t}return se(n,[{key:"GetVisibleState",value:function(){var t;return new ye(this.PieceQueue,this.PieceIndex,this.Grid,this.Falling,this.Hold,this.TicksElapsed,this.BlockHold,this.Combo,null===(t=this.LastAchievement)||void 0===t?void 0:t.Clone(),this.IsDead,this.GarbageMeter)}},{key:"SpawnGarbageLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(te(this,he)){var e=new Array(this.GridWidth).fill(nt.Garbage);e[te(this,he).Get(this.GridWidth)]=nt.None;for(var n=0;n<t;n++)this.Grid.unshift(e.slice()),this.Grid.pop();if(this.Falling)for(;!this.IsPieceValid();)this.Falling.Position.Y++}}},{key:"CancelGarbage",value:function(t){for(;t>0||this.GarbageMeter.length>0;){var e=this.GarbageMeter.minBy((function(t){return t.TickEnqueued}));e.Lines>=t?(e.Lines-=t,t=0):(t-=e.Lines,this.GarbageMeter.splice(this.GarbageMeter.indexOf(e),1))}return t}},{key:"Tick",value:function(){var t=this;this.IsDead||(this.GarbageMeter.forEach((function(e){e.Lines<=0||t.TicksElapsed-e.TickEnqueued>=240&&t.SpawnGarbageLines(e.Lines)})),this.GarbageMeter=this.GarbageMeter.filter((function(e){return t.TicksElapsed-e.TickEnqueued<240&&e.Lines>0})),Zt(ce(n.prototype),"Tick",this).call(this))}}]),n}(zt);var ve=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function we(t){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t,e){return(de=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ge(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Se(t);if(e){var o=Se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return me(this,n)}}function me(t,e){return!e||"object"!==we(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Se(t){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&de(t,e)}(n,t);var e=ge(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this)).Participants=[],t}return n}(ve);function Pe(t){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Re(t,e){return(Re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Te(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=je(t);if(e){var o=je(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ce(this,n)}}function Ce(t,e){return!e||"object"!==Pe(e)&&"function"!=typeof e?_e(t):e}function _e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function je(t){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ee(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ae(t,e,"get"))}function xe(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ae(t,e,"set"),n),n}function Ae(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var De=new WeakMap,Be=new WeakMap,Ge=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Re(t,e)}(i,t);var e,n,r,o=Te(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this),De.set(_e(e),{writable:!0,value:void 0}),Be.set(_e(e),{writable:!0,value:void 0}),xe(_e(e),De,null),e.Participants=t.map((function(t){return{Player:t.player,State:t.seed instanceof be?t.seed:new be(t.seed)}})),e.Participants.map((function(t){return t.State})).forEach((function(t){return t.Achievement.on((function(n){var r=n.Garbage,o=e.Participants.map((function(t){return t.State})).filter((function(e){return e!==t}));o.forEach((function(t){return t.GarbageMeter.push(new pe(r.Universal,t.TicksElapsed))}));var i=o[Math.floor(Math.random()*o.length)];i.GarbageMeter.push(new pe(r.Targeted,i.TicksElapsed))}))})),xe(_e(e),Be,new yt),e}return e=i,(n=[{key:"Input",get:function(){return Ee(this,Be)}},{key:"ClockRunning",get:function(){return null!==Ee(this,De)}},{key:"StartClock",value:function(){xe(this,De,window.setInterval(this.Tick.bind(this),1e3/60))}},{key:"StopClock",value:function(){null!==Ee(this,De)&&window.clearInterval(Ee(this,De))}},{key:"Tick",value:function(){var t=this;this.Participants.forEach((function(e){if(!e.State.IsDead&&(e.State.Tick(),e.Player instanceof W)){var n=e.Player.Tick(e.State.GetVisibleState()),r=e.State.Falling,o=!1;switch(n){case h.None:break;case h.HardDrop:o=e.State.HardDropPiece();break;case h.Hold:o=e.State.HoldPiece();break;case h.RotateCW:o=e.State.RotatePiece(ot.CW);break;case h.RotateCCW:o=e.State.RotatePiece(ot.CCW);break;case h.ShiftLeft:o=e.State.ShiftPiece(-1);break;case h.ShiftRight:o=e.State.ShiftPiece(1);break;case h.SoftDrop:o=e.State.SoftDropPiece(!1)}n!==h.None&&Ee(t,Be).emit(new v(e.State.TicksElapsed,n,o,r,e.Player))}}))}}])&&ke(e.prototype,n),r&&ke(e,r),i}(Oe);function He(t){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function We(t,e){return(We=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Le(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ye(t);if(e){var o=Ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fe(this,n)}}function Fe(t,e){return!e||"object"!==He(e)&&"function"!=typeof e?Ne(t):e}function Ne(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ye(t){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ze(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Xe(t,e,"set"),n),n}function Xe(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Ve(t){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$e(t);if(e){var o=$e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(t,e){return!e||"object"!==Ve(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $e(t){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function en(t,e){return(en=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=on(t);if(e){var o=on(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rn(this,n)}}function rn(t,e){return!e||"object"!==Je(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function on(t){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var an=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&en(t,e)}(i,t);var e,n,r,o=nn(i);function i(){return Ze(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"Update",value:function(t,e){return h.None}}])&&tn(e.prototype,n),r&&tn(e,r),i}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}(n,t);var e=Qe(n);function n(){return Ke(this,n),e.apply(this,arguments)}return n}(function(t){var e;return e=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&We(t,e)}(a,t);var n,r,o,i=Le(a);function a(){var t;Ie(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=i.call.apply(i,[this].concat(r)),e.set(Ne(t),{writable:!0,value:void 0}),ze(Ne(t),e,0),t}return n=a,(r=[{key:"Tick",value:function(t){var n,r=t.TicksElapsed-function(t,e){return e.get?e.get.call(t):e.value}(n=this,Xe(n,e,"get"))>=20,o=this.Update(t,r);return r?(o!==h.None&&ze(this,e,t.TicksElapsed),o):h.None}},{key:"Update",value:function(t,e){return h.None}}])&&Me(n.prototype,r),o&&Me(n,o),a}(t)}(d)));function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fn(t,e){return(fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yn(t);if(e){var o=yn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pn(this,n)}}function pn(t,e){return!e||"object"!==un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yn(t){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hn(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fn(t,e)}(i,t);var e,n,r,o=sn(i);function i(){var t;cn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).State=null,t}return e=i,(n=[{key:"ConfigureGameState",value:function(t){this.State=t}}])&&ln(e.prototype,n),r&&ln(e,r),i}(t)}function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dn(t,e){return(dn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sn(t);if(e){var o=Sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mn(this,n)}}function mn(t,e){return!e||"object"!==bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function On(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dn(t,e)}(i,t);var e,n,r,o=gn(i);function i(){var t;vn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).Player=null,t}return e=i,(n=[{key:"ConfigurePlayer",value:function(t){this.Player=t}}])&&wn(e.prototype,n),r&&wn(e,r),i}(t)}function Pn(t){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tn(t,e){return(Tn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=jn(t);if(e){var o=jn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _n(this,n)}}function _n(t,e){return!e||"object"!==Pn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jn(t){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function En(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tn(t,e)}(i,t);var e,n,r,o=Cn(i);function i(){var t;kn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).Game=null,t}return e=i,(n=[{key:"ConfigureGame",value:function(t){this.Game=t}}])&&Rn(e.prototype,n),r&&Rn(e,r),i}(t)}function xn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function An(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Dn,Bn,Gn,Hn=function(){function t(e,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.Linear;xn(this,t),this.From=e,this.To=n,this.Duration=r,this.Data=o,this.Elapsed=i,this.EasingFunction=a}var e,n,r;return e=t,r=[{key:"Linear",value:function(t){return t}},{key:"EaseOutQuint",value:function(t){return 1-Math.pow(1-t,5)}},{key:"EaseInOutSine",value:function(t){return-(Math.cos(Math.PI*t)-1)/2}},{key:"RevertingFunction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.EaseInOutSine,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;return function(t){return t<=n?e(t/n):t>=1-n?e((1-t)/n):1}}}],(n=[{key:"CurrentValue",get:function(){return this.From+(this.To-this.From)*this.EasingFunction(this.Elapsed/this.Duration)}},{key:"Finished",get:function(){return this.Elapsed>=this.Duration}},{key:"Tick",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.Elapsed+=t}}])&&An(e.prototype,n),r&&An(e,r),t}();function In(t){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(t,e,n){return(Ln="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Fn(t,e){return(Fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zn(t);if(e){var o=zn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yn(this,n)}}function Yn(t,e){return!e||"object"!==In(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zn(t){return(zn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xn(t){return"ConfigurePlayfieldAnimatable"in t}function Vn(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fn(t,e)}(i,t);var e,n,r,o=Nn(i);function i(){var t;Mn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).HardDropAnimations=[],t.LineClearAnimations=[],t}return e=i,(n=[{key:"ConfigurePlayfieldAnimatable",value:function(){var t=this;null!==this.State?null!==this.Game?null!==this.Player?(this.Game.Input.on((function(e){e.Player===t.Player&&e.Input===h.HardDrop&&e.Success&&e.Falling&&t.HardDropAnimations.push(new Hn(1,0,20,{left:e.Falling.Left,right:e.Falling.Right,end:e.Falling.Top,type:e.Falling.Type},0,Hn.EaseOutQuint))})),this.State.Achievement.on((function(e){var n=0;e.LinesCleared.forEach((function(e){t.LineClearAnimations.filter((function(t){return t.Data.Y>e})).forEach((function(t){return t.Data.Y--})),t.LineClearAnimations.push(new Hn(1,0,20+n,{Y:e,OrigY:e},0,Hn.EaseOutQuint)),n+=4}))}))):console.error("ConfigurePlayfieldAnimatable called before this.Player is assigned. Beware of the call order of Configure_ functions."):console.error("ConfigurePlayfieldAnimatable called before this.Game is assigned. Beware of the call order of Configure_ functions."):console.error("ConfigurePlayfieldAnimatable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Draw",value:function(t){Ln(zn(i.prototype),"p5Draw",this).call(this,t),this.HardDropAnimations.forEach((function(t){return t.Tick()})),this.HardDropAnimations=this.HardDropAnimations.filter((function(t){return!t.Finished})),this.LineClearAnimations.forEach((function(t){return t.Tick()})),this.LineClearAnimations=this.LineClearAnimations.filter((function(t){return!t.Finished}))}}])&&Wn(e.prototype,n),r&&Wn(e,r),i}(t)}function Kn(t,e){return t.setAlpha(e),t}function Un(t,e){switch(e){case nt.None:return t.color(50);case nt.I:return t.color(77,208,225);case nt.J:return t.color(33,150,243);case nt.L:return t.color(255,152,0);case nt.O:return t.color(253,216,53);case nt.S:return t.color(76,175,80);case nt.T:return t.color(224,64,251);case nt.Z:return t.color(229,115,115);case nt.Garbage:return t.color(150)}}function Qn(t,e,n,r,o,i){t.fill(Kn(Un(t,null!=e?e:nt.None),i)),r.forEach((function(e){t.rect(n.X+e.X*o,n.Y+e.Y*o,o,o)}))}function qn(t,e,n,r,o,i){t.push(),t.scale(1,-1),t.text(e,n,-r,o,void 0===i?i:-i),t.pop()}function $n(t){return void 0!==Object.keys(Bn).find((function(e){return e===t}))}function Jn(t){return void 0!==Object.keys(Gn).find((function(e){return e===t}))}function Zn(t){if(t instanceof v)switch(t.Input){case h.None:return null;case h.HardDrop:return Dn.Lock;case h.RotateCCW:case h.RotateCW:return t.Success?Dn.RotateSuccess:Dn.RotateFail;case h.ShiftLeft:case h.ShiftRight:return t.Success?Dn.ShiftSuccess:Dn.ShiftFail;case h.SoftDrop:return Dn.SoftDrop;case h.Hold:return t.Success?Dn.Hold:null}if(t instanceof xt){var e=[];if(t.Combo>0){var n="Combo".concat(Math.min(20,t.Combo));$n(n)&&e.push(Bn[n])}if(t.Type===_t.PerfectClear)return e.push(Bn.PerfectClear),e;var r="";return t.BackToBack&&(r+="B2b"),t.Type===_t.TSpinMini?r+="TSpinMini":(t.Type===_t.TSpin&&(r+="TSpin"),1===t.LinesCleared.length?r+="Single":2===t.LinesCleared.length?r+="Double":3===t.LinesCleared.length?r+="Triple":4===t.LinesCleared.length&&(r+="Tetris")),($n(r)||r.startsWith("B2b")&&$n(r=r.substr(3)))&&e.push(Bn[r]),e}return null}function tr(t){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function er(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rr(t,e,n){return(rr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function or(t,e){return(or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ir(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=cr(t);if(e){var o=cr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ar(this,n)}}function ar(t,e){return!e||"object"!==tr(e)&&"function"!=typeof e?ur(t):e}function ur(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cr(t){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,sr(t,e,"get"))}function fr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,sr(t,e,"set"),n),n}function sr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function pr(t){var e,n,r;return e=new WeakMap,n=new WeakMap,r=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&or(t,e)}(c,t);var o,i,a,u=ir(c);function c(){var t;er(this,c);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=u.call.apply(u,[this].concat(i)),e.set(ur(t),{writable:!0,value:void 0}),n.set(ur(t),{writable:!0,value:void 0}),r.set(ur(t),{writable:!0,value:void 0}),fr(ur(t),e,new it(0,0)),fr(ur(t),n,new it(1,1)),fr(ur(t),r,null),t}return o=c,(i=[{key:"ConfigurePlayfieldDrawable",value:function(t,r){fr(this,e,t),fr(this,n,r)}},{key:"p5Setup",value:function(t,e){rr(cr(c.prototype),"p5Setup",this).call(this,t,e),this.State&&fr(this,r,t.createGraphics(this.State.GridWidth*this.BlockSize,(this.State.PlayfieldHeight+.1)*this.BlockSize))}},{key:"p5Draw",value:function(t){var o=this;if(rr(cr(c.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,lr(this,n).X,lr(this,n).Y,lr(this,e).X,lr(this,e).Y);var i=this.State,a=this.BlockSize;if(lr(this,r)){var u=lr(this,r);if(i){u.background(50),u.stroke(0,0,0,100);for(var l=0;l<=i.GridHeight;l++)u.line(0,l*a,i.GridWidth*a,l*a);for(var f=0;f<=i.GridWidth;f++)u.line(f*a,0,f*a,i.GridHeight*a);Xn(this)&&(u.noStroke(),this.HardDropAnimations.forEach((function(t){u.fill(Kn(Un(u,t.Data.type),20)),u.rect(t.Data.left*a,t.Data.end*a,(t.Data.right-t.Data.left+1)*a,(i.PlayfieldHeight-t.Data.end)*t.CurrentValue*a)}))),u.stroke(0,0,0,150);var s=null;if(Xn(this)){s=[];for(var p=function(t){s.push(t+o.LineClearAnimations.filter((function(e){return e.Data.Y<=t})).reduce((function(t,e){return t+e.CurrentValue}),0))},y=0;y<i.GridHeight;y++)p(y)}for(var h=0;h<i.GridHeight;h++)for(var b=0;b<i.GridWidth;b++){var v,w=null!==(v=i.Get(b,h))&&void 0!==v?v:nt.None;w!==nt.None&&(u.fill(Un(u,w)),u.rect(b*a,P(h)*a,a,a))}if(i.Falling){var d,g,m=i.Falling.Points.map((function(t){return new it(t.X,P(t.Y))}));Qn(u,null===(d=i.Falling)||void 0===d?void 0:d.Type,new it(0,0),m,a,255);var S=i.Falling.Clone();i.HardDropPiece(S);var O=S.Points.map((function(t){return new it(t.X,P(t.Y))}));Qn(u,null===(g=i.Falling)||void 0===g?void 0:g.Type,new it(0,0),O,a,50)}Xn(this)&&(u.noStroke(),u.fill(255,255,255,100),this.LineClearAnimations.forEach((function(t){u.rect(0,t.Data.OrigY*a,i.GridWidth*a/2*t.CurrentValue,a),u.rect(i.GridWidth*a,t.Data.OrigY*a,-i.GridWidth*a/2*t.CurrentValue,a)}))),i.IsDead&&u.filter(u.GRAY),t.image(u,0,0)}}}function P(t){return null===s?t:s[t]}}}])&&nr(o.prototype,i),a&&nr(o,a),c}(t)}function yr(t){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vr(t,e,n){return(vr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function wr(t,e){return(wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sr(t);if(e){var o=Sr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gr(this,n)}}function gr(t,e){return!e||"object"!==yr(e)&&"function"!=typeof e?mr(t):e}function mr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sr(t){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Or(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,kr(t,e,"get"))}function Pr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,kr(t,e,"set"),n),n}function kr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Rr(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wr(t,e)}(u,t);var r,o,i,a=dr(u);function u(){var t;hr(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(mr(t),{writable:!0,value:void 0}),n.set(mr(t),{writable:!0,value:void 0}),Pr(mr(t),e,new it(0,0)),Pr(mr(t),n,new it(1,1)),t}return r=u,(o=[{key:"ConfigureHoldPieceDrawable",value:function(t,r){Pr(this,e,t),Pr(this,n,r)}},{key:"p5Draw",value:function(t){if(vr(Sr(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,Or(this,n).X,Or(this,n).Y,Or(this,e).X,Or(this,e).Y);var r=this.State,o=this.BlockSize;if(t.fill(50),t.rect(0,0,5*o,6*o),t.noStroke(),t.fill(255),t.textAlign(t.CENTER),t.textSize(15),qn(t,"HOLD",2.5*o,5*o),t.textAlign(t.LEFT),t.stroke(0),r.Hold){var i=st[r.Hold].Rotations[0].slice(),a=i.map((function(t){return t.X})),c=i.map((function(t){return t.Y})),l=a.max()-a.min()+1,f=c.max()-c.min()+1;Qn(t,r.Hold,new it((2.5-l/2)*o,(2.5-f/2-c.min())*o),i,o,255)}}}}])&&br(r.prototype,o),i&&br(r,i),u}(t)}function Tr(t){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jr(t,e,n){return(jr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Br(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Er(t,e){return(Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Br(t);if(e){var o=Br(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ar(this,n)}}function Ar(t,e){return!e||"object"!==Tr(e)&&"function"!=typeof e?Dr(t):e}function Dr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Br(t){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ir(t,e,"get"))}function Hr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ir(t,e,"set"),n),n}function Ir(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Mr(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Er(t,e)}(u,t);var r,o,i,a=xr(u);function u(){var t;Cr(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Dr(t),{writable:!0,value:void 0}),n.set(Dr(t),{writable:!0,value:void 0}),Hr(Dr(t),e,new it(0,0)),Hr(Dr(t),n,new it(1,1)),t}return r=u,(o=[{key:"ConfigurePieceQueueDrawable",value:function(t,r){Hr(this,e,t),Hr(this,n,r)}},{key:"p5Draw",value:function(t){if(jr(Br(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,Gr(this,n).X,Gr(this,n).Y,Gr(this,e).X,Gr(this,e).Y);for(var r=this.State,o=this.BlockSize,i=0,a=r.PieceQueue.length-1;a>=0;a--){var c=st[r.PieceQueue[a]].Rotations[0].slice(),l=c.map((function(t){return t.X})),f=c.map((function(t){return t.Y})),s=f.max()-f.min()+1,p=l.max()-l.min()+1;Qn(t,r.PieceQueue[a],new it((2-p/2)*o,i-f.min()*o),c,o,255),i+=(s+1)*o}}}}])&&_r(r.prototype,o),i&&_r(r,i),u}(t)}function Wr(t){return(Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nr(t,e,n){return(Nr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Yr(t,e){return(Yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kr(t);if(e){var o=Kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xr(this,n)}}function Xr(t,e){return!e||"object"!==Wr(e)&&"function"!=typeof e?Vr(t):e}function Vr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kr(t){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ur(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,qr(t,e,"get"))}function Qr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,qr(t,e,"set"),n),n}function qr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function $r(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yr(t,e)}(u,t);var r,o,i,a=zr(u);function u(){var t;Lr(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Vr(t),{writable:!0,value:void 0}),n.set(Vr(t),{writable:!0,value:void 0}),Qr(Vr(t),e,new it(0,0)),Qr(Vr(t),n,new it(1,1)),t}return r=u,(o=[{key:"ConfigureFramerateDrawable",value:function(t,r){Qr(this,e,t),Qr(this,n,r)}},{key:"p5Draw",value:function(t){Nr(Kr(u.prototype),"p5Draw",this).call(this,t),this.SetTransform(t,Ur(this,n).X,Ur(this,n).Y,Ur(this,e).X,Ur(this,e).Y),t.noStroke(),t.fill(0),qn(t,"FPS: ".concat(t.frameRate().toFixed(2)),0,0)}}])&&Fr(r.prototype,o),i&&Fr(r,i),u}(t)}function Jr(t){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function to(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eo(t,e,n){return(eo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=io(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function no(t,e){return(no=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ro(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=io(t);if(e){var o=io(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oo(this,n)}}function oo(t,e){return!e||"object"!==Jr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function io(t){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ao(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&no(t,e)}(i,t);var e,n,r,o=ro(i);function i(){var t;Zr(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).keyHold=h.None,t.keyDelay=0,t}return e=i,(n=[{key:"p5Draw",value:function(t){eo(io(i.prototype),"p5Draw",this).call(this,t),this.keyHold!==h.None&&this.Player instanceof W&&(this.keyDelay<=0&&(this.Player.Enqueue(this.keyHold),this.keyDelay=3),this.keyDelay--)}},{key:"p5KeyPressed",value:function(t){this.Player instanceof W&&(t.keyCode===t.LEFT_ARROW&&(this.keyHold=h.ShiftLeft),t.keyCode===t.RIGHT_ARROW&&(this.keyHold=h.ShiftRight),t.keyCode===t.UP_ARROW&&(this.keyHold=h.RotateCW),t.keyCode===t.CONTROL&&(this.keyHold=h.RotateCCW),t.keyCode===t.DOWN_ARROW&&(this.keyHold=h.SoftDrop),t.keyCode===t.SHIFT&&(this.keyHold=h.Hold)," "===t.key&&(this.keyHold=h.HardDrop),this.Player.Enqueue(this.keyHold),this.keyDelay=10)}},{key:"p5KeyReleased",value:function(t){if(this.Player instanceof W){var e=h.None;t.keyCode===t.LEFT_ARROW&&(e=h.ShiftLeft),t.keyCode===t.RIGHT_ARROW&&(e=h.ShiftRight),t.keyCode===t.UP_ARROW&&(e=h.RotateCW),t.keyCode===t.CONTROL&&(e=h.RotateCCW),t.keyCode===t.DOWN_ARROW&&(e=h.SoftDrop),t.keyCode===t.SHIFT&&(e=h.Hold)," "===t.key&&(e=h.HardDrop),this.keyHold===e&&(this.keyHold=h.None)}}},{key:"KeyPressedHandler",get:function(){return this.p5KeyPressed.bind(this)}},{key:"KeyReleasedHandler",get:function(){return this.p5KeyReleased.bind(this)}}])&&to(e.prototype,n),r&&to(e,r),i}(t)}function uo(t){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fo(t,e){return(fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function so(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yo(t);if(e){var o=yo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return po(this,n)}}function po(t,e){return!e||"object"!==uo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yo(t){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ho(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fo(t,e)}(i,t);var e,n,r,o=so(i);function i(){var t;co(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).blockSize=L,t}return e=i,(n=[{key:"BlockSize",get:function(){return this.blockSize}},{key:"ConfigureBlockSize",value:function(t){this.blockSize=t}}])&&lo(e.prototype,n),r&&lo(e,r),i}(t)}!function(t){t.Lock="assets/sfx/sfx_lockdown.wav",t.RotateSuccess="assets/sfx/sfx_rotate.wav",t.RotateFail="assets/sfx/sfx_rotatefail.wav",t.ShiftSuccess="assets/sfx/sfx_move.wav",t.ShiftFail="assets/sfx/sfx_movefail.wav",t.SoftDrop="assets/sfx/sfx_softdrop.wav",t.Hold="assets/sfx/sfx_hold.wav"}(Dn||(Dn={})),function(t){t.Single="assets/sfx/sfx_single.wav",t.Double="assets/sfx/sfx_double.wav",t.Triple="assets/sfx/sfx_triple.wav",t.Tetris="assets/sfx/sfx_tetris.wav",t.TSpin="assets/sfx/sfx_tspin_zero.wav",t.TSpinMini="assets/sfx/sfx_tspin_mini.wav",t.TSpinSingle="assets/sfx/sfx_tspin_single.wav",t.TSpinDouble="assets/sfx/sfx_tspin_double.wav",t.TSpinTriple="assets/sfx/sfx_tspin_triple.wav",t.B2bTSpinMini="assets/sfx/sfx_b2b_tspin_mini.wav",t.B2bTSpinSingle="assets/sfx/sfx_b2b_tspin_single.wav",t.B2bTSpinDouble="assets/sfx/sfx_b2b_tspin_double.wav",t.B2bTSpinTriple="assets/sfx/sfx_b2b_tspin_triple.wav",t.B2bTetris="assets/sfx/sfx_b2b_tetris.wav",t.PerfectClear="assets/sfx/sfx_perfectclear.wav",t.Combo1="assets/sfx/sfx_combo1.wav",t.Combo2="assets/sfx/sfx_combo2.wav",t.Combo3="assets/sfx/sfx_combo3.wav",t.Combo4="assets/sfx/sfx_combo4.wav",t.Combo5="assets/sfx/sfx_combo5.wav",t.Combo6="assets/sfx/sfx_combo6.wav",t.Combo7="assets/sfx/sfx_combo7.wav",t.Combo8="assets/sfx/sfx_combo8.wav",t.Combo9="assets/sfx/sfx_combo9.wav",t.Combo10="assets/sfx/sfx_combo10.wav",t.Combo11="assets/sfx/sfx_combo11.wav",t.Combo12="assets/sfx/sfx_combo12.wav",t.Combo13="assets/sfx/sfx_combo13.wav",t.Combo14="assets/sfx/sfx_combo14.wav",t.Combo15="assets/sfx/sfx_combo15.wav",t.Combo16="assets/sfx/sfx_combo16.wav",t.Combo17="assets/sfx/sfx_combo17.wav",t.Combo18="assets/sfx/sfx_combo18.wav",t.Combo19="assets/sfx/sfx_combo19.wav",t.Combo20="assets/sfx/sfx_combo20.wav",t.GameOver="assets/sfx/sfx_gameover.wav"}(Bn||(Bn={})),function(t){t.Single="assets/voice/voice_single.wav",t.Double="assets/voice/voice_double.wav",t.Triple="assets/voice/voice_triple.wav",t.Tetris="assets/voice/voice_tetris.wav",t.TSpin="assets/voice/voice_tspin.wav",t.TSpinMini="assets/voice/voice_tspinmini.wav",t.TSpinSingle="assets/voice/voice_tspinsingle.wav",t.TSpinDouble="assets/voice/voice_tspindouble.wav",t.TSpinTriple="assets/voice/voice_tspintriple.wav",t.B2bTSpinMini="assets/voice/voice_b2btspinmini.wav",t.B2bTSpinSingle="assets/voice/voice_b2btspinsingle.wav",t.B2bTSpinDouble="assets/voice/voice_b2btspindouble.wav",t.B2bTSpinTriple="assets/voice/voice_b2btspintriple.wav",t.B2bTetris="assets/voice/voice_b2btetris.wav",t.PerfectClear="assets/voice/voice_perfectclear.wav",t.Combo1="assets/voice/voice_combo01.wav",t.Combo2="assets/voice/voice_combo02.wav",t.Combo3="assets/voice/voice_combo03.wav",t.Combo4="assets/voice/voice_combo04.wav",t.Combo5="assets/voice/voice_combo05.wav"}(Gn||(Gn={}));var bo=n(766);function vo(t){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return go(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return go(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function go(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function So(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oo(t,e,n){return(Oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Co(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Po(t,e){return(Po=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ko(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Co(t);if(e){var o=Co(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ro(this,n)}}function Ro(t,e){return!e||"object"!==vo(e)&&"function"!=typeof e?To(t):e}function To(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Co(t){return(Co=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _o(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Eo(t,e,"get"))}function jo(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Eo(t,e,"set"),n),n}function Eo(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function xo(t){var e,n,r;return e=new WeakMap,n=new WeakMap,r=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Po(t,e)}(c,t);var o,i,a,u=ko(c);function c(){var t;mo(this,c);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=u.call.apply(u,[this].concat(i)),e.set(To(t),{writable:!0,value:void 0}),n.set(To(t),{writable:!0,value:void 0}),r.set(To(t),{writable:!0,value:void 0}),jo(To(t),n,new Map),jo(To(t),e,null),jo(To(t),r,.5),t}return o=c,(i=[{key:"ConfigurePlayerSfxPlayable",value:function(t){var o=this;jo(this,r,t),null!==this.Game?null!==this.Player?this.Game.Input.on((function(t){var r;if(t.Player===o.Player){var i=_o(o,e);if(jo(o,e,null!=t?t:null),!(i&&t.Tick-i.Tick<=4&&t.Success===i.Success&&t.Input===i.Input)){var a=Zn(t);a&&(null===(r=_o(o,n).get(a))||void 0===r||r.play())}}})):console.error("ConfigurePlayerSfxPlayable called before this.Player is assigned. Beware of the call order of Configure_ functions."):console.error("ConfigurePlayerSfxPlayable called before this.Game is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var o=this;Oo(Co(c.prototype),"p5Setup",this).call(this,t,e),Object.entries(Dn).forEach((function(t){var e=wo(t,2)[1];return _o(o,n).set(e,new bo.Howl({src:[e],volume:_o(o,r)}))}))}}])&&So(o.prototype,i),a&&So(o,a),c}(t)}function Ao(t){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Do(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Bo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Go(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ho(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Io(t,e,n){return(Io="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=No(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Mo(t,e){return(Mo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=No(t);if(e){var o=No(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo(this,n)}}function Lo(t,e){return!e||"object"!==Ao(e)&&"function"!=typeof e?Fo(t):e}function Fo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function No(t){return(No=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yo(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Xo(t,e,"get"))}function zo(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Xo(t,e,"set"),n),n}function Xo(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Vo(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mo(t,e)}(u,t);var r,o,i,a=Wo(u);function u(){var t;Go(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Fo(t),{writable:!0,value:void 0}),n.set(Fo(t),{writable:!0,value:void 0}),zo(Fo(t),e,new Map),zo(Fo(t),n,.5),t}return r=u,(o=[{key:"ConfigureGameEventSfxPlayable",value:function(t){var r=this;zo(this,n,t),null!==this.State?(this.State.Achievement.on((function(t){console.log(t);var n=Zn(t);n&&n.forEach((function(t){var n;return null===(n=Yo(r,e).get(t))||void 0===n?void 0:n.play()}))})),this.State.Dead.on((function(){var t;null===(t=Yo(r,e).get(Bn.GameOver))||void 0===t||t.play()}))):console.error("ConfigureGameEventSfxPlayable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,r){var o=this;Io(No(u.prototype),"p5Setup",this).call(this,t,r),Object.entries(Bn).forEach((function(t){var r=Do(t,2)[1];return Yo(o,e).set(r,new bo.Howl({src:[r],volume:Yo(o,n)}))}))}}])&&Ho(r.prototype,o),i&&Ho(r,i),u}(t)}function Ko(t){return(Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Qo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jo(t,e,n){return(Jo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ri(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Zo(t,e){return(Zo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ti(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ri(t);if(e){var o=ri(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ei(this,n)}}function ei(t,e){return!e||"object"!==Ko(e)&&"function"!=typeof e?ni(t):e}function ni(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ri(t){return(ri=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oi(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ai(t,e,"get"))}function ii(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ai(t,e,"set"),n),n}function ai(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function ui(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zo(t,e)}(u,t);var r,o,i,a=ti(u);function u(){var t;qo(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(ni(t),{writable:!0,value:void 0}),n.set(ni(t),{writable:!0,value:void 0}),ii(ni(t),e,new Map),ii(ni(t),n,.5),t}return r=u,(o=[{key:"ConfigureGameEventVoicePlayable",value:function(t){var r=this;ii(this,n,t),null!==this.State?this.State.Achievement.on((function(t){var n,o=function(t){if(t.Type===_t.PerfectClear)return Gn.PerfectClear;var e="";if(t.BackToBack&&(e+="B2b"),t.Type===_t.TSpinMini?e+="TSpinMini":(t.Type===_t.TSpin&&(e+="TSpin"),1===t.LinesCleared.length?e+="Single":2===t.LinesCleared.length?e+="Double":3===t.LinesCleared.length?e+="Triple":4===t.LinesCleared.length&&(e+="Tetris")),Jn(e)&&"Single"!==e)return Gn[e];if(e.startsWith("B2b")&&Jn(e=e.substr(3)))return Gn[e];if(t.Combo>0){var n="Combo".concat(Math.min(5,t.Combo));if(Jn(n))return Gn[n]}return null}(t);o&&(null===(n=oi(r,e).get(o))||void 0===n||n.play())})):console.error("ConfigureGameEventVoicePlayable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,r){var o=this;Jo(ri(u.prototype),"p5Setup",this).call(this,t,r),Object.entries(Gn).forEach((function(t){var r=Uo(t,2)[1];return oi(o,e).set(r,new bo.Howl({src:[r],volume:oi(o,n)}))}))}}])&&$o(r.prototype,o),i&&$o(r,i),u}(t)}function ci(t){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return fi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fi(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function si(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yi(t,e,n){return(yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=di(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function hi(t,e){return(hi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=di(t);if(e){var o=di(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vi(this,n)}}function vi(t,e){return!e||"object"!==ci(e)&&"function"!=typeof e?wi(t):e}function wi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function di(t){return(di=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gi(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Si(t,e,"get"))}function mi(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Si(t,e,"set"),n),n}function Si(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Oi(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hi(t,e)}(u,t);var r,o,i,a=bi(u);function u(){var t;si(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(wi(t),{writable:!0,value:void 0}),n.set(wi(t),{writable:!0,value:void 0}),t.GameEventAnimation=null,mi(wi(t),e,new it(0,0)),mi(wi(t),n,new it(1,1)),t}return r=u,(o=[{key:"ConfigureGameEventTextDrawable",value:function(t,r){var o=this;mi(this,e,t),mi(this,n,r),null!==this.State?this.State.Achievement.on((function(t){var e=li(t.toString(),2),n=e[0],r=e[1];o.GameEventAnimation=new Hn(0,1,100*t.Rating,{subtitle:n,title:r,rating:t.Rating},0,Hn.RevertingFunction())})):console.error("ConfigureGameEventTextDrawable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Draw",value:function(t){yi(di(u.prototype),"p5Draw",this).call(this,t),this.SetTransform(t,gi(this,n).X,gi(this,n).Y,gi(this,e).X,gi(this,e).Y);var r=this.GameEventAnimation;r&&(r.Tick(),r.Finished&&(this.GameEventAnimation=null),t.textAlign(t.CENTER,t.BOTTOM),t.fill(255,255,255,255*r.CurrentValue),t.noStroke(),t.textSize(15*r.Data.rating*.8),qn(t,r.Data.subtitle,0,15*r.Data.rating),t.textSize(15*r.Data.rating),qn(t,r.Data.title,0,0))}}])&&pi(r.prototype,o),i&&pi(r,i),u}(t)}function Pi(t){return(Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ki(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ri(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ti(t,e,n){return(Ti="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xi(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ci(t,e){return(Ci=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xi(t);if(e){var o=xi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ji(this,n)}}function ji(t,e){return!e||"object"!==Pi(e)&&"function"!=typeof e?Ei(t):e}function Ei(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xi(t){return(xi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ai(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Bi(t,e,"get"))}function Di(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Bi(t,e,"set"),n),n}function Bi(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Gi(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ci(t,e)}(u,t);var r,o,i,a=_i(u);function u(){var t;ki(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Ei(t),{writable:!0,value:void 0}),n.set(Ei(t),{writable:!0,value:void 0}),Di(Ei(t),e,new it(0,0)),Di(Ei(t),n,new it(1,1)),t}return r=u,(o=[{key:"ConfigureGarbageMeterDrawable",value:function(t,r){Di(this,e,t),Di(this,n,r)}},{key:"p5Draw",value:function(t){if(Ti(xi(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,Ai(this,n).X,Ai(this,n).Y,Ai(this,e).X,Ai(this,e).Y);var r=this.State,o=this.BlockSize;t.fill(50),t.rect(0,0,o,o*r.PlayfieldHeight),t.fill(Un(t,nt.Garbage));for(var i=r.GarbageMeter.reduce((function(t,e){return t+e.Lines}),0),a=0;a<i;a++)t.rect(0,a*o,o,o)}}}])&&Ri(r.prototype,o),i&&Ri(r,i),u}(t)}function Hi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ii=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&n?(this.width=e,this.height=n):(this.width=440,this.height=502)}var e,n,r;return e=t,(n=[{key:"SetTransform",value:function(t,e,n,r,o){t.resetMatrix(),t.scale(1,-1),t.translate(r,-this.height+o),t.scale(e,n)}},{key:"ResetTransform",value:function(t){this.SetTransform(t,1,1,0,0)}},{key:"p5Setup",value:function(t,e){t.createCanvas(this.width,this.height).parent(e),this.ResetTransform(t)}},{key:"p5Draw",value:function(t){t.background(100)}},{key:"DrawHandler",get:function(){return this.p5Draw.bind(this)}},{key:"SetupHandler",get:function(){return this.p5Setup.bind(this)}}])&&Hi(e.prototype,n),r&&Hi(e,r),t}();function Mi(t){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wi(t,e){return(Wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Li(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ni(t);if(e){var o=Ni(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fi(this,n)}}function Fi(t,e){return!e||"object"!==Mi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ni(t){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wi(t,e)}(n,t);var e=Li(n);function n(t,r,o,i){var a,u,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(c=o&&i?e.call(this,o,i):e.call(this)).ConfigureGameState(r.State),c.ConfigurePlayer(r.Player),c.ConfigureGame(t),c.ConfigureBlockSize(L),c.ConfigurePlayfieldAnimatable(),c.ConfigurePlayerSfxPlayable(F),c.ConfigureGameEventSfxPlayable(F),c.ConfigureGameEventVoicePlayable(F),c.ConfigureGameEventTextDrawable(new it(11*c.BlockSize,c.BlockSize*((null!==(a=null===(u=c.State)||void 0===u?void 0:u.PlayfieldHeight)&&void 0!==a?a:20)+1)),new it(1,1)),c.ConfigurePlayfieldDrawable(new it(6*c.BlockSize,0),new it(1,1)),c.ConfigureHoldPieceDrawable(new it(10,200),new it(1,1)),c.ConfigurePieceQueueDrawable(new it(18*c.BlockSize,100),new it(.7,.7)),c.ConfigureGarbageMeterDrawable(new it(16.5*c.BlockSize,0),new it(1,1)),c.ConfigureFramerateDrawable(new it(0,c.height-10),new it(1,1)),Fi(c)}return n}($r(Gi(Mr(Rr(pr(Oi(Vo(ui(xo(Vn(ho(ao(En(On(hn(Ii))))))))))))))));function zi(t){return(zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xi(t,e){return(Xi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ui(t);if(e){var o=Ui(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ki(this,n)}}function Ki(t,e){return!e||"object"!==zi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ui(t){return(Ui=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xi(t,e)}(n,t);var e=Vi(n);function n(t,r,o,i){var a,u,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(c=o&&i?e.call(this,o,i):e.call(this)).ConfigureGameState(r.State),c.ConfigurePlayer(r.Player),c.ConfigureGame(t),c.ConfigureBlockSize(L),c.ConfigurePlayfieldAnimatable(),c.ConfigurePlayerSfxPlayable(F),c.ConfigureGameEventSfxPlayable(F),c.ConfigureGameEventVoicePlayable(F),c.ConfigureGameEventTextDrawable(new it(11*c.BlockSize,c.BlockSize*((null!==(a=null===(u=c.State)||void 0===u?void 0:u.PlayfieldHeight)&&void 0!==a?a:20)+1)),new it(1,1)),c.ConfigurePlayfieldDrawable(new it(6*c.BlockSize,0),new it(1,1)),c.ConfigureHoldPieceDrawable(new it(10,200),new it(1,1)),c.ConfigurePieceQueueDrawable(new it(18*c.BlockSize,100),new it(.7,.7)),c.ConfigureGarbageMeterDrawable(new it(16.5*c.BlockSize,0),new it(1,1)),c.ConfigureFramerateDrawable(new it(0,c.height-10),new it(1,1)),Ki(c)}return n}($r(Gi(Mr(Rr(pr(Oi(Vo(ui(xo(Vn(ho(En(On(hn(Ii)))))))))))))));function qi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Ji=function(t){var e=qi((0,r.useState)(),2)[1],n=qi((0,r.useState)(),2)[1],o=qi((0,r.useState)(),2)[1],i=qi((0,r.useState)(),2),a=i[0],u=i[1],c=qi((0,r.useState)(),2),l=c[0],f=c[1];return(0,r.useEffect)((function(){var t=new W,r=new an,i=new Ge([{player:t},{player:r}]),a=new Yi(i,i.Participants[0]),c=new Qi(i,i.Participants[1]);return e(t),n(r),o(i),u(a),f(c),setTimeout((function(){return i.StartClock()}),1e3),function(){i.StopClock()}}),[]),r.createElement("div",{className:"min-h-screen w-screen flex justify-center items-center"},a?r.createElement(p(),{setup:a.SetupHandler,draw:a.DrawHandler,keyPressed:a.KeyPressedHandler,keyReleased:a.KeyReleasedHandler}):null,l?r.createElement(p(),{setup:l.SetupHandler,draw:l.DrawHandler}):null)};function Zi(t){return(Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ta(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ea(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function na(t,e){return(na=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ra(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=aa(t);if(e){var o=aa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oa(this,n)}}function oa(t,e){return!e||"object"!==Zi(e)&&"function"!=typeof e?ia(t):e}function ia(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aa(t){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ua(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,la(t,e,"get"))}function ca(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,la(t,e,"set"),n),n}function la(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var fa=new WeakMap,sa=new WeakMap,pa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&na(t,e)}(i,t);var e,n,r,o=ra(i);function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return ta(this,i),e=o.call(this),fa.set(ia(e),{writable:!0,value:void 0}),sa.set(ia(e),{writable:!0,value:void 0}),ca(ia(e),fa,null),e.Player=t,e.State=n instanceof zt?n:new zt(n),ca(ia(e),sa,new yt),e}return e=i,(n=[{key:"Input",get:function(){return ua(this,sa)}},{key:"ClockRunning",get:function(){return null!==ua(this,fa)}},{key:"StartClock",value:function(){ca(this,fa,window.setInterval(this.Tick.bind(this),1e3/60))}},{key:"StopClock",value:function(){null!==ua(this,fa)&&window.clearInterval(ua(this,fa))}},{key:"Tick",value:function(){if(!this.State.IsDead){this.State.Tick();var t=this.Player.Tick(this.State.GetVisibleState()),e=this.State.Falling,n=!1;switch(t){case h.None:break;case h.HardDrop:n=this.State.HardDropPiece();break;case h.Hold:n=this.State.HoldPiece();break;case h.RotateCW:n=this.State.RotatePiece(ot.CW);break;case h.RotateCCW:n=this.State.RotatePiece(ot.CCW);break;case h.ShiftLeft:n=this.State.ShiftPiece(-1);break;case h.ShiftRight:n=this.State.ShiftPiece(1);break;case h.SoftDrop:n=this.State.SoftDropPiece(!1)}t!==h.None&&ua(this,sa).emit(new v(this.State.TicksElapsed,t,n,e,this.Player))}}}])&&ea(e.prototype,n),r&&ea(e,r),i}(ve);function ya(t){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ha(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ba(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function va(t,e){return(va=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ga(t);if(e){var o=ga(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return da(this,n)}}function da(t,e){return!e||"object"!==ya(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ga(t){return(ga=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ma(t){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sa(t,e){return(Sa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ka(t);if(e){var o=ka(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pa(this,n)}}function Pa(t,e){return!e||"object"!==ma(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ka(t){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ra=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sa(t,e)}(n,t);var e=Oa(n);function n(t,r,o){var i,a,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(u=r&&o?e.call(this,r,o):e.call(this)).ConfigureGameState(t.State),u.ConfigurePlayer(t.Player),u.ConfigureGame(t),u.ConfigureBlockSize(L),u.ConfigurePlayfieldAnimatable(),u.ConfigurePlayerSfxPlayable(F),u.ConfigureGameEventSfxPlayable(F),u.ConfigureGameEventVoicePlayable(F),u.ConfigureGameEventTextDrawable(new it(11*u.BlockSize,u.BlockSize*((null!==(i=null===(a=u.State)||void 0===a?void 0:a.PlayfieldHeight)&&void 0!==i?i:20)+1)),new it(1,1)),u.ConfigurePlayfieldDrawable(new it(6*u.BlockSize,0),new it(1,1)),u.ConfigureHoldPieceDrawable(new it(10,200),new it(1,1)),u.ConfigurePieceQueueDrawable(new it(17*u.BlockSize,100),new it(.7,.7)),u.ConfigureFramerateDrawable(new it(0,u.height-10),new it(1,1)),Pa(u)}return n}($r(Mr(Rr(pr(Oi(Vo(ui(xo(Vn(ho(ao(En(On(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&va(t,e)}(i,t);var e,n,r,o=wa(i);function i(){var t;ha(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).State=null,t}return e=i,(n=[{key:"ConfigureGameState",value:function(t){this.State=t}}])&&ba(e.prototype,n),r&&ba(e,r),i}(t)}(Ii)))))))))))))));function Ta(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ca(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ca(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ca(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const _a=function(t){var e=Ta((0,r.useState)(),2)[1],n=Ta((0,r.useState)(),2)[1],o=Ta((0,r.useState)(),2),i=o[0],a=o[1];return(0,r.useEffect)((function(){var t=new W,r=new pa(t),o=new Ra(r);return e(t),n(r),a(o),setTimeout((function(){return r.StartClock()}),1e3),function(){r.StopClock()}}),[]),i?r.createElement("div",{className:"min-h-screen w-screen flex justify-center items-center"},r.createElement(p(),{setup:i.SetupHandler,draw:i.DrawHandler,keyPressed:i.KeyPressedHandler,keyReleased:i.KeyReleasedHandler})):r.createElement("p",null,"Loading")};const ja=function(){return r.createElement(i.UT,null,r.createElement(a.rs,null,r.createElement(a.AW,{exact:!0,path:"/",component:l}),r.createElement(a.AW,{exact:!0,path:"/test",component:_a}),r.createElement(a.AW,{exact:!0,path:"/multi/local",component:Ji}),r.createElement(a.AW,{component:u})))};o.render(r.createElement(ja,null),document.getElementById("app"))}},t=>{"use strict";var e;e=163,t(t.s=e)}]);