(self.webpackChunktetris_ai=self.webpackChunktetris_ai||[]).push([[826],{499:(t,e,n)=>{"use strict";var r=n(294),o=n(935),i=n(727),a=n(977);const u=function(t){return r.createElement("p",null,"Not found")};const l=function(){return r.createElement("div",{className:"flex flex-col justify-center items-center select-none min-h-screen bg-gradient-to-br from-gray-900  to-blue-700"},r.createElement("h1",{className:"text-6xl text-green-500 border-b-4 pb-4"},"Hello World !"),r.createElement("h2",{className:"text-2xl text-gray-300 mt-10"},"Click"," ",r.createElement(i.rU,{to:"/test",className:"text-green-400 underline"},"here")," ","to play pre-alpha Tetris"))};const c=function(t){return r.createElement(l,null)};var f;!function(t){t[t.None=0]="None",t[t.SoftDrop=1]="SoftDrop",t[t.HardDrop=2]="HardDrop",t[t.Hold=3]="Hold",t[t.ShiftLeft=4]="ShiftLeft",t[t.ShiftRight=5]="ShiftRight",t[t.RotateCW=6]="RotateCW",t[t.RotateCCW=7]="RotateCCW"}(f||(f={}));const s=f;function h(t){return t===f.RotateCCW||t===f.RotateCW}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y,w,v,d,b,g,m,k,P,O,R,S,T,C,j,E,_=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.X=e,this.Y=n}var e,n,r;return e=t,(n=[{key:"Add",value:function(e){return new t(this.X+e.X,this.Y+e.Y)}},{key:"Subtract",value:function(e){return new t(this.X-e.X,this.Y-e.Y)}},{key:"Clone",value:function(){return new t(this.X,this.Y)}}])&&p(e.prototype,n),r&&p(e,r),t}();function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.None=0]="None",t[t.I=1]="I",t[t.J=2]="J",t[t.L=3]="L",t[t.O=4]="O",t[t.S=5]="S",t[t.T=6]="T",t[t.Z=7]="Z"}(C||(C={})),function(t){t[t.R0=0]="R0",t[t.R90=1]="R90",t[t.R180=2]="R180",t[t.R270=3]="R270"}(j||(j={})),function(t){t[t.CW=1]="CW",t[t.CCW=-1]="CCW"}(E||(E={}));var H=Object.freeze([(y={},A(y,-1,[new _(0,0),new _(1,0),new _(1,1),new _(0,-2),new _(1,-2)]),A(y,1,[new _(0,0),new _(-1,0),new _(-1,1),new _(0,-2),new _(-1,-2)]),y),(w={},A(w,-1,[new _(0,0),new _(1,0),new _(1,-1),new _(0,2),new _(1,2)]),A(w,1,[new _(0,0),new _(1,0),new _(1,-1),new _(0,2),new _(1,2)]),w),(v={},A(v,-1,[new _(0,0),new _(-1,0),new _(-1,1),new _(0,-2),new _(-1,-2)]),A(v,1,[new _(0,0),new _(1,0),new _(1,1),new _(0,-2),new _(1,-2)]),v),(d={},A(d,-1,[new _(0,0),new _(-1,0),new _(-1,-1),new _(0,2),new _(-1,2)]),A(d,1,[new _(0,0),new _(-1,0),new _(-1,-1),new _(0,2),new _(-1,2)]),d)]),W=Object.freeze([(b={},A(b,-1,[new _(0,0),new _(-1,0),new _(2,0),new _(-1,2),new _(2,-1)]),A(b,1,[new _(0,0),new _(-2,0),new _(1,0),new _(-2,-1),new _(1,2)]),b),(g={},A(g,-1,[new _(0,0),new _(2,0),new _(-1,0),new _(2,1),new _(-1,-2)]),A(g,1,[new _(0,0),new _(-1,0),new _(2,0),new _(-1,2),new _(2,-1)]),g),(m={},A(m,-1,[new _(0,0),new _(1,0),new _(-2,0),new _(1,-2),new _(-2,1)]),A(m,1,[new _(0,0),new _(2,0),new _(-1,0),new _(2,1),new _(-1,-2)]),m),(k={},A(k,-1,[new _(0,0),new _(-2,0),new _(1,0),new _(-2,-1),new _(1,2)]),A(k,1,[new _(0,0),new _(1,0),new _(-2,0),new _(1,-2),new _(-2,1)]),k)]),D=Object.freeze([(P={},A(P,-1,[new _(0,0)]),A(P,1,[new _(0,0)]),P),(O={},A(O,-1,[new _(0,0)]),A(O,1,[new _(0,0)]),O),(R={},A(R,-1,[new _(0,0)]),A(R,1,[new _(0,0)]),R),(S={},A(S,-1,[new _(0,0)]),A(S,1,[new _(0,0)]),S)]),F=Object.freeze((A(T={},C.None,{Rotations:[[]],WallKick:D}),A(T,C.I,{Rotations:[[new _(0,2),new _(1,2),new _(2,2),new _(3,2)],[new _(2,0),new _(2,1),new _(2,2),new _(2,3)],[new _(0,1),new _(1,1),new _(2,1),new _(3,1)],[new _(1,0),new _(1,1),new _(1,2),new _(1,3)]],WallKick:W}),A(T,C.J,{Rotations:[[new _(0,2),new _(0,1),new _(1,1),new _(2,1)],[new _(2,2),new _(1,2),new _(1,1),new _(1,0)],[new _(0,1),new _(1,1),new _(2,1),new _(2,0)],[new _(0,0),new _(1,0),new _(1,1),new _(1,2)]],WallKick:H}),A(T,C.L,{Rotations:[[new _(0,1),new _(1,1),new _(2,1),new _(2,2)],[new _(1,2),new _(1,1),new _(1,0),new _(2,0)],[new _(0,0),new _(0,1),new _(1,1),new _(2,1)],[new _(0,2),new _(1,2),new _(1,1),new _(1,0)]],WallKick:H}),A(T,C.O,{Rotations:[[new _(0,0),new _(0,1),new _(1,0),new _(1,1)]],WallKick:D}),A(T,C.S,{Rotations:[[new _(0,1),new _(1,1),new _(1,2),new _(2,2)],[new _(1,2),new _(1,1),new _(2,1),new _(2,0)],[new _(0,0),new _(1,0),new _(1,1),new _(2,1)],[new _(0,2),new _(0,1),new _(1,1),new _(1,0)]],WallKick:H}),A(T,C.T,{Rotations:[[new _(0,1),new _(1,1),new _(1,2),new _(2,1)],[new _(1,2),new _(1,1),new _(2,1),new _(1,0)],[new _(0,1),new _(1,0),new _(1,1),new _(2,1)],[new _(1,2),new _(0,1),new _(1,1),new _(1,0)]],WallKick:H}),A(T,C.Z,{Rotations:[[new _(0,2),new _(1,1),new _(1,2),new _(2,1)],[new _(2,2),new _(1,1),new _(2,1),new _(1,0)],[new _(0,1),new _(1,0),new _(1,1),new _(2,0)],[new _(1,2),new _(0,1),new _(1,1),new _(0,0)]],WallKick:H}),T));const I=F;Array.prototype.max||Object.defineProperty(Array.prototype,"max",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var t=this.length,e=this[0];t--;)this[t]>e&&(e=this[t]);return e}}),Array.prototype.maxBy||Object.defineProperty(Array.prototype,"maxBy",{enumerable:!1,writable:!1,configurable:!1,value:function(t){for(var e=this.length,n=t(this[0]),r=this[0];e--;){var o=t(this[e]);o>n&&(n=o,r=this[e])}return r}}),Array.prototype.min||Object.defineProperty(Array.prototype,"min",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var t=this.length,e=this[0];t--;)this[t]<e&&(e=this[t]);return e}}),Array.prototype.minBy||Object.defineProperty(Array.prototype,"minBy",{enumerable:!1,writable:!1,configurable:!1,value:function(t){for(var e=this.length,n=t(this[0]),r=this[0];e--;){var o=t(this[e]);o<n&&(n=o,r=this[e])}return r}});const x=function(t){return function(){var e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}};function L(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,X(t,e,"get"))}function M(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,X(t,e,"set"),n),n}function X(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var K=new WeakMap,z=new WeakMap,Q=new WeakMap,U=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(B(this,t),K.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),n instanceof Array)return M(this,z,null),M(this,Q,new Array(r+n.length).fill(C.None)),(e=Y(this,Q)).splice.apply(e,[r,n.length].concat(L(n))),void M(this,K,null);M(this,z,void 0===n?Math.floor(Math.random()*Math.pow(2,32)):n),M(this,K,x(Y(this,z))),M(this,Q,[])}var e,n,r;return e=t,(n=[{key:"Seed",get:function(){return Y(this,z)}},{key:"generate",value:function(){if(null!==Y(this,z)&&null!==Y(this,K))for(var t=[C.I,C.J,C.L,C.O,C.S,C.T,C.Z];t.length>0;){var e=Y(this,K).call(this)%t.length;Y(this,Q).push(t.splice(e,1)[0])}else Y(this,Q).push(C.None)}},{key:"Get",value:function(t){for(;Y(this,Q).length<=t;)this.generate();return Y(this,Q)[t]}},{key:"GetRange",value:function(t,e){for(;Y(this,Q).length<=t+e;)this.generate();return Y(this,Q).slice(t,t+e)}}])&&G(e.prototype,n),r&&G(e,r),t}();function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var J=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.R0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:NaN,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:s.None;V(this,t),this.Type=e,this.Rotation=n,r?this.Position=r:(this.Position=new _(4,21),this.Bottom=21,this.Left=Math.floor(5-this.Width/2)),this.LastActionTick=o,this.ActionCount=i,this.DropTick=a,this.LastAction=u}var e,n,r;return e=t,r=[{key:"Spawn",value:function(e,n){return new t(e,void 0,void 0,n,0,n)}}],(n=[{key:"Clone",value:function(){return new t(this.Type,this.Rotation,this.Position.Clone(),this.LastActionTick,this.ActionCount,this.DropTick,this.LastAction)}},{key:"InternalPoints",get:function(){return F[this.Type].Rotations[this.Rotation]}},{key:"Points",get:function(){var t=this;return F[this.Type].Rotations[this.Rotation].map((function(e){return e.Add(t.Position)}))}},{key:"InternalLeft",get:function(){return this.InternalPoints.map((function(t){return t.X})).min()}},{key:"InternalRight",get:function(){return this.InternalPoints.map((function(t){return t.X})).max()}},{key:"InternalTop",get:function(){return this.InternalPoints.map((function(t){return t.Y})).max()}},{key:"InternalBottom",get:function(){return this.InternalPoints.map((function(t){return t.Y})).min()}},{key:"Left",get:function(){return this.Position.X+this.InternalLeft},set:function(t){this.Position.X=t-this.InternalLeft}},{key:"Right",get:function(){return this.Position.X+this.InternalRight},set:function(t){this.Position.X=t-this.InternalRight}},{key:"Top",get:function(){return this.Position.Y+this.InternalTop},set:function(t){this.Position.Y=t-this.InternalTop}},{key:"Bottom",get:function(){return this.Position.Y+this.InternalBottom},set:function(t){this.Position.Y=t-this.InternalBottom}},{key:"Width",get:function(){return this.InternalRight-this.InternalLeft}},{key:"Height",get:function(){return this.InternalTop-this.InternalBottom}},{key:"Rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.CW;this.Rotation+=t,this.Rotation>3&&(this.Rotation=0),this.Rotation<0&&(this.Rotation=3)}}])&&q(e.prototype,n),r&&q(e,r),t}();function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const $=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Z(this,"listeners",[]),Z(this,"listenersOncer",[]),Z(this,"on",(function(t){return e.listeners.push(t),{dispose:function(){return e.off(t)}}})),Z(this,"once",(function(t){e.listenersOncer.push(t)})),Z(this,"off",(function(t){var n=e.listeners.indexOf(t);n>-1&&e.listeners.splice(n,1)})),Z(this,"emit",(function(t){if(e.listeners.forEach((function(e){return e(t)})),e.listenersOncer.length>0){var n=e.listenersOncer;e.listenersOncer=[],n.forEach((function(e){return e(t)}))}})),Z(this,"pipe",(function(t){return e.on((function(e){return t.emit(e)}))}))};var tt;function et(t){return t===tt.Tetris||t===tt.TSpin||t===tt.TSpinMini}!function(t){t[t.Single=1]="Single",t[t.Double=2]="Double",t[t.Triple=3]="Triple",t[t.Tetris=4]="Tetris",t[t.TSpin=5]="TSpin",t[t.TSpinMini=6]="TSpinMini"}(tt||(tt={}));const nt=function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.LinesCleared=e,this.Type=n,this.Combo=r,this.BackToBack=o};function rt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function at(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,lt(t,e,"get"))}function ut(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,lt(t,e,"set"),n),n}function lt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ft=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C.None,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;ct(this,t),this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(C.None)})),o&&o.forEach((function(t,n){return t.forEach((function(t,r){return e.Grid[n][r]=t}))})),this.Falling=i?i.Clone():null,this.Hold=a,this.BlockHold=l,this.TicksElapsed=u,this.PieceQueue=n,this.PieceIndex=r,this.Combo=c,this.LastAchievement=f},st=new WeakMap,ht=new WeakMap;const pt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C.None,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(ct(this,t),st.set(this,{writable:!0,value:void 0}),ht.set(this,{writable:!0,value:void 0}),e instanceof ft){var c=e;this.Grid=c.Grid,this.Falling=c.Falling,this.Hold=c.Hold,this.BlockHold=c.BlockHold,this.TicksElapsed=c.TicksElapsed,ut(this,st,new U(c.PieceQueue,c.PieceIndex)),this.PieceIndex=c.PieceIndex,this.Combo=c.Combo,this.LastAchievement=c.LastAchievement}else this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(C.None)})),this.Falling=r,this.Hold=o,this.BlockHold=a,this.TicksElapsed=i,ut(this,st,new U(e)),this.PieceIndex=n,this.Combo=u,this.LastAchievement=l;ut(this,ht,new $)}var e,n,r;return e=t,(n=[{key:"GetVisibleState",value:function(){return new ft(this.PieceQueue,this.PieceIndex,this.Grid,this.Falling,this.Hold,this.TicksElapsed,this.BlockHold,this.Combo)}},{key:"Achievement",get:function(){return at(this,ht)}},{key:"GridWidth",get:function(){return 10}},{key:"GridHeight",get:function(){return 40}},{key:"PlayfieldHeight",get:function(){return 20}},{key:"PieceQueue",get:function(){return at(this,st).GetRange(this.PieceIndex,6)}},{key:"Get",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t instanceof _)e=t.X,n=t.Y;else{if(void 0===r)return null;e=t,n=r}return e<0||n<0||e>=10||n>=40?null:this.Grid[n][e]}},{key:"IsPieceValid",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?!e.Points.some((function(e){var n;return(null!==(n=t.Get(e))&&void 0!==n?n:C.I)!==C.None})):!this.Falling||!this.Falling.Points.some((function(e){var n;return(null!==(n=t.Get(e))&&void 0!==n?n:C.I)!==C.None}))}},{key:"DequeuePiece",value:function(){return null===this.Falling&&(this.Falling=J.Spawn(at(this,st).Get(this.PieceIndex++),this.TicksElapsed),this.BlockHold=!1,!0)}},{key:"HoldPiece",value:function(){if(null===this.Falling)return!1;if(this.BlockHold)return!1;var t=this.Hold;return this.Hold=this.Falling.Type,t===C.None&&(t=at(this,st).Get(this.PieceIndex++)),this.Falling=J.Spawn(t,this.TicksElapsed),this.BlockHold=!0,this.Falling.LastAction=s.Hold,!0}},{key:"ClearLines",value:function(){for(var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=0,o=0;o<this.GridHeight;o++)this.Grid[o].some((function(t){return t===C.None}))||(this.Grid.splice(o,1),this.Grid.push(new Array(this.GridWidth).fill(C.None)),r++,o--);if(0!==r){this.Combo++;var i=new nt(r,r,this.Combo,et(null!==(t=this.LastAchievement)&&void 0!==t?t:tt.Single));if((null==n?void 0:n.Type)===C.T&&h(n.LastAction)){var a=[[0,0],[2,0],[0,2],[2,2]].reduce((function(t,r){var o=rt(r,2),i=o[0],a=o[1];return e.Get(n.Position.X+i,n.Position.Y+a)!==C.None?t+1:t}),0);if(a>=3){var u=[[1,0],[0,1],[1,2],[2,1]].some((function(t){var r=rt(t,2),o=r[0],i=r[1];return!n.InternalPoints.find((function(t){return t.X===o&&t.Y===i}))&&e.Get(n.Position.X+o,n.Position.Y+i)===C.None}));i.Type=u?tt.TSpinMini:tt.TSpin}}var l=i.Type;at(this,ht).emit(i),this.LastAchievement=l}else this.Combo=0}},{key:"LockPiece",value:function(){var t=this;return null!==this.Falling&&!!this.IsPieceValid()&&(this.Falling.Points.forEach((function(e){var n,r;return t.Grid[e.Y][e.X]=null!==(n=null===(r=t.Falling)||void 0===r?void 0:r.Type)&&void 0!==n?n:C.None})),this.ClearLines(this.Falling),this.Falling=null,!0)}},{key:"RotatePiece",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.CW;if(null===this.Falling)return!1;var n=F[this.Falling.Type].WallKick[this.Falling.Rotation][e].find((function(n){var r,o=null===(r=t.Falling)||void 0===r?void 0:r.Clone();return!!o&&(o.Rotate(e),o.Position=o.Position.Add(n),t.IsPieceValid(o))}));return!!n&&(this.Falling.Rotate(e),this.Falling.Position=this.Falling.Position.Add(n),this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=e===E.CW?s.RotateCW:s.RotateCCW,!0)}},{key:"ShiftPiece",value:function(t){if(null===this.Falling)return!1;var e=this.Falling.Clone();return e.Position.X+=t,!!this.IsPieceValid(e)&&(this.Falling=e,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=t>0?s.ShiftRight:s.ShiftLeft,!0)}},{key:"CanPieceDrop",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)t=e.Clone();else{if(!this.Falling)return!1;t=this.Falling.Clone()}return t.Position.Y--,this.IsPieceValid(t)}},{key:"SoftDropPiece",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null!==this.Falling&&!!this.CanPieceDrop()&&(this.Falling.Position.Y--,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount=0,t?this.Falling.DropTick=this.TicksElapsed:this.Falling.LastAction=s.SoftDrop,!0)}},{key:"HardDropPiece",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)t=e;else{if(!this.Falling)return!1;t=this.Falling}for(;this.IsPieceValid(t);)t.Position.Y--;return t.Position.Y++,t!==this.Falling||this.LockPiece()}},{key:"Tick",value:function(){null===this.Falling?this.DequeuePiece():(this.TicksElapsed-this.Falling.DropTick>=15&&this.SoftDropPiece(!0),this.TicksElapsed-this.Falling.LastActionTick>=60&&!this.CanPieceDrop()&&this.LockPiece()),this.TicksElapsed++}}])&&it(e.prototype,n),r&&it(e,r),t}();function yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,bt(t,e,"get"))}function dt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,bt(t,e,"set"),n),n}function bt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var gt=new WeakMap,mt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;yt(this,t),gt.set(this,{writable:!0,value:void 0}),dt(this,gt,null),this.Player=e,this.State=n instanceof pt?n:new pt(n)}var e,n,r;return e=t,(n=[{key:"ClockRunning",get:function(){return null!==vt(this,gt)}},{key:"StartClock",value:function(){dt(this,gt,window.setInterval(this.Tick.bind(this),1e3/60))}},{key:"StopClock",value:function(){null!==vt(this,gt)&&window.clearInterval(vt(this,gt))}},{key:"Tick",value:function(){switch(this.State.Tick(),this.Player.Tick(this.State.GetVisibleState())){case s.None:return;case s.HardDrop:this.State.HardDropPiece();break;case s.Hold:this.State.HoldPiece();break;case s.RotateCW:this.State.RotatePiece(E.CW);break;case s.RotateCCW:this.State.RotatePiece(E.CCW);break;case s.ShiftLeft:this.State.ShiftPiece(-1);break;case s.ShiftRight:this.State.ShiftPiece(1);break;case s.SoftDrop:this.State.SoftDropPiece(!1)}}}])&&wt(e.prototype,n),r&&wt(e,r),t}(),kt=n(210),Pt=n.n(kt);function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ct(t,e,n){return(Ct="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ht(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ht(t);if(e){var o=Ht(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _t(this,n)}}function _t(t,e){return!e||"object"!==Rt(e)&&"function"!=typeof e?At(t):e}function At(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ft(t,e,"get"))}function Dt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ft(t,e,"set"),n),n}function Ft(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gt(t);if(e){var o=Gt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bt(this,n)}}function Bt(t,e){return!e||"object"!==It(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yt,Mt,Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(n,t);var e=Nt(n);function n(){return xt(this,n),e.apply(this,arguments)}return n}((Yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"Tick",value:function(t){return s.None}}])&&Ot(e.prototype,n),r&&Ot(e,r),t}(),Mt=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}(i,t);var e,n,r,o=Et(i);function i(){var t;St(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=o.call.apply(o,[this].concat(n)),Mt.set(At(t),{writable:!0,value:void 0}),Dt(At(t),Mt,[]),t}return e=i,(n=[{key:"Tick",value:function(t){var e;return"Update"in Yt?Ct(Ht(i.prototype),"Tick",this).call(this,t):null!==(e=Wt(this,Mt).shift())&&void 0!==e?e:s.None}},{key:"Update",value:function(t,e){var n;return e&&null!==(n=Wt(this,Mt).shift())&&void 0!==n?n:s.None}},{key:"Enqueue",value:function(t){Wt(this,Mt).push(t)}}])&&Tt(e.prototype,n),r&&Tt(e,r),i}(Yt)));function Kt(t,e){switch(e){case C.None:return t.color(50);case C.I:return t.color(77,208,225);case C.J:return t.color(33,150,243);case C.L:return t.color(255,152,0);case C.O:return t.color(253,216,53);case C.S:return t.color(76,175,80);case C.T:return t.color(224,64,251);case C.Z:return t.color(229,115,115)}}function zt(t,e,n,r,o,i){var a=Kt(t,null!=e?e:C.None);a.setAlpha(i),t.fill(a),r.forEach((function(e){t.rect(n.X+e.X*o,n.Y+e.Y*o,o,o)}))}function Qt(t,e,n,r,o,i){t.push(),t.scale(1,-1),t.text(e,n,-r,o,-i),t.pop()}function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jt(t,e,n){return(Jt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ne(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ne(t);if(e){var o=ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return te(this,n)}}function te(t,e){return!e||"object"!==Ut(e)&&"function"!=typeof e?ee(t):e}function ee(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function re(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ie(t,e,"get"))}function oe(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ie(t,e,"set"),n),n}function ie(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ce(t,e,n){return(ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ye(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function se(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ye(t);if(e){var o=ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he(this,n)}}function he(t,e){return!e||"object"!==ae(e)&&"function"!=typeof e?pe(t):e}function pe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ye(t){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function we(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,de(t,e,"get"))}function ve(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,de(t,e,"set"),n),n}function de(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ke(t,e,n){return(ke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Te(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Pe(t,e){return(Pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Te(t);if(e){var o=Te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Re(this,n)}}function Re(t,e){return!e||"object"!==be(e)&&"function"!=typeof e?Se(t):e}function Se(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Te(t){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ce(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ee(t,e,"get"))}function je(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ee(t,e,"set"),n),n}function Ee(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function _e(t){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function He(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function We(t,e,n){return(We="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Le(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Le(t);if(e){var o=Le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ie(this,n)}}function Ie(t,e){return!e||"object"!==_e(e)&&"function"!=typeof e?xe(t):e}function xe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ne(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ge(t,e,"get"))}function Be(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ge(t,e,"set"),n),n}function Ge(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Ye(t){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ke(t,e,n){return(Ke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ve(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ze(t,e){return(ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ve(t);if(e){var o=Ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(t,e){return!e||"object"!==Ye(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ve(t){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qe(t){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $e(t,e){return($e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nn(t);if(e){var o=nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return en(this,n)}}function en(t,e){return!e||"object"!==qe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nn(t){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=cn(t);if(e){var o=cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ln(this,n)}}function ln(t,e){return!e||"object"!==on(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(n,t);var e=un(n);function n(t,r,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(a=o&&i?e.call(this,r,o,i):e.call(this,r)).ConfigureInputHandleable(t),a.ConfigureBlockSize(15),a.ConfigurePlayfieldDrawable(new _(120,0),new _(1,1)),a.ConfigureHoldPieceDrawable(new _(10,200),new _(1,1)),a.ConfigurePieceQueueDrawable(new _(400,0),new _(.7,.7)),a.ConfigureFramerateDrawable(new _(0,a.height-10),new _(1,1)),ln(a)}return n}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(u,t);var r,o,i,a=Fe(u);function u(){var t;Ae(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(xe(t),{writable:!0,value:void 0}),n.set(xe(t),{writable:!0,value:void 0}),Be(xe(t),e,new _(0,0)),Be(xe(t),n,new _(1,1)),t}return r=u,(o=[{key:"ConfigureFramerateDrawable",value:function(t,r){Be(this,e,t),Be(this,n,r)}},{key:"p5Draw",value:function(t){We(Le(u.prototype),"p5Draw",this).call(this,t),this.SetTransform(t,Ne(this,n).X,Ne(this,n).Y,Ne(this,e).X,Ne(this,e).Y),t.noStroke(),t.fill(0),Qt(t,"FPS: ".concat(t.frameRate().toFixed(2)),0,0)}}])&&He(r.prototype,o),i&&He(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pe(t,e)}(u,t);var r,o,i,a=Oe(u);function u(){var t;ge(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Se(t),{writable:!0,value:void 0}),n.set(Se(t),{writable:!0,value:void 0}),je(Se(t),e,new _(0,0)),je(Se(t),n,new _(1,1)),t}return r=u,(o=[{key:"ConfigurePieceQueueDrawable",value:function(t,r){je(this,e,t),je(this,n,r)}},{key:"p5Draw",value:function(t){ke(Te(u.prototype),"p5Draw",this).call(this,t),this.SetTransform(t,Ce(this,n).X,Ce(this,n).Y,Ce(this,e).X,Ce(this,e).Y);for(var r=this.State,o=this.BlockSize,i=r.PieceQueue.length,a=0;a<i;a++){var l=I[r.PieceQueue[a]].Rotations[0].slice();zt(t,r.PieceQueue[a],new _(0,this.height-(a+1)*o*4),l,o,255)}}}])&&me(r.prototype,o),i&&me(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}(u,t);var r,o,i,a=se(u);function u(){var t;ue(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(pe(t),{writable:!0,value:void 0}),n.set(pe(t),{writable:!0,value:void 0}),ve(pe(t),e,new _(0,0)),ve(pe(t),n,new _(1,1)),t}return r=u,(o=[{key:"ConfigureHoldPieceDrawable",value:function(t,r){ve(this,e,t),ve(this,n,r)}},{key:"p5Draw",value:function(t){ce(ye(u.prototype),"p5Draw",this).call(this,t),this.SetTransform(t,we(this,n).X,we(this,n).Y,we(this,e).X,we(this,e).Y);var r=this.State,o=this.BlockSize;if(t.fill(50),t.rect(0,0,5*o,6*o),t.noStroke(),t.fill(255),t.textAlign(t.CENTER),Qt(t,"HOLD",2.5*o,5*o),t.textAlign(t.LEFT),t.stroke(0),r.Hold){var i=I[r.Hold].Rotations[0].slice();zt(t,r.Hold,new _(o/2,o/2),i,o,255)}}}])&&le(r.prototype,o),i&&le(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(u,t);var r,o,i,a=$t(u);function u(){var t;Vt(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(ee(t),{writable:!0,value:void 0}),n.set(ee(t),{writable:!0,value:void 0}),oe(ee(t),e,new _(0,0)),oe(ee(t),n,new _(1,1)),t}return r=u,(o=[{key:"ConfigurePlayfieldDrawable",value:function(t,r){oe(this,e,t),oe(this,n,r)}},{key:"p5Draw",value:function(t){Jt(ne(u.prototype),"p5Draw",this).call(this,t),this.SetTransform(t,re(this,n).X,re(this,n).Y,re(this,e).X,re(this,e).Y);var r=this.State,o=this.BlockSize;if(r){t.stroke(0);for(var i=0;i<=r.GridHeight;i++)t.line(0,i*o,r.GridWidth*o,i*o);for(var a=0;a<=r.GridWidth;a++)t.line(a*o,0,a*o,r.GridHeight*o);for(var l=0;l<r.GridHeight;l++)for(var c=0;c<r.GridWidth;c++){var f;t.fill(Kt(t,null!==(f=r.Get(c,l))&&void 0!==f?f:C.None)),t.rect(c*o,l*o,o,o)}if(r.Falling){var s,h,p=r.Falling.Points;zt(t,null===(s=r.Falling)||void 0===s?void 0:s.Type,new _(0,0),p,o,255);var y=r.Falling.Clone();r.HardDropPiece(y);var w=y.Points;zt(t,null===(h=r.Falling)||void 0===h?void 0:h.Type,new _(0,0),w,o,100)}}}}])&&qt(r.prototype,o),i&&qt(r,i),u}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$e(t,e)}(i,t);var e,n,r,o=tn(i);function i(){var t;Je(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).blockSize=15,t}return e=i,(n=[{key:"BlockSize",get:function(){return this.blockSize}},{key:"ConfigureBlockSize",value:function(t){this.blockSize=t}}])&&Ze(e.prototype,n),r&&Ze(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ze(t,e)}(i,t);var e,n,r,o=Qe(i);function i(){var t;Me(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).Player=null,t.keyHold=s.None,t.keyDelay=0,t}return e=i,(n=[{key:"ConfigureInputHandleable",value:function(t){this.Player=t}},{key:"p5Draw",value:function(t){Ke(Ve(i.prototype),"p5Draw",this).call(this,t),this.keyHold!==s.None&&this.Player instanceof Xt&&(this.keyDelay<=0&&(this.Player.Enqueue(this.keyHold),this.keyDelay=10),this.keyDelay--)}},{key:"p5KeyPressed",value:function(t){this.Player instanceof Xt&&(t.keyCode===t.LEFT_ARROW&&(this.keyHold=s.ShiftLeft),t.keyCode===t.RIGHT_ARROW&&(this.keyHold=s.ShiftRight),t.keyCode===t.UP_ARROW&&(this.keyHold=s.RotateCW),t.keyCode===t.CONTROL&&(this.keyHold=s.RotateCCW),t.keyCode===t.DOWN_ARROW&&(this.keyHold=s.SoftDrop),t.keyCode===t.SHIFT&&(this.keyHold=s.Hold)," "===t.key&&(this.keyHold=s.HardDrop),this.Player.Enqueue(this.keyHold),this.keyDelay=10)}},{key:"p5KeyReleased",value:function(t){if(this.Player instanceof Xt){var e=s.None;t.keyCode===t.LEFT_ARROW&&(e=s.ShiftLeft),t.keyCode===t.RIGHT_ARROW&&(e=s.ShiftRight),t.keyCode===t.UP_ARROW&&(e=s.RotateCW),t.keyCode===t.CONTROL&&(e=s.RotateCCW),t.keyCode===t.DOWN_ARROW&&(e=s.SoftDrop),t.keyCode===t.SHIFT&&(e=s.Hold)," "===t.key&&(e=s.HardDrop),this.keyHold===e&&(this.keyHold=s.None)}}},{key:"KeyPressedHandler",get:function(){return this.p5KeyPressed.bind(this)}},{key:"KeyReleasedHandler",get:function(){return this.p5KeyReleased.bind(this)}}])&&Xe(e.prototype,n),r&&Xe(e,r),i}(t)}(function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.State=e,n&&r?(this.width=n,this.height=r):(this.width=500,this.height=301.5)}var e,n,r;return e=t,(n=[{key:"SetTransform",value:function(t,e,n,r,o){t.resetMatrix(),t.scale(e,-n),t.translate(r,-this.height+o)}},{key:"ResetTransform",value:function(t){this.SetTransform(t,1,1,0,0)}},{key:"p5Setup",value:function(t,e){t.createCanvas(this.width,this.height).parent(e),this.ResetTransform(t)}},{key:"p5Draw",value:function(t){t.background(100)}},{key:"DrawHandler",get:function(){return this.p5Draw.bind(this)}},{key:"SetupHandler",get:function(){return this.p5Setup.bind(this)}}])&&rn(e.prototype,n),r&&rn(e,r),t}()))))))),sn=new Xt,hn=new mt(sn),pn=new fn(sn,hn.State);console.log(pn);hn.StartClock();const yn=function(t){return r.createElement(Pt(),{setup:pn.SetupHandler,draw:pn.DrawHandler,keyPressed:pn.KeyPressedHandler,keyReleased:pn.KeyReleasedHandler})};const wn=function(){return r.createElement(i.UT,null,r.createElement(a.rs,null,r.createElement(a.AW,{exact:!0,path:"/",component:c}),r.createElement(a.AW,{exact:!0,path:"/test",component:yn}),r.createElement(a.AW,{component:u})))};o.render(r.createElement(wn,null),document.getElementById("app"))}},t=>{"use strict";var e;e=499,t(t.s=e)}]);