(self.webpackChunktetris_ai=self.webpackChunktetris_ai||[]).push([[826],{671:(t,e,n)=>{"use strict";var r=n(294),o=n(935),i=n(727),a=n(977);const u=function(t){return r.createElement("p",null,"Not found")};const c=function(){return r.createElement("div",{className:"flex flex-col justify-center items-center select-none min-h-screen bg-gradient-to-br from-gray-900  to-blue-700"},r.createElement("h1",{className:"text-6xl text-green-500 border-b-4 pb-4"},"Hello World !"),r.createElement("h2",{className:"text-2xl text-gray-300 mt-10"},"Click"," ",r.createElement(i.rU,{to:"/test",className:"text-green-400 underline"},"here")," ","to play pre-alpha Tetris"))};const l=function(t){return r.createElement(c,null)};var f;!function(t){t[t.None=0]="None",t[t.SoftDrop=1]="SoftDrop",t[t.HardDrop=2]="HardDrop",t[t.Hold=3]="Hold",t[t.ShiftLeft=4]="ShiftLeft",t[t.ShiftRight=5]="ShiftRight",t[t.RotateCW=6]="RotateCW",t[t.RotateCCW=7]="RotateCCW"}(f||(f={}));const s=f;function p(t){return t===f.RotateCCW||t===f.RotateCW}var y=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Input=e,this.Success=n};function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v,b,w,d,g,m,S,O,k,P,R,_,T,C,j,x,E=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.X=e,this.Y=n}var e,n,r;return e=t,(n=[{key:"Add",value:function(e){return new t(this.X+e.X,this.Y+e.Y)}},{key:"Subtract",value:function(e){return new t(this.X-e.X,this.Y-e.Y)}},{key:"Clone",value:function(){return new t(this.X,this.Y)}}])&&h(e.prototype,n),r&&h(e,r),t}();function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.None=0]="None",t[t.I=1]="I",t[t.J=2]="J",t[t.L=3]="L",t[t.O=4]="O",t[t.S=5]="S",t[t.T=6]="T",t[t.Z=7]="Z"}(C||(C={})),function(t){t[t.R0=0]="R0",t[t.R90=1]="R90",t[t.R180=2]="R180",t[t.R270=3]="R270"}(j||(j={})),function(t){t[t.CW=1]="CW",t[t.CCW=-1]="CCW"}(x||(x={}));var B=Object.freeze([(v={},A(v,-1,[new E(0,0),new E(1,0),new E(1,1),new E(0,-2),new E(1,-2)]),A(v,1,[new E(0,0),new E(-1,0),new E(-1,1),new E(0,-2),new E(-1,-2)]),v),(b={},A(b,-1,[new E(0,0),new E(1,0),new E(1,-1),new E(0,2),new E(1,2)]),A(b,1,[new E(0,0),new E(1,0),new E(1,-1),new E(0,2),new E(1,2)]),b),(w={},A(w,-1,[new E(0,0),new E(-1,0),new E(-1,1),new E(0,-2),new E(-1,-2)]),A(w,1,[new E(0,0),new E(1,0),new E(1,1),new E(0,-2),new E(1,-2)]),w),(d={},A(d,-1,[new E(0,0),new E(-1,0),new E(-1,-1),new E(0,2),new E(-1,2)]),A(d,1,[new E(0,0),new E(-1,0),new E(-1,-1),new E(0,2),new E(-1,2)]),d)]),D=Object.freeze([(g={},A(g,-1,[new E(0,0),new E(-1,0),new E(2,0),new E(-1,2),new E(2,-1)]),A(g,1,[new E(0,0),new E(-2,0),new E(1,0),new E(-2,-1),new E(1,2)]),g),(m={},A(m,-1,[new E(0,0),new E(2,0),new E(-1,0),new E(2,1),new E(-1,-2)]),A(m,1,[new E(0,0),new E(-1,0),new E(2,0),new E(-1,2),new E(2,-1)]),m),(S={},A(S,-1,[new E(0,0),new E(1,0),new E(-2,0),new E(1,-2),new E(-2,1)]),A(S,1,[new E(0,0),new E(2,0),new E(-1,0),new E(2,1),new E(-1,-2)]),S),(O={},A(O,-1,[new E(0,0),new E(-2,0),new E(1,0),new E(-2,-1),new E(1,2)]),A(O,1,[new E(0,0),new E(1,0),new E(-2,0),new E(1,-2),new E(-2,1)]),O)]),H=Object.freeze([(k={},A(k,-1,[new E(0,0)]),A(k,1,[new E(0,0)]),k),(P={},A(P,-1,[new E(0,0)]),A(P,1,[new E(0,0)]),P),(R={},A(R,-1,[new E(0,0)]),A(R,1,[new E(0,0)]),R),(_={},A(_,-1,[new E(0,0)]),A(_,1,[new E(0,0)]),_)]),W=Object.freeze((A(T={},C.None,{Rotations:[[]],WallKick:H}),A(T,C.I,{Rotations:[[new E(0,2),new E(1,2),new E(2,2),new E(3,2)],[new E(2,0),new E(2,1),new E(2,2),new E(2,3)],[new E(0,1),new E(1,1),new E(2,1),new E(3,1)],[new E(1,0),new E(1,1),new E(1,2),new E(1,3)]],WallKick:D}),A(T,C.J,{Rotations:[[new E(0,2),new E(0,1),new E(1,1),new E(2,1)],[new E(2,2),new E(1,2),new E(1,1),new E(1,0)],[new E(0,1),new E(1,1),new E(2,1),new E(2,0)],[new E(0,0),new E(1,0),new E(1,1),new E(1,2)]],WallKick:B}),A(T,C.L,{Rotations:[[new E(0,1),new E(1,1),new E(2,1),new E(2,2)],[new E(1,2),new E(1,1),new E(1,0),new E(2,0)],[new E(0,0),new E(0,1),new E(1,1),new E(2,1)],[new E(0,2),new E(1,2),new E(1,1),new E(1,0)]],WallKick:B}),A(T,C.O,{Rotations:[[new E(0,0),new E(0,1),new E(1,0),new E(1,1)]],WallKick:H}),A(T,C.S,{Rotations:[[new E(0,1),new E(1,1),new E(1,2),new E(2,2)],[new E(1,2),new E(1,1),new E(2,1),new E(2,0)],[new E(0,0),new E(1,0),new E(1,1),new E(2,1)],[new E(0,2),new E(0,1),new E(1,1),new E(1,0)]],WallKick:B}),A(T,C.T,{Rotations:[[new E(0,1),new E(1,1),new E(1,2),new E(2,1)],[new E(1,2),new E(1,1),new E(2,1),new E(1,0)],[new E(0,1),new E(1,0),new E(1,1),new E(2,1)],[new E(1,2),new E(0,1),new E(1,1),new E(1,0)]],WallKick:B}),A(T,C.Z,{Rotations:[[new E(0,2),new E(1,1),new E(1,2),new E(2,1)],[new E(2,2),new E(1,1),new E(2,1),new E(1,0)],[new E(0,1),new E(1,0),new E(1,1),new E(2,0)],[new E(1,2),new E(0,1),new E(1,1),new E(0,0)]],WallKick:B}),T));const I=W;Array.prototype.max||Object.defineProperty(Array.prototype,"max",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var t=this.length,e=this[0];t--;)this[t]>e&&(e=this[t]);return e}}),Array.prototype.maxBy||Object.defineProperty(Array.prototype,"maxBy",{enumerable:!1,writable:!1,configurable:!1,value:function(t){for(var e=this.length,n=t(this[0]),r=this[0];e--;){var o=t(this[e]);o>n&&(n=o,r=this[e])}return r}}),Array.prototype.min||Object.defineProperty(Array.prototype,"min",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var t=this.length,e=this[0];t--;)this[t]<e&&(e=this[t]);return e}}),Array.prototype.minBy||Object.defineProperty(Array.prototype,"minBy",{enumerable:!1,writable:!1,configurable:!1,value:function(t){for(var e=this.length,n=t(this[0]),r=this[0];e--;){var o=t(this[e]);o<n&&(n=o,r=this[e])}return r}});const L=function(t){return function(){var e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}};function F(t){return function(t){if(Array.isArray(t))return M(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,K(t,e,"get"))}function X(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,K(t,e,"set"),n),n}function K(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var z=new WeakMap,U=new WeakMap,V=new WeakMap,Q=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(N(this,t),z.set(this,{writable:!0,value:void 0}),U.set(this,{writable:!0,value:void 0}),V.set(this,{writable:!0,value:void 0}),n instanceof Array)return X(this,U,null),X(this,V,new Array(r+n.length).fill(C.None)),(e=Y(this,V)).splice.apply(e,[r,n.length].concat(F(n))),void X(this,z,null);X(this,U,void 0===n?Math.floor(Math.random()*Math.pow(2,32)):n),X(this,z,L(Y(this,U))),X(this,V,[])}var e,n,r;return e=t,(n=[{key:"Seed",get:function(){return Y(this,U)}},{key:"generate",value:function(){if(null!==Y(this,U)&&null!==Y(this,z))for(var t=[C.I,C.J,C.L,C.O,C.S,C.T,C.Z];t.length>0;){var e=Y(this,z).call(this)%t.length;Y(this,V).push(t.splice(e,1)[0])}else Y(this,V).push(C.None)}},{key:"Get",value:function(t){for(;Y(this,V).length<=t;)this.generate();return Y(this,V)[t]}},{key:"GetRange",value:function(t,e){for(;Y(this,V).length<=t+e;)this.generate();return Y(this,V).slice(t,t+e)}}])&&G(e.prototype,n),r&&G(e,r),t}();function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Z=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.R0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:NaN,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:s.None;q(this,t),this.Type=e,this.Rotation=n,r?this.Position=r:(this.Position=new E(4,21),this.Bottom=21,this.Left=Math.floor(5-this.Width/2)),this.LastActionTick=o,this.ActionCount=i,this.DropTick=a,this.LastAction=u}var e,n,r;return e=t,r=[{key:"Spawn",value:function(e,n){return new t(e,void 0,void 0,n,0,n)}}],(n=[{key:"Clone",value:function(){return new t(this.Type,this.Rotation,this.Position.Clone(),this.LastActionTick,this.ActionCount,this.DropTick,this.LastAction)}},{key:"InternalPoints",get:function(){return W[this.Type].Rotations[this.Rotation]}},{key:"Points",get:function(){var t=this;return W[this.Type].Rotations[this.Rotation].map((function(e){return e.Add(t.Position)}))}},{key:"InternalLeft",get:function(){return this.InternalPoints.map((function(t){return t.X})).min()}},{key:"InternalRight",get:function(){return this.InternalPoints.map((function(t){return t.X})).max()}},{key:"InternalTop",get:function(){return this.InternalPoints.map((function(t){return t.Y})).max()}},{key:"InternalBottom",get:function(){return this.InternalPoints.map((function(t){return t.Y})).min()}},{key:"Left",get:function(){return this.Position.X+this.InternalLeft},set:function(t){this.Position.X=t-this.InternalLeft}},{key:"Right",get:function(){return this.Position.X+this.InternalRight},set:function(t){this.Position.X=t-this.InternalRight}},{key:"Top",get:function(){return this.Position.Y+this.InternalTop},set:function(t){this.Position.Y=t-this.InternalTop}},{key:"Bottom",get:function(){return this.Position.Y+this.InternalBottom},set:function(t){this.Position.Y=t-this.InternalBottom}},{key:"Width",get:function(){return this.InternalRight-this.InternalLeft}},{key:"Height",get:function(){return this.InternalTop-this.InternalBottom}},{key:"Rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.CW;this.Rotation+=t,this.Rotation>3&&(this.Rotation=0),this.Rotation<0&&(this.Rotation=3)}}])&&J(e.prototype,n),r&&J(e,r),t}();function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const tt=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),$(this,"listeners",[]),$(this,"listenersOncer",[]),$(this,"on",(function(t){return e.listeners.push(t),{dispose:function(){return e.off(t)}}})),$(this,"once",(function(t){e.listenersOncer.push(t)})),$(this,"off",(function(t){var n=e.listeners.indexOf(t);n>-1&&e.listeners.splice(n,1)})),$(this,"emit",(function(t){if(e.listeners.forEach((function(e){return e(t)})),e.listenersOncer.length>0){var n=e.listenersOncer;e.listenersOncer=[],n.forEach((function(e){return e(t)}))}})),$(this,"pipe",(function(t){return e.on((function(e){return t.emit(e)}))}))};function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var nt;!function(t){t[t.LineClear=0]="LineClear",t[t.TSpin=1]="TSpin",t[t.TSpinMini=2]="TSpinMini",t[t.PerfectClear=3]="PerfectClear"}(nt||(nt={}));const rt=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.LinesCleared=e,this.Type=n,this.Combo=r,this.BackToBack=o}var e,n,r;return e=t,(n=[{key:"Clone",value:function(){return new t(this.LinesCleared,this.Type,this.Combo,this.BackToBack)}}])&&et(e.prototype,n),r&&et(e,r),t}();function ot(t){return t.Type===nt.LineClear&&t.LinesCleared>=4||t.Type===nt.TSpin||t.Type===nt.TSpinMini}function it(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ct(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ft(t,e,"get"))}function lt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ft(t,e,"set"),n),n}function ft(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function st(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var pt=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C.None,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;st(this,t),this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(C.None)})),o&&o.forEach((function(t,n){return t.forEach((function(t,r){return e.Grid[n][r]=t}))})),this.Falling=i?i.Clone():null,this.Hold=a,this.BlockHold=c,this.TicksElapsed=u,this.PieceQueue=n,this.PieceIndex=r,this.Combo=l,this.LastAchievement=f},yt=new WeakMap,ht=new WeakMap;const vt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C.None,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(st(this,t),yt.set(this,{writable:!0,value:void 0}),ht.set(this,{writable:!0,value:void 0}),e instanceof pt){var l=e;this.Grid=l.Grid,this.Falling=l.Falling,this.Hold=l.Hold,this.BlockHold=l.BlockHold,this.TicksElapsed=l.TicksElapsed,lt(this,yt,new Q(l.PieceQueue,l.PieceIndex)),this.PieceIndex=l.PieceIndex,this.Combo=l.Combo,this.LastAchievement=l.LastAchievement}else this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(C.None)})),this.Falling=r,this.Hold=o,this.BlockHold=a,this.TicksElapsed=i,lt(this,yt,new Q(e)),this.PieceIndex=n,this.Combo=u,this.LastAchievement=c;lt(this,ht,new tt)}var e,n,r;return e=t,(n=[{key:"GetVisibleState",value:function(){return new pt(this.PieceQueue,this.PieceIndex,this.Grid,this.Falling,this.Hold,this.TicksElapsed,this.BlockHold,this.Combo)}},{key:"Achievement",get:function(){return ct(this,ht)}},{key:"GridWidth",get:function(){return 10}},{key:"GridHeight",get:function(){return 40}},{key:"PlayfieldHeight",get:function(){return 20}},{key:"PieceQueue",get:function(){return ct(this,yt).GetRange(this.PieceIndex,6)}},{key:"Get",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t instanceof E)e=t.X,n=t.Y;else{if(void 0===r)return null;e=t,n=r}return e<0||n<0||e>=10||n>=40?null:this.Grid[n][e]}},{key:"IsPieceValid",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?!e.Points.some((function(e){var n;return(null!==(n=t.Get(e))&&void 0!==n?n:C.I)!==C.None})):!this.Falling||!this.Falling.Points.some((function(e){var n;return(null!==(n=t.Get(e))&&void 0!==n?n:C.I)!==C.None}))}},{key:"DequeuePiece",value:function(){return null===this.Falling&&(this.Falling=Z.Spawn(ct(this,yt).Get(this.PieceIndex++),this.TicksElapsed),this.BlockHold=!1,!0)}},{key:"HoldPiece",value:function(){if(null===this.Falling)return!1;if(this.BlockHold)return!1;var t=this.Hold;return this.Hold=this.Falling.Type,t===C.None&&(t=ct(this,yt).Get(this.PieceIndex++)),this.Falling=Z.Spawn(t,this.TicksElapsed),this.BlockHold=!0,this.Falling.LastAction=s.Hold,!0}},{key:"ClearLines",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=0,o=null;if((null==n?void 0:n.Type)===C.T&&p(n.LastAction)){var i=[[0,0],[2,0],[0,2],[2,2]].reduce((function(t,r){var o=it(r,2),i=o[0],a=o[1];return e.Get(n.Position.X+i,n.Position.Y+a)!==C.None?t+1:t}),0);if(console.log("Corners: ",i),i>=3){var a=[[1,0],[0,1],[1,2],[2,1]].some((function(t){var r=it(t,2),o=r[0],i=r[1];return!n.InternalPoints.find((function(t){return t.X===o&&t.Y===i}))&&e.Get(n.Position.X+o,n.Position.Y+i)!==C.None}));o=a?nt.TSpinMini:nt.TSpin}}for(var u=0;u<this.GridHeight;u++)this.Grid[u].some((function(t){return t===C.None}))||(this.Grid.splice(u,1),this.Grid.push(new Array(this.GridWidth).fill(C.None)),r++,u--);if(0!==r||(this.Combo=0,null!==o)){var c=new rt(r,null!==(t=o)&&void 0!==t?t:nt.LineClear,this.Combo,!!this.LastAchievement&&ot(this.LastAchievement));r>0&&this.Combo++,this.Grid.some((function(t){return t.some((function(t){return t!==C.None}))}))||(c.Type=nt.PerfectClear),c.BackToBack=ot(c)&&c.BackToBack;var l=c.Clone();ct(this,ht).emit(c),this.LastAchievement=l}}},{key:"LockPiece",value:function(){var t=this;return null!==this.Falling&&!!this.IsPieceValid()&&(this.Falling.Points.forEach((function(e){var n,r;return t.Grid[e.Y][e.X]=null!==(n=null===(r=t.Falling)||void 0===r?void 0:r.Type)&&void 0!==n?n:C.None})),this.ClearLines(this.Falling),this.Falling=null,!0)}},{key:"RotatePiece",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.CW;if(null===this.Falling)return!1;var n=W[this.Falling.Type].WallKick[this.Falling.Rotation][e].find((function(n){var r,o=null===(r=t.Falling)||void 0===r?void 0:r.Clone();return!!o&&(o.Rotate(e),o.Position=o.Position.Add(n),t.IsPieceValid(o))}));return!!n&&(this.Falling.Rotate(e),this.Falling.Position=this.Falling.Position.Add(n),this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=e===x.CW?s.RotateCW:s.RotateCCW,!0)}},{key:"ShiftPiece",value:function(t){if(null===this.Falling)return!1;var e=this.Falling.Clone();return e.Position.X+=t,!!this.IsPieceValid(e)&&(this.Falling=e,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=t>0?s.ShiftRight:s.ShiftLeft,!0)}},{key:"CanPieceDrop",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)t=e.Clone();else{if(!this.Falling)return!1;t=this.Falling.Clone()}return t.Position.Y--,this.IsPieceValid(t)}},{key:"SoftDropPiece",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null!==this.Falling&&!!this.CanPieceDrop()&&(this.Falling.Position.Y--,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount=0,t?this.Falling.DropTick=this.TicksElapsed:this.Falling.LastAction=s.SoftDrop,!0)}},{key:"HardDropPiece",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)t=e;else{if(!this.Falling)return!1;t=this.Falling}for(var n=t.Position.Y;this.IsPieceValid(t);)t.Position.Y--;return t.Position.Y++,n!==t.Position.Y&&(t.LastAction=s.HardDrop),t!==this.Falling||this.LockPiece()}},{key:"Tick",value:function(){null===this.Falling?this.DequeuePiece():(this.TicksElapsed-this.Falling.DropTick>=15&&this.SoftDropPiece(!0),this.TicksElapsed-this.Falling.LastActionTick>=60&&!this.CanPieceDrop()&&this.LockPiece()),this.TicksElapsed++}}])&&ut(e.prototype,n),r&&ut(e,r),t}();var bt=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pt(t);if(e){var o=Pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ot(this,n)}}function Ot(t,e){return!e||"object"!==wt(e)&&"function"!=typeof e?kt(t):e}function kt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pt(t){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Tt(t,e,"get"))}function _t(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Tt(t,e,"set"),n),n}function Tt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ct=new WeakMap,jt=new WeakMap,xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}(i,t);var e,n,r,o=St(i);function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return dt(this,i),e=o.call(this),Ct.set(kt(e),{writable:!0,value:void 0}),jt.set(kt(e),{writable:!0,value:void 0}),_t(kt(e),Ct,null),e.Player=t,e.State=n instanceof vt?n:new vt(n),_t(kt(e),jt,new tt),e}return e=i,(n=[{key:"Input",get:function(){return Rt(this,jt)}},{key:"ClockRunning",get:function(){return null!==Rt(this,Ct)}},{key:"StartClock",value:function(){_t(this,Ct,window.setInterval(this.Tick.bind(this),1e3/60))}},{key:"StopClock",value:function(){null!==Rt(this,Ct)&&window.clearInterval(Rt(this,Ct))}},{key:"Tick",value:function(){this.State.Tick();var t=this.Player.Tick(this.State.GetVisibleState()),e=!1;switch(t){case s.None:break;case s.HardDrop:e=this.State.HardDropPiece();break;case s.Hold:e=this.State.HoldPiece();break;case s.RotateCW:e=this.State.RotatePiece(x.CW);break;case s.RotateCCW:e=this.State.RotatePiece(x.CCW);break;case s.ShiftLeft:e=this.State.ShiftPiece(-1);break;case s.ShiftRight:e=this.State.ShiftPiece(1);break;case s.SoftDrop:e=this.State.SoftDropPiece(!1)}t!==s.None&&Rt(this,jt).emit(new y(t,e))}}])&&gt(e.prototype,n),r&&gt(e,r),i}(bt),Et=n(210),At=n.n(Et);function Bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function It(t,e,n){return(It="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gt(t);if(e){var o=Gt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mt(this,n)}}function Mt(t,e){return!e||"object"!==Dt(e)&&"function"!=typeof e?Nt(t):e}function Nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Kt(t,e,"get"))}function Xt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Kt(t,e,"set"),n),n}function Kt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function zt(t){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vt(t,e){return(Vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jt(t);if(e){var o=Jt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qt(this,n)}}function qt(t,e){return!e||"object"!==zt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jt(t){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zt,$t,te,ee,ne,re=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vt(t,e)}(n,t);var e=Qt(n);function n(){return Ut(this,n),e.apply(this,arguments)}return n}((Zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"Tick",value:function(t){return s.None}}])&&Bt(e.prototype,n),r&&Bt(e,r),t}(),$t=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(i,t);var e,n,r,o=Ft(i);function i(){var t;Ht(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=o.call.apply(o,[this].concat(n)),$t.set(Nt(t),{writable:!0,value:void 0}),Xt(Nt(t),$t,[]),t}return e=i,(n=[{key:"Tick",value:function(t){var e;return"Update"in Zt?It(Gt(i.prototype),"Tick",this).call(this,t):null!==(e=Yt(this,$t).shift())&&void 0!==e?e:s.None}},{key:"Update",value:function(t,e){var n;return e&&null!==(n=Yt(this,$t).shift())&&void 0!==n?n:s.None}},{key:"Enqueue",value:function(t){Yt(this,$t).push(t)}}])&&Wt(e.prototype,n),r&&Wt(e,r),i}(Zt)));function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ue(t,e){return(ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fe(t);if(e){var o=fe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return le(this,n)}}function le(t,e){return!e||"object"!==oe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ve(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=we(t);if(e){var o=we(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return be(this,n)}}function be(t,e){return!e||"object"!==se(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function we(t){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Se(t,e){return(Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pe(t);if(e){var o=Pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ke(this,n)}}function ke(t,e){return!e||"object"!==de(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pe(t){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Re(t,e){switch(e){case C.None:return t.color(50);case C.I:return t.color(77,208,225);case C.J:return t.color(33,150,243);case C.L:return t.color(255,152,0);case C.O:return t.color(253,216,53);case C.S:return t.color(76,175,80);case C.T:return t.color(224,64,251);case C.Z:return t.color(229,115,115)}}function _e(t,e,n,r,o,i){var a=Re(t,null!=e?e:C.None);a.setAlpha(i),t.fill(a),r.forEach((function(e){t.rect(n.X+e.X*o,n.Y+e.Y*o,o,o)}))}function Te(t,e,n,r,o,i){t.push(),t.scale(1,-1),t.text(e,n,-r,o,void 0===i?i:-i),t.pop()}function Ce(t){return void 0!==Object.keys(ee).find((function(e){return e===t}))}function je(t){return void 0!==Object.keys(ne).find((function(e){return e===t}))}function xe(t){if(t instanceof y)switch(t.Input){case s.None:return null;case s.HardDrop:return te.Lock;case s.RotateCCW:case s.RotateCW:return t.Success?te.RotateSuccess:te.RotateFail;case s.ShiftLeft:case s.ShiftRight:return t.Success?te.ShiftSuccess:te.ShiftFail;case s.SoftDrop:return te.SoftDrop;case s.Hold:return t.Success?te.Hold:null}if(t instanceof rt){var e=[];if(t.Combo>0){var n="Combo".concat(Math.min(20,t.Combo));Ce(n)&&e.push(ee[n])}if(t.Type===nt.PerfectClear)return e.push(ee.PerfectClear),e;var r="";return t.BackToBack&&(r+="B2b"),t.Type===nt.TSpinMini?r+="TSpinMini":(t.Type===nt.TSpin&&(r+="TSpin"),1===t.LinesCleared?r+="Single":2===t.LinesCleared?r+="Double":3===t.LinesCleared?r+="Triple":4===t.LinesCleared&&(r+="Tetris")),Ce(r)&&e.push(ee[r]),e}return null}function Ee(t){if(t.Type===nt.PerfectClear)return ne.PerfectClear;var e="";if(t.BackToBack&&(e+="B2b"),t.Type===nt.TSpinMini?e+="TSpinMini":(t.Type===nt.TSpin&&(e+="TSpin"),1===t.LinesCleared?e+="Single":2===t.LinesCleared?e+="Double":3===t.LinesCleared?e+="Triple":4===t.LinesCleared&&(e+="Tetris")),je(e)&&"Single"!==e)return ne[e];if(t.Combo>0){var n="Combo".concat(Math.min(5,t.Combo));if(je(n))return ne[n]}return null}function Ae(t){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function He(t,e,n){return(He="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Me(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function We(t,e){return(We=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Me(t);if(e){var o=Me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Le(this,n)}}function Le(t,e){return!e||"object"!==Ae(e)&&"function"!=typeof e?Fe(t):e}function Fe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ne(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ye(t,e,"get"))}function Ge(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ye(t,e,"set"),n),n}function Ye(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Xe(t){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ue(t,e,n){return(Ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ze(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ve(t,e){return(Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ze(t);if(e){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(t,e){return!e||"object"!==Xe(e)&&"function"!=typeof e?Je(t):e}function Je(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ze(t){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $e(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,en(t,e,"get"))}function tn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,en(t,e,"set"),n),n}function en(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function nn(t){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function on(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function an(t,e,n){return(an="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function un(t,e){return(un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=sn(t);if(e){var o=sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ln(this,n)}}function ln(t,e){return!e||"object"!==nn(e)&&"function"!=typeof e?fn(t):e}function fn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sn(t){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,hn(t,e,"get"))}function yn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,hn(t,e,"set"),n),n}function hn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dn(t,e,n){return(dn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function gn(t,e){return(gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kn(t);if(e){var o=kn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sn(this,n)}}function Sn(t,e){return!e||"object"!==vn(e)&&"function"!=typeof e?On(t):e}function On(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kn(t){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,_n(t,e,"get"))}function Rn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,_n(t,e,"set"),n),n}function _n(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xn(t,e,n){return(xn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function En(t,e){return(En=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function An(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dn(t);if(e){var o=Dn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bn(this,n)}}function Bn(t,e){return!e||"object"!==Tn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dn(t){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hn(t){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function In(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nn(t);if(e){var o=Nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mn(this,n)}}function Mn(t,e){return!e||"object"!==Hn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nn(t){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.Lock="/assets/sfx/sfx_lockdown.wav",t.RotateSuccess="/assets/sfx/sfx_rotate.wav",t.RotateFail="/assets/sfx/sfx_rotatefail.wav",t.ShiftSuccess="/assets/sfx/sfx_move.wav",t.ShiftFail="/assets/sfx/sfx_movefail.wav",t.SoftDrop="/assets/sfx/sfx_softdrop.wav",t.Hold="/assets/sfx/sfx_hold.wav"}(te||(te={})),function(t){t.Single="/assets/sfx/sfx_single.wav",t.Double="/assets/sfx/sfx_double.wav",t.Triple="/assets/sfx/sfx_triple.wav",t.Tetris="/assets/sfx/sfx_tetris.wav",t.TSpin="/assets/sfx/sfx_tspin_zero.wav",t.TSpinMini="/assets/sfx/sfx_tspin_mini.wav",t.TSpinSingle="/assets/sfx/sfx_tspin_single.wav",t.TSpinDouble="/assets/sfx/sfx_tspin_double.wav",t.TSpinTriple="/assets/sfx/sfx_tspin_triple.wav",t.B2bTSpinMini="/assets/sfx/sfx_b2b_tspin_mini.wav",t.B2bTSpinSingle="/assets/sfx/sfx_b2b_tspin_single.wav",t.B2bTSpinDouble="/assets/sfx/sfx_b2b_tspin_double.wav",t.B2bTSpinTriple="/assets/sfx/sfx_b2b_tspin_triple.wav",t.B2bTetris="/assets/sfx/sfx_b2b_tetris.wav",t.PerfectClear="/assets/sfx/sfx_perfectclear.wav",t.Combo1="/assets/sfx/sfx_combo1.wav",t.Combo2="/assets/sfx/sfx_combo2.wav",t.Combo3="/assets/sfx/sfx_combo3.wav",t.Combo4="/assets/sfx/sfx_combo4.wav",t.Combo5="/assets/sfx/sfx_combo5.wav",t.Combo6="/assets/sfx/sfx_combo6.wav",t.Combo7="/assets/sfx/sfx_combo7.wav",t.Combo8="/assets/sfx/sfx_combo8.wav",t.Combo9="/assets/sfx/sfx_combo9.wav",t.Combo10="/assets/sfx/sfx_combo10.wav",t.Combo11="/assets/sfx/sfx_combo11.wav",t.Combo12="/assets/sfx/sfx_combo12.wav",t.Combo13="/assets/sfx/sfx_combo13.wav",t.Combo14="/assets/sfx/sfx_combo14.wav",t.Combo15="/assets/sfx/sfx_combo15.wav",t.Combo16="/assets/sfx/sfx_combo16.wav",t.Combo17="/assets/sfx/sfx_combo17.wav",t.Combo18="/assets/sfx/sfx_combo18.wav",t.Combo19="/assets/sfx/sfx_combo19.wav",t.Combo20="/assets/sfx/sfx_combo20.wav"}(ee||(ee={})),function(t){t.Single="/assets/voice/voice_single.wav",t.Double="/assets/voice/voice_double.wav",t.Triple="/assets/voice/voice_triple.wav",t.Tetris="/assets/voice/voice_tetris.wav",t.TSpin="/assets/voice/voice_tspin.wav",t.TSpinMini="/assets/voice/voice_tspinmini.wav",t.TSpinSingle="/assets/voice/voice_tspinsingle.wav",t.TSpinDouble="/assets/voice/voice_tspindouble.wav",t.TSpinTriple="/assets/voice/voice_tspintriple.wav",t.B2bTSpinMini="/assets/voice/voice_b2btspinmini.wav",t.B2bTSpinSingle="/assets/voice/voice_b2btspinsingle.wav",t.B2bTSpinDouble="/assets/voice/voice_b2btspindouble.wav",t.B2bTSpinTriple="/assets/voice/voice_b2btspintriple.wav",t.B2bTetris="/assets/voice/voice_b2btetris.wav",t.PerfectClear="/assets/voice/voice_perfectclear.wav",t.Combo1="/assets/voice/voice_combo01.wav",t.Combo2="/assets/voice/voice_combo02.wav",t.Combo3="/assets/voice/voice_combo03.wav",t.Combo4="/assets/voice/voice_combo04.wav",t.Combo5="/assets/voice/voice_combo05.wav"}(ne||(ne={}));var Gn=n(766);function Yn(t){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Kn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vn(t,e,n){return(Vn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$n(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Qn(t,e){return(Qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$n(t);if(e){var o=$n(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jn(this,n)}}function Jn(t,e){return!e||"object"!==Yn(e)&&"function"!=typeof e?Zn(t):e}function Zn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,nr(t,e,"get"))}function er(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,nr(t,e,"set"),n),n}function nr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ir(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ar(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cr(t,e,n){return(cr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function lr(t,e){return(lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yr(t);if(e){var o=yr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sr(this,n)}}function sr(t,e){return!e||"object"!==rr(e)&&"function"!=typeof e?pr(t):e}function pr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yr(t){return(yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,br(t,e,"get"))}function vr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,br(t,e,"set"),n),n}function br(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function wr(t){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return gr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Or(t,e,n){return(Or="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function kr(t,e){return(kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tr(t);if(e){var o=Tr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}function Rr(t,e){return!e||"object"!==wr(e)&&"function"!=typeof e?_r(t):e}function _r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tr(t){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,xr(t,e,"get"))}function jr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,xr(t,e,"set"),n),n}function xr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ar(t){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Br(t,e){return(Br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wr(t);if(e){var o=Wr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr(this,n)}}function Hr(t,e){return!e||"object"!==Ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wr(t){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ir=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Br(t,e)}(n,t);var e=Dr(n);function n(t,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(i=r&&o?e.call(this,r,o):e.call(this)).ConfigureGameState(t.State),i.ConfigurePlayer(t.Player),i.ConfigureGame(t),i.ConfigureBlockSize(15),i.ConfigurePlayerSoundPlayable(),i.ConfigureAchievementSoundPlayable(),i.ConfigureAchievementVoicePlayable(),i.ConfigurePlayfieldDrawable(new E(120,0),new E(1,1)),i.ConfigureHoldPieceDrawable(new E(10,200),new E(1,1)),i.ConfigurePieceQueueDrawable(new E(400,0),new E(.7,.7)),i.ConfigureFramerateDrawable(new E(0,i.height-10),new E(1,1)),Hr(i)}return n}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gn(t,e)}(u,t);var r,o,i,a=mn(u);function u(){var t;bn(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(On(t),{writable:!0,value:void 0}),n.set(On(t),{writable:!0,value:void 0}),Rn(On(t),e,new E(0,0)),Rn(On(t),n,new E(1,1)),t}return r=u,(o=[{key:"ConfigureFramerateDrawable",value:function(t,r){Rn(this,e,t),Rn(this,n,r)}},{key:"p5Draw",value:function(t){dn(kn(u.prototype),"p5Draw",this).call(this,t),this.SetTransform(t,Pn(this,n).X,Pn(this,n).Y,Pn(this,e).X,Pn(this,e).Y),t.noStroke(),t.fill(0),Te(t,"FPS: ".concat(t.frameRate().toFixed(2)),0,0)}}])&&wn(r.prototype,o),i&&wn(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&un(t,e)}(u,t);var r,o,i,a=cn(u);function u(){var t;rn(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(fn(t),{writable:!0,value:void 0}),n.set(fn(t),{writable:!0,value:void 0}),yn(fn(t),e,new E(0,0)),yn(fn(t),n,new E(1,1)),t}return r=u,(o=[{key:"ConfigurePieceQueueDrawable",value:function(t,r){yn(this,e,t),yn(this,n,r)}},{key:"p5Draw",value:function(t){if(an(sn(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,pn(this,n).X,pn(this,n).Y,pn(this,e).X,pn(this,e).Y);for(var r=this.State,o=this.BlockSize,i=r.PieceQueue.length,a=0;a<i;a++){var c=I[r.PieceQueue[a]].Rotations[0].slice();_e(t,r.PieceQueue[a],new E(0,this.height-(a+1)*o*4),c,o,255)}}}}])&&on(r.prototype,o),i&&on(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}(u,t);var r,o,i,a=Qe(u);function u(){var t;Ke(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Je(t),{writable:!0,value:void 0}),n.set(Je(t),{writable:!0,value:void 0}),tn(Je(t),e,new E(0,0)),tn(Je(t),n,new E(1,1)),t}return r=u,(o=[{key:"ConfigureHoldPieceDrawable",value:function(t,r){tn(this,e,t),tn(this,n,r)}},{key:"p5Draw",value:function(t){if(Ue(Ze(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,$e(this,n).X,$e(this,n).Y,$e(this,e).X,$e(this,e).Y);var r=this.State,o=this.BlockSize;if(t.fill(50),t.rect(0,0,5*o,6*o),t.noStroke(),t.fill(255),t.textAlign(t.CENTER),Te(t,"HOLD",2.5*o,5*o),t.textAlign(t.LEFT),t.stroke(0),r.Hold){var i=I[r.Hold].Rotations[0].slice();_e(t,r.Hold,new E(o/2,o/2),i,o,255)}}}}])&&ze(r.prototype,o),i&&ze(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&We(t,e)}(u,t);var r,o,i,a=Ie(u);function u(){var t;Be(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Fe(t),{writable:!0,value:void 0}),n.set(Fe(t),{writable:!0,value:void 0}),Ge(Fe(t),e,new E(0,0)),Ge(Fe(t),n,new E(1,1)),t}return r=u,(o=[{key:"ConfigurePlayfieldDrawable",value:function(t,r){Ge(this,e,t),Ge(this,n,r)}},{key:"p5Draw",value:function(t){if(He(Me(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,Ne(this,n).X,Ne(this,n).Y,Ne(this,e).X,Ne(this,e).Y);var r=this.State,o=this.BlockSize;if(r){t.stroke(0);for(var i=0;i<=r.GridHeight;i++)t.line(0,i*o,r.GridWidth*o,i*o);for(var a=0;a<=r.GridWidth;a++)t.line(a*o,0,a*o,r.GridHeight*o);for(var c=0;c<r.GridHeight;c++)for(var l=0;l<r.GridWidth;l++){var f;t.fill(Re(t,null!==(f=r.Get(l,c))&&void 0!==f?f:C.None)),t.rect(l*o,c*o,o,o)}if(r.Falling){var s,p,y=r.Falling.Points;_e(t,null===(s=r.Falling)||void 0===s?void 0:s.Type,new E(0,0),y,o,255);var h=r.Falling.Clone();r.HardDropPiece(h);var v=h.Points;_e(t,null===(p=r.Falling)||void 0===p?void 0:p.Type,new E(0,0),v,o,100)}}}}}])&&De(r.prototype,o),i&&De(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lr(t,e)}(u,t);var r,o,i,a=fr(u);function u(){var t;ar(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(pr(t),{writable:!0,value:void 0}),n.set(pr(t),{writable:!0,value:void 0}),vr(pr(t),e,[]),vr(pr(t),n,new Map),t}return r=u,(o=[{key:"ConfigureAchievementSoundPlayable",value:function(){var t=this;null!==this.State?this.State.Achievement.on((function(n){return hr(t,e).push(n)})):console.error("ConfigureAchievementSoundPlayable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var r=this;cr(yr(u.prototype),"p5Setup",this).call(this,t,e),Object.entries(ee).forEach((function(t){var e=or(t,2)[1];return hr(r,n).set(e,new Gn.Howl({src:[e]}))}))}},{key:"p5Draw",value:function(t){var r=this;for(cr(yr(u.prototype),"p5Draw",this).call(this,t);hr(this,e).length>0;){var o=hr(this,e).shift();if(console.log(o),!o)break;var i=xe(o);i&&(console.log(i),i.forEach((function(t){var e;return null===(e=hr(r,n).get(t))||void 0===e?void 0:e.play()})))}}}])&&ur(r.prototype,o),i&&ur(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kr(t,e)}(u,t);var r,o,i,a=Pr(u);function u(){var t;mr(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(_r(t),{writable:!0,value:void 0}),n.set(_r(t),{writable:!0,value:void 0}),jr(_r(t),e,[]),jr(_r(t),n,new Map),t}return r=u,(o=[{key:"ConfigureAchievementVoicePlayable",value:function(){var t=this;null!==this.State?this.State.Achievement.on((function(n){return Cr(t,e).push(n)})):console.error("ConfigureAchievementVoicePlayable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var r=this;Or(Tr(u.prototype),"p5Setup",this).call(this,t,e),Object.entries(ne).forEach((function(t){var e=dr(t,2)[1];return Cr(r,n).set(e,new Gn.Howl({src:[e]}))}))}},{key:"p5Draw",value:function(t){for(Or(Tr(u.prototype),"p5Draw",this).call(this,t);Cr(this,e).length>0;){var r,o=Cr(this,e).shift();if(!o)break;var i=Ee(o);i&&(null===(r=Cr(this,n).get(i))||void 0===r||r.play())}}}])&&Sr(r.prototype,o),i&&Sr(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qn(t,e)}(u,t);var r,o,i,a=qn(u);function u(){var t;zn(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Zn(t),{writable:!0,value:void 0}),n.set(Zn(t),{writable:!0,value:void 0}),er(Zn(t),e,[]),er(Zn(t),n,new Map),t}return r=u,(o=[{key:"ConfigurePlayerSoundPlayable",value:function(){var t=this;null!==this.Game?this.Game.Input.on((function(n){return tr(t,e).push(n)})):console.error("ConfigurePlayerSoundPlayable called before this.Game is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var r=this;Vn($n(u.prototype),"p5Setup",this).call(this,t,e),Object.entries(te).forEach((function(t){var e=Xn(t,2)[1];return tr(r,n).set(e,new Gn.Howl({src:[e]}))}))}},{key:"p5Draw",value:function(t){for(Vn($n(u.prototype),"p5Draw",this).call(this,t);tr(this,e).length>0;){var r,o=tr(this,e).shift();if(!o)break;var i=xe(o);i&&(null===(r=tr(this,n).get(i))||void 0===r||r.play())}}}])&&Un(r.prototype,o),i&&Un(r,i),u}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(i,t);var e,n,r,o=Fn(i);function i(){var t;Wn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).blockSize=15,t}return e=i,(n=[{key:"BlockSize",get:function(){return this.blockSize}},{key:"ConfigureBlockSize",value:function(t){this.blockSize=t}}])&&In(e.prototype,n),r&&In(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&En(t,e)}(i,t);var e,n,r,o=An(i);function i(){var t;Cn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).keyHold=s.None,t.keyDelay=0,t}return e=i,(n=[{key:"p5Draw",value:function(t){xn(Dn(i.prototype),"p5Draw",this).call(this,t),this.keyHold!==s.None&&this.Player instanceof re&&(this.keyDelay<=0&&(this.Player.Enqueue(this.keyHold),this.keyDelay=10),this.keyDelay--)}},{key:"p5KeyPressed",value:function(t){this.Player instanceof re&&(t.keyCode===t.LEFT_ARROW&&(this.keyHold=s.ShiftLeft),t.keyCode===t.RIGHT_ARROW&&(this.keyHold=s.ShiftRight),t.keyCode===t.UP_ARROW&&(this.keyHold=s.RotateCW),t.keyCode===t.CONTROL&&(this.keyHold=s.RotateCCW),t.keyCode===t.DOWN_ARROW&&(this.keyHold=s.SoftDrop),t.keyCode===t.SHIFT&&(this.keyHold=s.Hold)," "===t.key&&(this.keyHold=s.HardDrop),this.Player.Enqueue(this.keyHold),this.keyDelay=10)}},{key:"p5KeyReleased",value:function(t){if(this.Player instanceof re){var e=s.None;t.keyCode===t.LEFT_ARROW&&(e=s.ShiftLeft),t.keyCode===t.RIGHT_ARROW&&(e=s.ShiftRight),t.keyCode===t.UP_ARROW&&(e=s.RotateCW),t.keyCode===t.CONTROL&&(e=s.RotateCCW),t.keyCode===t.DOWN_ARROW&&(e=s.SoftDrop),t.keyCode===t.SHIFT&&(e=s.Hold)," "===t.key&&(e=s.HardDrop),this.keyHold===e&&(this.keyHold=s.None)}}},{key:"KeyPressedHandler",get:function(){return this.p5KeyPressed.bind(this)}},{key:"KeyReleasedHandler",get:function(){return this.p5KeyReleased.bind(this)}}])&&jn(e.prototype,n),r&&jn(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}(i,t);var e,n,r,o=Oe(i);function i(){var t;ge(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).Game=null,t}return e=i,(n=[{key:"ConfigureGame",value:function(t){this.Game=t}}])&&me(e.prototype,n),r&&me(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&he(t,e)}(i,t);var e,n,r,o=ve(i);function i(){var t;pe(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).Player=null,t}return e=i,(n=[{key:"ConfigurePlayer",value:function(t){this.Player=t}}])&&ye(e.prototype,n),r&&ye(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ue(t,e)}(i,t);var e,n,r,o=ce(i);function i(){var t;ie(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).State=null,t}return e=i,(n=[{key:"ConfigureGameState",value:function(t){this.State=t}}])&&ae(e.prototype,n),r&&ae(e,r),i}(t)}(function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&n?(this.width=e,this.height=n):(this.width=500,this.height=301.5)}var e,n,r;return e=t,(n=[{key:"SetTransform",value:function(t,e,n,r,o){t.resetMatrix(),t.scale(e,-n),t.translate(r,-this.height+o)}},{key:"ResetTransform",value:function(t){this.SetTransform(t,1,1,0,0)}},{key:"p5Setup",value:function(t,e){t.createCanvas(this.width,this.height).parent(e),this.ResetTransform(t)}},{key:"p5Draw",value:function(t){t.background(100)}},{key:"DrawHandler",get:function(){return this.p5Draw.bind(this)}},{key:"SetupHandler",get:function(){return this.p5Setup.bind(this)}}])&&Er(e.prototype,n),r&&Er(e,r),t}()))))))))))))),Lr=new xt(new re),Fr=new Ir(Lr);console.log(Fr),Lr.StartClock();const Mr=function(t){return r.createElement(At(),{setup:Fr.SetupHandler,draw:Fr.DrawHandler,keyPressed:Fr.KeyPressedHandler,keyReleased:Fr.KeyReleasedHandler})};const Nr=function(){return r.createElement(i.UT,null,r.createElement(a.rs,null,r.createElement(a.AW,{exact:!0,path:"/",component:l}),r.createElement(a.AW,{exact:!0,path:"/test",component:Mr}),r.createElement(a.AW,{component:u})))};o.render(r.createElement(Nr,null),document.getElementById("app"))}},t=>{"use strict";var e;e=671,t(t.s=e)}]);