(self.webpackChunktetris_ai=self.webpackChunktetris_ai||[]).push([[826],{997:(e,t,n)=>{"use strict";var i=n(294),r=n(935),o=n(727),l=n(977);const a=function(e){return i.createElement("p",null,"Not found")};const u=function(){return i.createElement("div",{className:"flex flex-col justify-center items-center select-none min-h-screen bg-gradient-to-br from-gray-900  to-blue-700"},i.createElement("h1",{className:"text-6xl text-green-500 border-b-4 pb-4"},"Hello World !"),i.createElement("h2",{className:"text-2xl text-gray-300 mt-10"},"Click"," ",i.createElement(o.rU,{to:"/test",className:"text-green-400 underline"},"here")," ","to play pre-alpha Tetris"))};const c=function(e){return i.createElement(u,null)};var s;!function(e){e[e.None=0]="None",e[e.SoftDrop=1]="SoftDrop",e[e.HardDrop=2]="HardDrop",e[e.Hold=3]="Hold",e[e.ShiftLeft=4]="ShiftLeft",e[e.ShiftRight=5]="ShiftRight",e[e.RotateCW=6]="RotateCW",e[e.RotateCCW=7]="RotateCCW"}(s||(s={}));const f=s;function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y,p,w,d,v,g,b,k,m,P,R,O,S,T,C,E,j=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.X=t,this.Y=n}var t,n,i;return t=e,(n=[{key:"Add",value:function(t){return new e(this.X+t.X,this.Y+t.Y)}},{key:"Subtract",value:function(t){return new e(this.X-t.X,this.Y-t.Y)}},{key:"Clone",value:function(){return new e(this.X,this.Y)}}])&&h(t.prototype,n),i&&h(t,i),e}();function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e[e.None=0]="None",e[e.I=1]="I",e[e.J=2]="J",e[e.L=3]="L",e[e.O=4]="O",e[e.S=5]="S",e[e.T=6]="T",e[e.Z=7]="Z"}(T||(T={})),function(e){e[e.R0=0]="R0",e[e.R90=1]="R90",e[e.R180=2]="R180",e[e.R270=3]="R270"}(C||(C={})),function(e){e[e.CW=1]="CW",e[e.CCW=-1]="CCW"}(E||(E={}));var H=Object.freeze([(y={},A(y,-1,[new j(0,0),new j(1,0),new j(1,1),new j(0,-2),new j(1,-2)]),A(y,1,[new j(0,0),new j(-1,0),new j(-1,1),new j(0,-2),new j(-1,-2)]),y),(p={},A(p,-1,[new j(0,0),new j(1,0),new j(1,-1),new j(0,2),new j(1,2)]),A(p,1,[new j(0,0),new j(1,0),new j(1,-1),new j(0,2),new j(1,2)]),p),(w={},A(w,-1,[new j(0,0),new j(-1,0),new j(-1,1),new j(0,-2),new j(-1,-2)]),A(w,1,[new j(0,0),new j(1,0),new j(1,1),new j(0,-2),new j(1,-2)]),w),(d={},A(d,-1,[new j(0,0),new j(-1,0),new j(-1,-1),new j(0,2),new j(-1,2)]),A(d,1,[new j(0,0),new j(-1,0),new j(-1,-1),new j(0,2),new j(-1,2)]),d)]),W=Object.freeze([(v={},A(v,-1,[new j(0,0),new j(-1,0),new j(2,0),new j(-1,2),new j(2,-1)]),A(v,1,[new j(0,0),new j(-2,0),new j(1,0),new j(-2,-1),new j(1,2)]),v),(g={},A(g,-1,[new j(0,0),new j(2,0),new j(-1,0),new j(2,1),new j(-1,-2)]),A(g,1,[new j(0,0),new j(-1,0),new j(2,0),new j(-1,2),new j(2,-1)]),g),(b={},A(b,-1,[new j(0,0),new j(1,0),new j(-2,0),new j(1,-2),new j(-2,1)]),A(b,1,[new j(0,0),new j(2,0),new j(-1,0),new j(2,1),new j(-1,-2)]),b),(k={},A(k,-1,[new j(0,0),new j(-2,0),new j(1,0),new j(-2,-1),new j(1,2)]),A(k,1,[new j(0,0),new j(1,0),new j(-2,0),new j(1,-2),new j(-2,1)]),k)]),I=Object.freeze([(m={},A(m,-1,[new j(0,0)]),A(m,1,[new j(0,0)]),m),(P={},A(P,-1,[new j(0,0)]),A(P,1,[new j(0,0)]),P),(R={},A(R,-1,[new j(0,0)]),A(R,1,[new j(0,0)]),R),(O={},A(O,-1,[new j(0,0)]),A(O,1,[new j(0,0)]),O)]),F=Object.freeze((A(S={},T.None,{Rotations:[[]],WallKick:I}),A(S,T.I,{Rotations:[[new j(0,2),new j(1,2),new j(2,2),new j(3,2)],[new j(2,0),new j(2,1),new j(2,2),new j(2,3)],[new j(0,1),new j(1,1),new j(2,1),new j(3,1)],[new j(1,0),new j(1,1),new j(1,2),new j(1,3)]],WallKick:W}),A(S,T.J,{Rotations:[[new j(0,2),new j(0,1),new j(1,1),new j(2,1)],[new j(2,2),new j(1,2),new j(1,1),new j(1,0)],[new j(0,1),new j(1,1),new j(2,1),new j(2,0)],[new j(0,0),new j(1,0),new j(1,1),new j(1,2)]],WallKick:H}),A(S,T.L,{Rotations:[[new j(0,1),new j(1,1),new j(2,1),new j(2,2)],[new j(1,2),new j(1,1),new j(1,0),new j(2,0)],[new j(0,0),new j(0,1),new j(1,1),new j(2,1)],[new j(0,2),new j(1,2),new j(1,1),new j(1,0)]],WallKick:H}),A(S,T.O,{Rotations:[[new j(0,0),new j(0,1),new j(1,0),new j(1,1)]],WallKick:I}),A(S,T.S,{Rotations:[[new j(0,1),new j(1,1),new j(1,2),new j(2,2)],[new j(1,2),new j(1,1),new j(2,1),new j(2,0)],[new j(0,0),new j(1,0),new j(1,1),new j(2,1)],[new j(0,2),new j(0,1),new j(1,1),new j(1,0)]],WallKick:H}),A(S,T.T,{Rotations:[[new j(0,1),new j(1,1),new j(1,2),new j(2,1)],[new j(1,2),new j(1,1),new j(2,1),new j(1,0)],[new j(0,1),new j(1,0),new j(1,1),new j(2,1)],[new j(1,2),new j(0,1),new j(1,1),new j(1,0)]],WallKick:H}),A(S,T.Z,{Rotations:[[new j(0,2),new j(1,1),new j(1,2),new j(2,1)],[new j(2,2),new j(1,1),new j(2,1),new j(1,0)],[new j(0,1),new j(1,0),new j(1,1),new j(2,0)],[new j(1,2),new j(0,1),new j(1,1),new j(0,0)]],WallKick:H}),S));Array.prototype.max||Object.defineProperty(Array.prototype,"max",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var e=this.length,t=this[0];e--;)this[e]>t&&(t=this[e]);return t}}),Array.prototype.maxBy||Object.defineProperty(Array.prototype,"maxBy",{enumerable:!1,writable:!1,configurable:!1,value:function(e){for(var t=this.length,n=e(this[0]),i=this[0];t--;){var r=e(this[t]);r>n&&(n=r,i=this[t])}return i}}),Array.prototype.min||Object.defineProperty(Array.prototype,"min",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var e=this.length,t=this[0];e--;)this[e]<t&&(t=this[e]);return t}}),Array.prototype.minBy||Object.defineProperty(Array.prototype,"minBy",{enumerable:!1,writable:!1,configurable:!1,value:function(e){for(var t=this.length,n=e(this[0]),i=this[0];t--;){var r=e(this[t]);r<n&&(n=r,i=this[t])}return i}});const _=function(e){return function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296}};function D(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function G(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Y(e,t,"get"))}function B(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Y(e,t,"set"),n),n}function Y(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var X=new WeakMap,K=new WeakMap,M=new WeakMap,V=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(L(this,e),X.set(this,{writable:!0,value:void 0}),K.set(this,{writable:!0,value:void 0}),M.set(this,{writable:!0,value:void 0}),n instanceof Array)return B(this,K,null),B(this,M,new Array(i+n.length).fill(T.None)),(t=G(this,M)).splice.apply(t,[i,n.length].concat(D(n))),void B(this,X,null);B(this,K,void 0===n?Math.floor(Math.random()*Math.pow(2,32)):n),B(this,X,_(G(this,K))),B(this,M,[])}var t,n,i;return t=e,(n=[{key:"Seed",get:function(){return G(this,K)}},{key:"generate",value:function(){if(null!==G(this,K)&&null!==G(this,X))for(var e=[T.I,T.J,T.L,T.O,T.S,T.T,T.Z];e.length>0;){var t=G(this,X).call(this)%e.length;G(this,M).push(e.splice(t,1)[0])}else G(this,M).push(T.None)}},{key:"Get",value:function(e){for(;G(this,M).length<=e;)this.generate();return G(this,M)[e]}},{key:"GetRange",value:function(e,t){for(;G(this,M).length<=e+t;)this.generate();return G(this,M).slice(e,e+t)}}])&&x(t.prototype,n),i&&x(t,i),e}();function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var q=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.R0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:NaN,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:f.None;z(this,e),this.Type=t,this.Rotation=n,i?this.Position=i:(this.Position=new j(4,21),this.Bottom=21,this.Left=Math.floor(5-this.Width/2)),this.LastActionTick=r,this.ActionCount=o,this.DropTick=l,this.LastAction=a}var t,n,i;return t=e,i=[{key:"Spawn",value:function(t,n){return new e(t,void 0,void 0,n,0,n)}}],(n=[{key:"Clone",value:function(){return new e(this.Type,this.Rotation,this.Position.Clone(),this.LastActionTick,this.ActionCount,this.DropTick,this.LastAction)}},{key:"InternalPoints",get:function(){return F[this.Type].Rotations[this.Rotation]}},{key:"Points",get:function(){var e=this;return F[this.Type].Rotations[this.Rotation].map((function(t){return t.Add(e.Position)}))}},{key:"InternalLeft",get:function(){return this.InternalPoints.map((function(e){return e.X})).min()}},{key:"InternalRight",get:function(){return this.InternalPoints.map((function(e){return e.X})).max()}},{key:"InternalTop",get:function(){return this.InternalPoints.map((function(e){return e.Y})).max()}},{key:"InternalBottom",get:function(){return this.InternalPoints.map((function(e){return e.Y})).min()}},{key:"Left",get:function(){return this.Position.X+this.InternalLeft},set:function(e){this.Position.X=e-this.InternalLeft}},{key:"Right",get:function(){return this.Position.X+this.InternalRight},set:function(e){this.Position.X=e-this.InternalRight}},{key:"Top",get:function(){return this.Position.Y+this.InternalTop},set:function(e){this.Position.Y=e-this.InternalTop}},{key:"Bottom",get:function(){return this.Position.Y+this.InternalBottom},set:function(e){this.Position.Y=e-this.InternalBottom}},{key:"Width",get:function(){return this.InternalRight-this.InternalLeft}},{key:"Height",get:function(){return this.InternalTop-this.InternalBottom}},{key:"Rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.CW;this.Rotation+=e,this.Rotation>3&&(this.Rotation=0),this.Rotation<0&&(this.Rotation=3)}}])&&U(t.prototype,n),i&&U(t,i),e}();function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Z(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,$(e,t,"get"))}function Q(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,$(e,t,"set"),n),n}function $(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var te=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:T.None,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:f.None;ee(this,e),this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(T.None)})),r&&r.forEach((function(e,n){return e.forEach((function(e,i){return t.Grid[n][i]=e}))})),this.Falling=o?o.Clone():null,this.Hold=l,this.BlockHold=u,this.TicksElapsed=a,this.PieceQueue=n,this.PieceIndex=i,this.LastAction=c},ne=new WeakMap;const ie=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T.None,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(ee(this,e),ne.set(this,{writable:!0,value:void 0}),t instanceof te){var a=t;this.Grid=a.Grid,this.Falling=a.Falling,this.Hold=a.Hold,this.BlockHold=a.BlockHold,this.TicksElapsed=a.TicksElapsed,Q(this,ne,new V(a.PieceQueue,a.PieceIndex)),this.PieceIndex=a.PieceIndex}else this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(T.None)})),this.Falling=i,this.Hold=r,this.BlockHold=l,this.TicksElapsed=o,Q(this,ne,new V(t)),this.PieceIndex=n}var t,n,i;return t=e,(n=[{key:"GetVisibleState",value:function(){return new te(this.PieceQueue,this.PieceIndex,this.Grid,this.Falling,this.Hold,this.TicksElapsed,this.BlockHold)}},{key:"GridWidth",get:function(){return 10}},{key:"GridHeight",get:function(){return 40}},{key:"PlayfieldHeight",get:function(){return 20}},{key:"PieceQueue",get:function(){return Z(this,ne).GetRange(this.PieceIndex,6)}},{key:"Get",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(e instanceof j)t=e.X,n=e.Y;else{if(void 0===i)return null;t=e,n=i}return t<0||n<0||t>=10||n>=40?null:this.Grid[n][t]}},{key:"IsPieceValid",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return t?!t.Points.some((function(t){var n;return(null!==(n=e.Get(t))&&void 0!==n?n:T.I)!==T.None})):!this.Falling||!this.Falling.Points.some((function(t){var n;return(null!==(n=e.Get(t))&&void 0!==n?n:T.I)!==T.None}))}},{key:"DequeuePiece",value:function(){return null===this.Falling&&(this.Falling=q.Spawn(Z(this,ne).Get(this.PieceIndex++),this.TicksElapsed),this.BlockHold=!1,!0)}},{key:"HoldPiece",value:function(){if(null===this.Falling)return!1;if(this.BlockHold)return!1;var e=this.Hold;return this.Hold=this.Falling.Type,e===T.None&&(e=Z(this,ne).Get(this.PieceIndex++)),this.Falling=q.Spawn(e,this.TicksElapsed),this.BlockHold=!0,this.Falling.LastAction=f.Hold,!0}},{key:"ClearLines",value:function(){for(var e=0,t=0;t<this.GridHeight;t++)this.Grid[t].some((function(e){return e===T.None}))||(this.Grid.splice(t,1),this.Grid.push(new Array(this.GridWidth).fill(T.None)),e++,t--);console.log(e)}},{key:"LockPiece",value:function(){var e=this;return null!==this.Falling&&!!this.IsPieceValid()&&(this.Falling.Points.forEach((function(t){var n,i;return e.Grid[t.Y][t.X]=null!==(n=null===(i=e.Falling)||void 0===i?void 0:i.Type)&&void 0!==n?n:T.None})),this.ClearLines(this.Falling),this.Falling=null,!0)}},{key:"RotatePiece",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.CW;if(null===this.Falling)return!1;var n=F[this.Falling.Type].WallKick[this.Falling.Rotation][t].find((function(n){var i,r=null===(i=e.Falling)||void 0===i?void 0:i.Clone();return!!r&&(r.Rotate(t),r.Position=r.Position.Add(n),e.IsPieceValid(r))}));return!!n&&(this.Falling.Rotate(t),this.Falling.Position=this.Falling.Position.Add(n),this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=t===E.CW?f.RotateCW:f.RotateCCW,!0)}},{key:"ShiftPiece",value:function(e){if(null===this.Falling)return!1;var t=this.Falling.Clone();return t.Position.X+=e,!!this.IsPieceValid(t)&&(this.Falling=t,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=e>0?f.ShiftRight:f.ShiftLeft,!0)}},{key:"CanPieceDrop",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(t)e=t.Clone();else{if(!this.Falling)return!1;e=this.Falling.Clone()}return e.Position.Y--,this.IsPieceValid(e)}},{key:"SoftDropPiece",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null!==this.Falling&&!!this.CanPieceDrop()&&(this.Falling.Position.Y--,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount=0,e?this.Falling.DropTick=this.TicksElapsed:this.Falling.LastAction=f.SoftDrop,!0)}},{key:"HardDropPiece",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(t)e=t;else{if(!this.Falling)return!1;e=this.Falling}for(;this.IsPieceValid(e);)e.Position.Y--;return e.Position.Y++,e.LastAction=f.HardDrop,e!==this.Falling||this.LockPiece()}},{key:"Tick",value:function(){null===this.Falling?this.DequeuePiece():(this.TicksElapsed-this.Falling.DropTick>=5&&this.SoftDropPiece(!0),this.TicksElapsed-this.Falling.LastActionTick>=60&&!this.CanPieceDrop()&&this.LockPiece()),this.TicksElapsed++}}])&&J(t.prototype,n),i&&J(t,i),e}();function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function le(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,ue(e,t,"get"))}function ae(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ue(e,t,"set"),n),n}function ue(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ce=new WeakMap,se=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;re(this,e),ce.set(this,{writable:!0,value:void 0}),ae(this,ce,null),this.Player=t,this.State=n instanceof ie?n:new ie(n)}var t,n,i;return t=e,(n=[{key:"ClockRunning",get:function(){return null!==le(this,ce)}},{key:"StartClock",value:function(){ae(this,ce,window.setInterval(this.Tick.bind(this),1e3/60))}},{key:"StopClock",value:function(){null!==le(this,ce)&&window.clearInterval(le(this,ce))}},{key:"Tick",value:function(){switch(this.State.Tick(),this.Player.Tick(this.State.GetVisibleState())){case f.None:return;case f.HardDrop:this.State.HardDropPiece();break;case f.Hold:this.State.HoldPiece();break;case f.RotateCW:this.State.RotatePiece(E.CW);break;case f.RotateCCW:this.State.RotatePiece(E.CCW);break;case f.ShiftLeft:this.State.ShiftPiece(-1);break;case f.ShiftRight:this.State.ShiftPiece(1);break;case f.SoftDrop:this.State.SoftDropPiece(!1)}}}])&&oe(t.prototype,n),i&&oe(t,i),e}(),fe=n(210),he=n.n(fe);function ye(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ve(e,t,n){return(ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pe(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Pe(e);if(t){var r=Pe(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ke(this,n)}}function ke(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?me(e):t}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Se(e,t,"get"))}function Oe(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Se(e,t,"set"),n),n}function Se(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=He(e);if(t){var r=He(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ae(this,n)}}function Ae(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var We,Ie,Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(n,e);var t=je(n);function n(){return Ce(this,n),t.apply(this,arguments)}return n}((We=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"Tick",value:function(e){return f.None}}])&&ye(t.prototype,n),i&&ye(t,i),e}(),Ie=new WeakMap,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(o,e);var t,n,i,r=be(o);function o(){var e;we(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),Ie.set(me(e),{writable:!0,value:void 0}),Oe(me(e),Ie,[]),e}return t=o,(n=[{key:"Tick",value:function(e){var t;return"Update"in We?ve(Pe(o.prototype),"Tick",this).call(this,e):null!==(t=Re(this,Ie).shift())&&void 0!==t?t:f.None}},{key:"Update",value:function(e,t){var n;return null!==(n=Re(this,Ie).shift())&&void 0!==n?n:f.None}},{key:"Enqueue",value:function(e){Re(this,Ie).push(e)}}])&&de(t.prototype,n),i&&de(t,i),o}(We)));function _e(e,t){switch(t){case T.None:return e.color(50);case T.I:return e.color(77,208,225);case T.J:return e.color(33,150,243);case T.L:return e.color(255,152,0);case T.O:return e.color(253,216,53);case T.S:return e.color(76,175,80);case T.T:return e.color(224,64,251);case T.Z:return e.color(229,115,115)}}function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xe(e,t,n){return(xe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xe(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Xe(e);if(t){var r=Xe(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ye(this,n)}}function Ye(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ze(e,t,n){return(ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ze(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ze(e);if(t){var r=Ze(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Je(this,n)}}function Je(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=it(e);if(t){var r=it(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return nt(this,n)}}function nt(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(n,e);var t=tt(n);function n(e,i,r,o){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(l=r&&o?t.call(this,i,r,o):t.call(this,i)).ConfigureInputHandleable(e),l.ConfigurePlayfieldDrawable(15),nt(l)}return n}(function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(o,e);var t,n,i,r=Be(o);function o(){var e;Ne(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).blockSize=15,e}return t=o,(n=[{key:"ConfigurePlayfieldDrawable",value:function(e){this.blockSize=e}},{key:"p5Draw",value:function(e){xe(Xe(o.prototype),"p5Draw",this).call(this,e),this.ResetTransform(e);var t=this.State,n=this.blockSize;if(t){e.stroke(0);for(var i=0;i<=t.GridHeight;i++)e.line(0,i*n,t.GridWidth*n,i*n);for(var r=0;r<=t.GridWidth;r++)e.line(r*n,0,r*n,t.GridHeight*n);for(var l=0;l<t.GridHeight;l++)for(var a=0;a<t.GridWidth;a++){var u;e.fill(_e(e,null!==(u=t.Get(a,l))&&void 0!==u?u:T.None)),e.rect(a*n,l*n,n,n)}}}}])&&Le(t.prototype,n),i&&Le(t,i),o}(e)}(function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(o,e);var t,n,i,r=qe(o);function o(){var e;Me(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).Player=null,e.keyHold=f.None,e.keyDelay=0,e}return t=o,(n=[{key:"ConfigureInputHandleable",value:function(e){this.Player=e}},{key:"p5Draw",value:function(e){ze(Ze(o.prototype),"p5Draw",this).call(this,e),this.keyHold!==f.None&&this.Player instanceof Fe&&(this.keyDelay<=0&&(this.Player.Enqueue(this.keyHold),this.keyDelay=10),this.keyDelay--)}},{key:"p5KeyPressed",value:function(e){this.Player instanceof Fe&&(e.keyCode===e.LEFT_ARROW&&(this.keyHold=f.ShiftLeft),e.keyCode===e.RIGHT_ARROW&&(this.keyHold=f.ShiftRight),e.keyCode===e.UP_ARROW&&(this.keyHold=f.RotateCW),e.keyCode===e.CONTROL&&(this.keyHold=f.RotateCCW),e.keyCode===e.DOWN_ARROW&&(this.keyHold=f.SoftDrop),e.keyCode===e.SHIFT&&(this.keyHold=f.Hold)," "===e.key&&(this.keyHold=f.HardDrop),this.Player.Enqueue(this.keyHold),this.keyDelay=10)}},{key:"p5KeyReleased",value:function(e){if(this.Player instanceof Fe){var t=f.None;e.keyCode===e.LEFT_ARROW&&(t=f.ShiftLeft),e.keyCode===e.RIGHT_ARROW&&(t=f.ShiftRight),e.keyCode===e.UP_ARROW&&(t=f.RotateCW),e.keyCode===e.CONTROL&&(t=f.RotateCCW),e.keyCode===e.DOWN_ARROW&&(t=f.SoftDrop),e.keyCode===e.SHIFT&&(t=f.Hold)," "===e.key&&(t=f.HardDrop),this.keyHold===t&&(this.keyHold=f.None)}}}])&&Ve(t.prototype,n),i&&Ve(t,i),o}(e)}(function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.State=t,n&&i?(this.width=n,this.height=i):(this.width=500,this.height=301.5)}var t,n,i;return t=e,(n=[{key:"ResetTransform",value:function(e){e.scale(1,-1),e.translate(0,-this.height)}},{key:"p5Setup",value:function(e,t){e.createCanvas(this.width,this.height).parent(t),this.ResetTransform(e)}},{key:"p5Draw",value:function(e){e.background(100)}}])&&Qe(t.prototype,n),i&&Qe(t,i),e}()))),ot=new Fe,lt=new se(ot),at=new rt(ot,lt.State);console.log(at);lt.StartClock();const ut=function(e){return i.createElement(he(),{setup:at.p5Setup.bind(at),draw:at.p5Draw.bind(at),keyPressed:at.p5KeyPressed.bind(at),keyReleased:at.p5KeyReleased.bind(at)})};const ct=function(){return i.createElement(o.UT,null,i.createElement(l.rs,null,i.createElement(l.AW,{exact:!0,path:"/",component:c}),i.createElement(l.AW,{exact:!0,path:"/test",component:ut}),i.createElement(l.AW,{component:a})))};r.render(i.createElement(ct,null),document.getElementById("app"))}},e=>{"use strict";var t;t=997,e(e.s=t)}]);