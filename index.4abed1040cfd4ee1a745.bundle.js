(self.webpackChunktetris_ai=self.webpackChunktetris_ai||[]).push([[826],{859:(t,e,n)=>{"use strict";var r=n(294),o=n(935),i=n(727),a=n(977);const u=function(t){return r.createElement("p",null,"Not found")};const c=function(){return r.createElement("div",{className:"flex flex-col justify-center items-center select-none min-h-screen bg-gradient-to-br from-gray-900  to-blue-700"},r.createElement("h1",{className:"text-6xl text-green-500 border-b-4 pb-4"},"Hello World !"),r.createElement("h2",{className:"text-2xl text-gray-300 mt-10"},"Click"," ",r.createElement(i.rU,{to:"/test",className:"text-green-400 underline"},"here")," ","to play pre-alpha Tetris"))};const l=function(t){return r.createElement(c,null)};var f;function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}!function(t){t[t.None=0]="None",t[t.SoftDrop=1]="SoftDrop",t[t.HardDrop=2]="HardDrop",t[t.Hold=3]="Hold",t[t.ShiftLeft=4]="ShiftLeft",t[t.ShiftRight=5]="ShiftRight",t[t.RotateCW=6]="RotateCW",t[t.RotateCCW=7]="RotateCCW"}(f||(f={}));const p=f;function h(t){return t===f.RotateCCW||t===f.RotateCW}var y=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Tick=e,this.Input=n,this.Success=r,this.Falling=o}var e,n,r;return e=t,(n=[{key:"Clone",value:function(){return new t(this.Tick,this.Input,this.Success,this.Falling)}}])&&s(e.prototype,n),r&&s(e,r),t}();function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b,w,d,g,m,S,O,k,P,R,C,_,T,j,x,E,A=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.X=e,this.Y=n}var e,n,r;return e=t,(n=[{key:"Add",value:function(e){return new t(this.X+e.X,this.Y+e.Y)}},{key:"Subtract",value:function(e){return new t(this.X-e.X,this.Y-e.Y)}},{key:"Clone",value:function(){return new t(this.X,this.Y)}}])&&v(e.prototype,n),r&&v(e,r),t}();function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.None=0]="None",t[t.I=1]="I",t[t.J=2]="J",t[t.L=3]="L",t[t.O=4]="O",t[t.S=5]="S",t[t.T=6]="T",t[t.Z=7]="Z"}(j||(j={})),function(t){t[t.R0=0]="R0",t[t.R90=1]="R90",t[t.R180=2]="R180",t[t.R270=3]="R270"}(x||(x={})),function(t){t[t.CW=1]="CW",t[t.CCW=-1]="CCW"}(E||(E={}));var B=Object.freeze([(b={},D(b,-1,[new A(0,0),new A(1,0),new A(1,1),new A(0,-2),new A(1,-2)]),D(b,1,[new A(0,0),new A(-1,0),new A(-1,1),new A(0,-2),new A(-1,-2)]),b),(w={},D(w,-1,[new A(0,0),new A(1,0),new A(1,-1),new A(0,2),new A(1,2)]),D(w,1,[new A(0,0),new A(1,0),new A(1,-1),new A(0,2),new A(1,2)]),w),(d={},D(d,-1,[new A(0,0),new A(-1,0),new A(-1,1),new A(0,-2),new A(-1,-2)]),D(d,1,[new A(0,0),new A(1,0),new A(1,1),new A(0,-2),new A(1,-2)]),d),(g={},D(g,-1,[new A(0,0),new A(-1,0),new A(-1,-1),new A(0,2),new A(-1,2)]),D(g,1,[new A(0,0),new A(-1,0),new A(-1,-1),new A(0,2),new A(-1,2)]),g)]),H=Object.freeze([(m={},D(m,-1,[new A(0,0),new A(-1,0),new A(2,0),new A(-1,2),new A(2,-1)]),D(m,1,[new A(0,0),new A(-2,0),new A(1,0),new A(-2,-1),new A(1,2)]),m),(S={},D(S,-1,[new A(0,0),new A(2,0),new A(-1,0),new A(2,1),new A(-1,-2)]),D(S,1,[new A(0,0),new A(-1,0),new A(2,0),new A(-1,2),new A(2,-1)]),S),(O={},D(O,-1,[new A(0,0),new A(1,0),new A(-2,0),new A(1,-2),new A(-2,1)]),D(O,1,[new A(0,0),new A(2,0),new A(-1,0),new A(2,1),new A(-1,-2)]),O),(k={},D(k,-1,[new A(0,0),new A(-2,0),new A(1,0),new A(-2,-1),new A(1,2)]),D(k,1,[new A(0,0),new A(1,0),new A(-2,0),new A(1,-2),new A(-2,1)]),k)]),F=Object.freeze([(P={},D(P,-1,[new A(0,0)]),D(P,1,[new A(0,0)]),P),(R={},D(R,-1,[new A(0,0)]),D(R,1,[new A(0,0)]),R),(C={},D(C,-1,[new A(0,0)]),D(C,1,[new A(0,0)]),C),(_={},D(_,-1,[new A(0,0)]),D(_,1,[new A(0,0)]),_)]),W=Object.freeze((D(T={},j.None,{Rotations:[[]],WallKick:F}),D(T,j.I,{Rotations:[[new A(0,2),new A(1,2),new A(2,2),new A(3,2)],[new A(2,0),new A(2,1),new A(2,2),new A(2,3)],[new A(0,1),new A(1,1),new A(2,1),new A(3,1)],[new A(1,0),new A(1,1),new A(1,2),new A(1,3)]],WallKick:H}),D(T,j.J,{Rotations:[[new A(0,2),new A(0,1),new A(1,1),new A(2,1)],[new A(2,2),new A(1,2),new A(1,1),new A(1,0)],[new A(0,1),new A(1,1),new A(2,1),new A(2,0)],[new A(0,0),new A(1,0),new A(1,1),new A(1,2)]],WallKick:B}),D(T,j.L,{Rotations:[[new A(0,1),new A(1,1),new A(2,1),new A(2,2)],[new A(1,2),new A(1,1),new A(1,0),new A(2,0)],[new A(0,0),new A(0,1),new A(1,1),new A(2,1)],[new A(0,2),new A(1,2),new A(1,1),new A(1,0)]],WallKick:B}),D(T,j.O,{Rotations:[[new A(0,0),new A(0,1),new A(1,0),new A(1,1)]],WallKick:F}),D(T,j.S,{Rotations:[[new A(0,1),new A(1,1),new A(1,2),new A(2,2)],[new A(1,2),new A(1,1),new A(2,1),new A(2,0)],[new A(0,0),new A(1,0),new A(1,1),new A(2,1)],[new A(0,2),new A(0,1),new A(1,1),new A(1,0)]],WallKick:B}),D(T,j.T,{Rotations:[[new A(0,1),new A(1,1),new A(1,2),new A(2,1)],[new A(1,2),new A(1,1),new A(2,1),new A(1,0)],[new A(0,1),new A(1,0),new A(1,1),new A(2,1)],[new A(1,2),new A(0,1),new A(1,1),new A(1,0)]],WallKick:B}),D(T,j.Z,{Rotations:[[new A(0,2),new A(1,1),new A(1,2),new A(2,1)],[new A(2,2),new A(1,1),new A(2,1),new A(1,0)],[new A(0,1),new A(1,0),new A(1,1),new A(2,0)],[new A(1,2),new A(0,1),new A(1,1),new A(0,0)]],WallKick:B}),T));const L=W;Array.prototype.max||Object.defineProperty(Array.prototype,"max",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var t=this.length,e=this[0];t--;)this[t]>e&&(e=this[t]);return e}}),Array.prototype.maxBy||Object.defineProperty(Array.prototype,"maxBy",{enumerable:!1,writable:!1,configurable:!1,value:function(t){for(var e=this.length,n=t(this[0]),r=this[0];e--;){var o=t(this[e]);o>n&&(n=o,r=this[e])}return r}}),Array.prototype.min||Object.defineProperty(Array.prototype,"min",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var t=this.length,e=this[0];t--;)this[t]<e&&(e=this[t]);return e}}),Array.prototype.minBy||Object.defineProperty(Array.prototype,"minBy",{enumerable:!1,writable:!1,configurable:!1,value:function(t){for(var e=this.length,n=t(this[0]),r=this[0];e--;){var o=t(this[e]);o<n&&(n=o,r=this[e])}return r}});const I=function(t){return function(){var e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}};function G(t){return function(t){if(Array.isArray(t))return M(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,V(t,e,"get"))}function K(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,V(t,e,"set"),n),n}function V(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var z=new WeakMap,Q=new WeakMap,U=new WeakMap,$=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(N(this,t),z.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),U.set(this,{writable:!0,value:void 0}),n instanceof Array)return K(this,Q,null),K(this,U,new Array(r+n.length).fill(j.None)),(e=X(this,U)).splice.apply(e,[r,n.length].concat(G(n))),void K(this,z,null);K(this,Q,void 0===n?Math.floor(Math.random()*Math.pow(2,32)):n),K(this,z,I(X(this,Q))),K(this,U,[])}var e,n,r;return e=t,(n=[{key:"Seed",get:function(){return X(this,Q)}},{key:"generate",value:function(){if(null!==X(this,Q)&&null!==X(this,z))for(var t=[j.I,j.J,j.L,j.O,j.S,j.T,j.Z];t.length>0;){var e=X(this,z).call(this)%t.length;X(this,U).push(t.splice(e,1)[0])}else X(this,U).push(j.None)}},{key:"Get",value:function(t){for(;X(this,U).length<=t;)this.generate();return X(this,U)[t]}},{key:"GetRange",value:function(t,e){for(;X(this,U).length<=t+e;)this.generate();return X(this,U).slice(t,t+e)}}])&&Y(e.prototype,n),r&&Y(e,r),t}();function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Z=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.R0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:NaN,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:p.None;q(this,t),this.Type=e,this.Rotation=n,r?this.Position=r:(this.Position=new A(4,21),this.Bottom=21,this.Left=Math.floor(5-this.Width/2)),this.LastActionTick=o,this.ActionCount=i,this.DropTick=a,this.LastAction=u}var e,n,r;return e=t,r=[{key:"Spawn",value:function(e,n){return new t(e,void 0,void 0,n,0,n)}}],(n=[{key:"Clone",value:function(){return new t(this.Type,this.Rotation,this.Position.Clone(),this.LastActionTick,this.ActionCount,this.DropTick,this.LastAction)}},{key:"InternalPoints",get:function(){return W[this.Type].Rotations[this.Rotation]}},{key:"Points",get:function(){var t=this;return W[this.Type].Rotations[this.Rotation].map((function(e){return e.Add(t.Position)}))}},{key:"InternalLeft",get:function(){return this.InternalPoints.map((function(t){return t.X})).min()}},{key:"InternalRight",get:function(){return this.InternalPoints.map((function(t){return t.X})).max()}},{key:"InternalTop",get:function(){return this.InternalPoints.map((function(t){return t.Y})).max()}},{key:"InternalBottom",get:function(){return this.InternalPoints.map((function(t){return t.Y})).min()}},{key:"Left",get:function(){return this.Position.X+this.InternalLeft},set:function(t){this.Position.X=t-this.InternalLeft}},{key:"Right",get:function(){return this.Position.X+this.InternalRight},set:function(t){this.Position.X=t-this.InternalRight}},{key:"Top",get:function(){return this.Position.Y+this.InternalTop},set:function(t){this.Position.Y=t-this.InternalTop}},{key:"Bottom",get:function(){return this.Position.Y+this.InternalBottom},set:function(t){this.Position.Y=t-this.InternalBottom}},{key:"Width",get:function(){return this.InternalRight-this.InternalLeft}},{key:"Height",get:function(){return this.InternalTop-this.InternalBottom}},{key:"Rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.CW;this.Rotation+=t;var e=W[this.Type].Rotations.length;this.Rotation>=e&&(this.Rotation=0),this.Rotation<0&&(this.Rotation=e-1)}}])&&J(e.prototype,n),r&&J(e,r),t}();function tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const et=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),tt(this,"listeners",[]),tt(this,"listenersOncer",[]),tt(this,"on",(function(t){return e.listeners.push(t),{dispose:function(){return e.off(t)}}})),tt(this,"once",(function(t){e.listenersOncer.push(t)})),tt(this,"off",(function(t){var n=e.listeners.indexOf(t);n>-1&&e.listeners.splice(n,1)})),tt(this,"emit",(function(t){if(e.listeners.forEach((function(e){return e(t)})),e.listenersOncer.length>0){var n=e.listenersOncer;e.listenersOncer=[],n.forEach((function(e){return e(t)}))}})),tt(this,"pipe",(function(t){return e.on((function(e){return t.emit(e)}))}))};function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rt;!function(t){t[t.LineClear=0]="LineClear",t[t.TSpin=1]="TSpin",t[t.TSpinMini=2]="TSpinMini",t[t.PerfectClear=3]="PerfectClear"}(rt||(rt={}));const ot=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.LinesCleared=e,this.Type=n,this.Combo=r,this.BackToBack=o}var e,n,r;return e=t,(n=[{key:"Clone",value:function(){return new t(this.LinesCleared,this.Type,this.Combo,this.BackToBack)}}])&&nt(e.prototype,n),r&&nt(e,r),t}();function it(t){return t.Type===rt.LineClear&&t.LinesCleared.length>=4||t.Type===rt.TSpin||t.Type===rt.TSpinMini}function at(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ut(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,st(t,e,"get"))}function ft(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,st(t,e,"set"),n),n}function st(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ht=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:j.None,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;pt(this,t),this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(j.None)})),o&&o.forEach((function(t,n){return t.forEach((function(t,r){return e.Grid[n][r]=t}))})),this.Falling=i?i.Clone():null,this.Hold=a,this.BlockHold=c,this.TicksElapsed=u,this.PieceQueue=n,this.PieceIndex=r,this.Combo=l,this.LastAchievement=f},yt=new WeakMap,vt=new WeakMap;const bt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:j.None,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(pt(this,t),yt.set(this,{writable:!0,value:void 0}),vt.set(this,{writable:!0,value:void 0}),e instanceof ht){var l=e;this.Grid=l.Grid,this.Falling=l.Falling,this.Hold=l.Hold,this.BlockHold=l.BlockHold,this.TicksElapsed=l.TicksElapsed,ft(this,yt,new $(l.PieceQueue,l.PieceIndex)),this.PieceIndex=l.PieceIndex,this.Combo=l.Combo,this.LastAchievement=l.LastAchievement}else this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(j.None)})),this.Falling=r,this.Hold=o,this.BlockHold=a,this.TicksElapsed=i,ft(this,yt,new $(e)),this.PieceIndex=n,this.Combo=u,this.LastAchievement=c;ft(this,vt,new et)}var e,n,r;return e=t,(n=[{key:"GetVisibleState",value:function(){return new ht(this.PieceQueue,this.PieceIndex,this.Grid,this.Falling,this.Hold,this.TicksElapsed,this.BlockHold,this.Combo)}},{key:"Achievement",get:function(){return lt(this,vt)}},{key:"GridWidth",get:function(){return 10}},{key:"GridHeight",get:function(){return 40}},{key:"PlayfieldHeight",get:function(){return 20}},{key:"PieceQueue",get:function(){return lt(this,yt).GetRange(this.PieceIndex,6)}},{key:"Get",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t instanceof A)e=t.X,n=t.Y;else{if(void 0===r)return null;e=t,n=r}return e<0||n<0||e>=10||n>=40?null:this.Grid[n][e]}},{key:"IsPieceValid",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?!e.Points.some((function(e){var n;return(null!==(n=t.Get(e))&&void 0!==n?n:j.I)!==j.None})):!this.Falling||!this.Falling.Points.some((function(e){var n;return(null!==(n=t.Get(e))&&void 0!==n?n:j.I)!==j.None}))}},{key:"DequeuePiece",value:function(){return null===this.Falling&&(this.Falling=Z.Spawn(lt(this,yt).Get(this.PieceIndex++),this.TicksElapsed),this.BlockHold=!1,!0)}},{key:"HoldPiece",value:function(){if(null===this.Falling)return!1;if(this.BlockHold)return!1;var t=this.Hold;return this.Hold=this.Falling.Type,t===j.None&&(t=lt(this,yt).Get(this.PieceIndex++)),this.Falling=Z.Spawn(t,this.TicksElapsed),this.BlockHold=!0,this.Falling.LastAction=p.Hold,!0}},{key:"ClearLines",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=[],o=null;if((null==n?void 0:n.Type)===j.T&&h(n.LastAction)){var i=[[0,0],[2,0],[0,2],[2,2]].reduce((function(t,r){var o=at(r,2),i=o[0],a=o[1];return e.Get(n.Position.X+i,n.Position.Y+a)!==j.None?t+1:t}),0);if(i>=3){var a=[[1,0],[0,1],[1,2],[2,1]].some((function(t){var r=at(t,2),o=r[0],i=r[1];return!n.InternalPoints.find((function(t){return t.X===o&&t.Y===i}))&&e.Get(n.Position.X+o,n.Position.Y+i)!==j.None}));o=a?rt.TSpinMini:rt.TSpin}}for(var u=this.GridHeight-1;u>=0;u--)this.Grid[u].some((function(t){return t===j.None}))||(this.Grid.splice(u,1),this.Grid.push(new Array(this.GridWidth).fill(j.None)),r.push(u));if(0!==r.length||(this.Combo=0,null!==o)){var c=new ot(r,null!==(t=o)&&void 0!==t?t:rt.LineClear,this.Combo,!!this.LastAchievement&&it(this.LastAchievement));r.length>0&&this.Combo++,this.Grid.some((function(t){return t.some((function(t){return t!==j.None}))}))||(c.Type=rt.PerfectClear),c.BackToBack=it(c)&&c.BackToBack;var l=c.Clone();lt(this,vt).emit(c),this.LastAchievement=l}}},{key:"LockPiece",value:function(){var t=this;return null!==this.Falling&&!!this.IsPieceValid()&&(this.Falling.Points.forEach((function(e){var n,r;return t.Grid[e.Y][e.X]=null!==(n=null===(r=t.Falling)||void 0===r?void 0:r.Type)&&void 0!==n?n:j.None})),this.ClearLines(this.Falling),this.Falling=null,!0)}},{key:"RotatePiece",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.CW;if(null===this.Falling)return!1;var n=W[this.Falling.Type].WallKick[this.Falling.Rotation][e].find((function(n){var r,o=null===(r=t.Falling)||void 0===r?void 0:r.Clone();return!!o&&(o.Rotate(e),o.Position=o.Position.Add(n),t.IsPieceValid(o))}));return!!n&&(this.Falling.Rotate(e),this.Falling.Position=this.Falling.Position.Add(n),this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=e===E.CW?p.RotateCW:p.RotateCCW,!0)}},{key:"ShiftPiece",value:function(t){if(null===this.Falling)return!1;var e=this.Falling.Clone();return e.Position.X+=t,!!this.IsPieceValid(e)&&(this.Falling=e,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=t>0?p.ShiftRight:p.ShiftLeft,!0)}},{key:"CanPieceDrop",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)t=e.Clone();else{if(!this.Falling)return!1;t=this.Falling.Clone()}return t.Position.Y--,this.IsPieceValid(t)}},{key:"SoftDropPiece",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null!==this.Falling&&!!this.CanPieceDrop()&&(this.Falling.Position.Y--,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount=0,t?this.Falling.DropTick=this.TicksElapsed:this.Falling.LastAction=p.SoftDrop,!0)}},{key:"HardDropPiece",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)t=e;else{if(!this.Falling)return!1;t=this.Falling}for(var n=t.Position.Y;this.IsPieceValid(t);)t.Position.Y--;return t.Position.Y++,n!==t.Position.Y&&(t.LastAction=p.HardDrop),t!==this.Falling||this.LockPiece()}},{key:"Tick",value:function(){null===this.Falling?this.DequeuePiece():(this.TicksElapsed-this.Falling.DropTick>=15&&this.SoftDropPiece(!0),this.TicksElapsed-this.Falling.LastActionTick>=60&&!this.CanPieceDrop()&&this.LockPiece()),this.TicksElapsed++}}])&&ct(e.prototype,n),r&&ct(e,r),t}();var wt=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rt(t);if(e){var o=Rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kt(this,n)}}function kt(t,e){return!e||"object"!==dt(e)&&"function"!=typeof e?Pt(t):e}function Pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ct(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Tt(t,e,"get"))}function _t(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Tt(t,e,"set"),n),n}function Tt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var jt=new WeakMap,xt=new WeakMap,Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(i,t);var e,n,r,o=Ot(i);function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return gt(this,i),e=o.call(this),jt.set(Pt(e),{writable:!0,value:void 0}),xt.set(Pt(e),{writable:!0,value:void 0}),_t(Pt(e),jt,null),e.Player=t,e.State=n instanceof bt?n:new bt(n),_t(Pt(e),xt,new et),e}return e=i,(n=[{key:"Input",get:function(){return Ct(this,xt)}},{key:"ClockRunning",get:function(){return null!==Ct(this,jt)}},{key:"StartClock",value:function(){_t(this,jt,window.setInterval(this.Tick.bind(this),1e3/60))}},{key:"StopClock",value:function(){null!==Ct(this,jt)&&window.clearInterval(Ct(this,jt))}},{key:"Tick",value:function(){this.State.Tick();var t=this.Player.Tick(this.State.GetVisibleState()),e=this.State.Falling,n=!1;switch(t){case p.None:break;case p.HardDrop:n=this.State.HardDropPiece();break;case p.Hold:n=this.State.HoldPiece();break;case p.RotateCW:n=this.State.RotatePiece(E.CW);break;case p.RotateCCW:n=this.State.RotatePiece(E.CCW);break;case p.ShiftLeft:n=this.State.ShiftPiece(-1);break;case p.ShiftRight:n=this.State.ShiftPiece(1);break;case p.SoftDrop:n=this.State.SoftDropPiece(!1)}t!==p.None&&Ct(this,xt).emit(new y(this.State.TicksElapsed,t,n,e))}}])&&mt(e.prototype,n),r&&mt(e,r),i}(wt),At=n(210),Dt=n.n(At);function Bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e,n){return(Lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function It(t,e){return(It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yt(t);if(e){var o=Yt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mt(this,n)}}function Mt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?Nt(t):e}function Nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Vt(t,e,"get"))}function Kt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Vt(t,e,"set"),n),n}function Vt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function zt(t){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ut(t,e){return(Ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jt(t);if(e){var o=Jt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qt(this,n)}}function qt(t,e){return!e||"object"!==zt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jt(t){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zt,te,ee=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ut(t,e)}(n,t);var e=$t(n);function n(){return Qt(this,n),e.apply(this,arguments)}return n}((Zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"Tick",value:function(t){return p.None}}])&&Bt(e.prototype,n),r&&Bt(e,r),t}(),te=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&It(t,e)}(i,t);var e,n,r,o=Gt(i);function i(){var t;Ft(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=o.call.apply(o,[this].concat(n)),te.set(Nt(t),{writable:!0,value:void 0}),Kt(Nt(t),te,[]),t}return e=i,(n=[{key:"Tick",value:function(t){var e;return"Update"in Zt?Lt(Yt(i.prototype),"Tick",this).call(this,t):null!==(e=Xt(this,te).shift())&&void 0!==e?e:p.None}},{key:"Update",value:function(t,e){var n;return e&&null!==(n=Xt(this,te).shift())&&void 0!==n?n:p.None}},{key:"Enqueue",value:function(t){Xt(this,te).push(t)}}])&&Wt(e.prototype,n),r&&Wt(e,r),i}(Zt)));function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ce(t);if(e){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(t,e){return!e||"object"!==ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ce(t){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pe(t,e){return(pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function he(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ve(t);if(e){var o=ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(t,e){return!e||"object"!==le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function we(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function me(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Oe(t);if(e){var o=Oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(t,e){return!e||"object"!==be(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Re,Ce,_e,Te=function(){function t(e,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.Linear;ke(this,t),this.From=e,this.To=n,this.Duration=r,this.Data=o,this.Elapsed=i,this.Function=a}var e,n,r;return e=t,r=[{key:"Linear",value:function(t){return t}},{key:"EaseOutQuint",value:function(t){return 1-Math.pow(1-t,5)}}],(n=[{key:"CurrentValue",get:function(){return this.From+(this.To-this.From)*this.Function(this.Elapsed/this.Duration)}},{key:"Finished",get:function(){return this.Elapsed>=this.Duration}},{key:"Tick",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.Elapsed+=t}}])&&Pe(e.prototype,n),r&&Pe(e,r),t}();function je(t){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ae(t,e,n){return(Ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fe(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fe(t);if(e){var o=Fe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return He(this,n)}}function He(t,e){return!e||"object"!==je(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fe(t){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function We(t){return"ConfigurePlayfieldAnimatable"in t}function Le(t,e){return t.setAlpha(e),t}function Ie(t,e){switch(e){case j.None:return t.color(50);case j.I:return t.color(77,208,225);case j.J:return t.color(33,150,243);case j.L:return t.color(255,152,0);case j.O:return t.color(253,216,53);case j.S:return t.color(76,175,80);case j.T:return t.color(224,64,251);case j.Z:return t.color(229,115,115)}}function Ge(t,e,n,r,o,i){t.fill(Le(Ie(t,null!=e?e:j.None),i)),r.forEach((function(e){t.rect(n.X+e.X*o,n.Y+e.Y*o,o,o)}))}function Me(t,e,n,r,o,i){t.push(),t.scale(1,-1),t.text(e,n,-r,o,void 0===i?i:-i),t.pop()}function Ne(t){return void 0!==Object.keys(Ce).find((function(e){return e===t}))}function Ye(t){return void 0!==Object.keys(_e).find((function(e){return e===t}))}function Xe(t){if(t instanceof y)switch(t.Input){case p.None:return null;case p.HardDrop:return Re.Lock;case p.RotateCCW:case p.RotateCW:return t.Success?Re.RotateSuccess:Re.RotateFail;case p.ShiftLeft:case p.ShiftRight:return t.Success?Re.ShiftSuccess:Re.ShiftFail;case p.SoftDrop:return Re.SoftDrop;case p.Hold:return t.Success?Re.Hold:null}if(t instanceof ot){var e=[];if(t.Combo>0){var n="Combo".concat(Math.min(20,t.Combo));Ne(n)&&e.push(Ce[n])}if(t.Type===rt.PerfectClear)return e.push(Ce.PerfectClear),e;var r="";return t.BackToBack&&(r+="B2b"),t.Type===rt.TSpinMini?r+="TSpinMini":(t.Type===rt.TSpin&&(r+="TSpin"),1===t.LinesCleared.length?r+="Single":2===t.LinesCleared.length?r+="Double":3===t.LinesCleared.length?r+="Triple":4===t.LinesCleared.length&&(r+="Tetris")),Ne(r)&&e.push(Ce[r]),e}return null}function Ke(t){if(t.Type===rt.PerfectClear)return _e.PerfectClear;var e="";if(t.BackToBack&&(e+="B2b"),t.Type===rt.TSpinMini?e+="TSpinMini":(t.Type===rt.TSpin&&(e+="TSpin"),1===t.LinesCleared.length?e+="Single":2===t.LinesCleared.length?e+="Double":3===t.LinesCleared.length?e+="Triple":4===t.LinesCleared.length&&(e+="Tetris")),Ye(e)&&"Single"!==e)return _e[e];if(t.Combo>0){var n="Combo".concat(Math.min(5,t.Combo));if(Ye(n))return _e[n]}return null}function Ve(t){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ue(t,e,n){return(Ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function $e(t,e){return($e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tn(t);if(e){var o=tn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Je(this,n)}}function Je(t,e){return!e||"object"!==Ve(e)&&"function"!=typeof e?Ze(t):e}function Ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tn(t){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function en(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,rn(t,e,"get"))}function nn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,rn(t,e,"set"),n),n}function rn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function an(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cn(t,e,n){return(cn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ln(t,e){return(ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hn(t);if(e){var o=hn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sn(this,n)}}function sn(t,e){return!e||"object"!==on(e)&&"function"!=typeof e?pn(t):e}function pn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hn(t){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,bn(t,e,"get"))}function vn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,bn(t,e,"set"),n),n}function bn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function wn(t){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mn(t,e,n){return(mn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Sn(t,e){return(Sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function On(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rn(t);if(e){var o=Rn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kn(this,n)}}function kn(t,e){return!e||"object"!==wn(e)&&"function"!=typeof e?Pn(t):e}function Pn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Tn(t,e,"get"))}function _n(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Tn(t,e,"set"),n),n}function Tn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function En(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function An(t,e,n){return(An="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Dn(t,e){return(Dn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wn(t);if(e){var o=Wn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hn(this,n)}}function Hn(t,e){return!e||"object"!==jn(e)&&"function"!=typeof e?Fn(t):e}function Fn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wn(t){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ln(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Gn(t,e,"get"))}function In(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Gn(t,e,"set"),n),n}function Gn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Mn(t){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xn(t,e,n){return(Xn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Kn(t,e){return(Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qn(t);if(e){var o=Qn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return zn(this,n)}}function zn(t,e){return!e||"object"!==Mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qn(t){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Un(t){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jn(t,e){return(Jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=er(t);if(e){var o=er(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tr(this,n)}}function tr(t,e){return!e||"object"!==Un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function er(t){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.Lock="/assets/sfx/sfx_lockdown.wav",t.RotateSuccess="/assets/sfx/sfx_rotate.wav",t.RotateFail="/assets/sfx/sfx_rotatefail.wav",t.ShiftSuccess="/assets/sfx/sfx_move.wav",t.ShiftFail="/assets/sfx/sfx_movefail.wav",t.SoftDrop="/assets/sfx/sfx_softdrop.wav",t.Hold="/assets/sfx/sfx_hold.wav"}(Re||(Re={})),function(t){t.Single="/assets/sfx/sfx_single.wav",t.Double="/assets/sfx/sfx_double.wav",t.Triple="/assets/sfx/sfx_triple.wav",t.Tetris="/assets/sfx/sfx_tetris.wav",t.TSpin="/assets/sfx/sfx_tspin_zero.wav",t.TSpinMini="/assets/sfx/sfx_tspin_mini.wav",t.TSpinSingle="/assets/sfx/sfx_tspin_single.wav",t.TSpinDouble="/assets/sfx/sfx_tspin_double.wav",t.TSpinTriple="/assets/sfx/sfx_tspin_triple.wav",t.B2bTSpinMini="/assets/sfx/sfx_b2b_tspin_mini.wav",t.B2bTSpinSingle="/assets/sfx/sfx_b2b_tspin_single.wav",t.B2bTSpinDouble="/assets/sfx/sfx_b2b_tspin_double.wav",t.B2bTSpinTriple="/assets/sfx/sfx_b2b_tspin_triple.wav",t.B2bTetris="/assets/sfx/sfx_b2b_tetris.wav",t.PerfectClear="/assets/sfx/sfx_perfectclear.wav",t.Combo1="/assets/sfx/sfx_combo1.wav",t.Combo2="/assets/sfx/sfx_combo2.wav",t.Combo3="/assets/sfx/sfx_combo3.wav",t.Combo4="/assets/sfx/sfx_combo4.wav",t.Combo5="/assets/sfx/sfx_combo5.wav",t.Combo6="/assets/sfx/sfx_combo6.wav",t.Combo7="/assets/sfx/sfx_combo7.wav",t.Combo8="/assets/sfx/sfx_combo8.wav",t.Combo9="/assets/sfx/sfx_combo9.wav",t.Combo10="/assets/sfx/sfx_combo10.wav",t.Combo11="/assets/sfx/sfx_combo11.wav",t.Combo12="/assets/sfx/sfx_combo12.wav",t.Combo13="/assets/sfx/sfx_combo13.wav",t.Combo14="/assets/sfx/sfx_combo14.wav",t.Combo15="/assets/sfx/sfx_combo15.wav",t.Combo16="/assets/sfx/sfx_combo16.wav",t.Combo17="/assets/sfx/sfx_combo17.wav",t.Combo18="/assets/sfx/sfx_combo18.wav",t.Combo19="/assets/sfx/sfx_combo19.wav",t.Combo20="/assets/sfx/sfx_combo20.wav"}(Ce||(Ce={})),function(t){t.Single="/assets/voice/voice_single.wav",t.Double="/assets/voice/voice_double.wav",t.Triple="/assets/voice/voice_triple.wav",t.Tetris="/assets/voice/voice_tetris.wav",t.TSpin="/assets/voice/voice_tspin.wav",t.TSpinMini="/assets/voice/voice_tspinmini.wav",t.TSpinSingle="/assets/voice/voice_tspinsingle.wav",t.TSpinDouble="/assets/voice/voice_tspindouble.wav",t.TSpinTriple="/assets/voice/voice_tspintriple.wav",t.B2bTSpinMini="/assets/voice/voice_b2btspinmini.wav",t.B2bTSpinSingle="/assets/voice/voice_b2btspinsingle.wav",t.B2bTSpinDouble="/assets/voice/voice_b2btspindouble.wav",t.B2bTSpinTriple="/assets/voice/voice_b2btspintriple.wav",t.B2bTetris="/assets/voice/voice_b2btetris.wav",t.PerfectClear="/assets/voice/voice_perfectclear.wav",t.Combo1="/assets/voice/voice_combo01.wav",t.Combo2="/assets/voice/voice_combo02.wav",t.Combo3="/assets/voice/voice_combo03.wav",t.Combo4="/assets/voice/voice_combo04.wav",t.Combo5="/assets/voice/voice_combo05.wav"}(_e||(_e={}));var nr=n(766);function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ir(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ar(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cr(t,e,n){return(cr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function lr(t,e){return(lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hr(t);if(e){var o=hr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sr(this,n)}}function sr(t,e){return!e||"object"!==rr(e)&&"function"!=typeof e?pr(t):e}function pr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hr(t){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,br(t,e,"get"))}function vr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,br(t,e,"set"),n),n}function br(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function wr(t){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return gr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Or(t,e,n){return(Or="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_r(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function kr(t,e){return(kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_r(t);if(e){var o=_r(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}function Rr(t,e){return!e||"object"!==wr(e)&&"function"!=typeof e?Cr(t):e}function Cr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _r(t){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,xr(t,e,"get"))}function jr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,xr(t,e,"set"),n),n}function xr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Er(t){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ar(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Dr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fr(t,e,n){return(Fr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Wr(t,e){return(Wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Mr(t);if(e){var o=Mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ir(this,n)}}function Ir(t,e){return!e||"object"!==Er(e)&&"function"!=typeof e?Gr(t):e}function Gr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mr(t){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Xr(t,e,"get"))}function Yr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Xr(t,e,"set"),n),n}function Xr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vr(t){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zr(t,e){return(zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$r(t);if(e){var o=$r(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ur(this,n)}}function Ur(t,e){return!e||"object"!==Vr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $r(t){return($r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zr(t,e)}(n,t);var e=Qr(n);function n(t,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(i=r&&o?e.call(this,r,o):e.call(this)).ConfigureGameState(t.State),i.ConfigurePlayer(t.Player),i.ConfigureGame(t),i.ConfigureBlockSize(15),i.ConfigurePlayfieldAnimatable(),i.ConfigurePlayerSoundPlayable(),i.ConfigureAchievementSoundPlayable(),i.ConfigureAchievementVoicePlayable(),i.ConfigurePlayfieldDrawable(new A(120,0),new A(1,1)),i.ConfigureHoldPieceDrawable(new A(10,200),new A(1,1)),i.ConfigurePieceQueueDrawable(new A(400,0),new A(.7,.7)),i.ConfigureFramerateDrawable(new A(0,i.height-10),new A(1,1)),Ur(i)}return n}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dn(t,e)}(u,t);var r,o,i,a=Bn(u);function u(){var t;xn(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Fn(t),{writable:!0,value:void 0}),n.set(Fn(t),{writable:!0,value:void 0}),In(Fn(t),e,new A(0,0)),In(Fn(t),n,new A(1,1)),t}return r=u,(o=[{key:"ConfigureFramerateDrawable",value:function(t,r){In(this,e,t),In(this,n,r)}},{key:"p5Draw",value:function(t){An(Wn(u.prototype),"p5Draw",this).call(this,t),this.SetTransform(t,Ln(this,n).X,Ln(this,n).Y,Ln(this,e).X,Ln(this,e).Y),t.noStroke(),t.fill(0),Me(t,"FPS: ".concat(t.frameRate().toFixed(2)),0,0)}}])&&En(r.prototype,o),i&&En(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sn(t,e)}(u,t);var r,o,i,a=On(u);function u(){var t;dn(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Pn(t),{writable:!0,value:void 0}),n.set(Pn(t),{writable:!0,value:void 0}),_n(Pn(t),e,new A(0,0)),_n(Pn(t),n,new A(1,1)),t}return r=u,(o=[{key:"ConfigurePieceQueueDrawable",value:function(t,r){_n(this,e,t),_n(this,n,r)}},{key:"p5Draw",value:function(t){if(mn(Rn(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,Cn(this,n).X,Cn(this,n).Y,Cn(this,e).X,Cn(this,e).Y);for(var r=this.State,o=this.BlockSize,i=r.PieceQueue.length,a=0;a<i;a++){var c=L[r.PieceQueue[a]].Rotations[0].slice();Ge(t,r.PieceQueue[a],new A(0,this.height-(a+1)*o*4),c,o,255)}}}}])&&gn(r.prototype,o),i&&gn(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ln(t,e)}(u,t);var r,o,i,a=fn(u);function u(){var t;an(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(pn(t),{writable:!0,value:void 0}),n.set(pn(t),{writable:!0,value:void 0}),vn(pn(t),e,new A(0,0)),vn(pn(t),n,new A(1,1)),t}return r=u,(o=[{key:"ConfigureHoldPieceDrawable",value:function(t,r){vn(this,e,t),vn(this,n,r)}},{key:"p5Draw",value:function(t){if(cn(hn(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,yn(this,n).X,yn(this,n).Y,yn(this,e).X,yn(this,e).Y);var r=this.State,o=this.BlockSize;if(t.fill(50),t.rect(0,0,5*o,6*o),t.noStroke(),t.fill(255),t.textAlign(t.CENTER),Me(t,"HOLD",2.5*o,5*o),t.textAlign(t.LEFT),t.stroke(0),r.Hold){var i=L[r.Hold].Rotations[0].slice();Ge(t,r.Hold,new A(o/2,o/2),i,o,255)}}}}])&&un(r.prototype,o),i&&un(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$e(t,e)}(u,t);var r,o,i,a=qe(u);function u(){var t;ze(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Ze(t),{writable:!0,value:void 0}),n.set(Ze(t),{writable:!0,value:void 0}),nn(Ze(t),e,new A(0,0)),nn(Ze(t),n,new A(1,1)),t}return r=u,(o=[{key:"ConfigurePlayfieldDrawable",value:function(t,r){nn(this,e,t),nn(this,n,r)}},{key:"p5Draw",value:function(t){var r=this;if(Ue(tn(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,en(this,n).X,en(this,n).Y,en(this,e).X,en(this,e).Y);var o=this.State,i=this.BlockSize;if(o){t.fill(50),t.noStroke(),t.rect(0,0,o.GridWidth*i,o.GridHeight*i),t.stroke(0);for(var a=0;a<=o.GridHeight;a++)t.line(0,a*i,o.GridWidth*i,a*i);for(var c=0;c<=o.GridWidth;c++)t.line(c*i,0,c*i,o.GridHeight*i);We(this)&&(t.noStroke(),this.HardDropAnimations.forEach((function(e){t.fill(Le(Ie(t,e.Data.type),20)),t.rect(e.Data.left*i,e.Data.end*i,(e.Data.right-e.Data.left+1)*i,(o.PlayfieldHeight-e.Data.end)*e.CurrentValue*i)}))),t.stroke(0);var l=null;if(We(this)){l=[];for(var f=function(t){l.push(t+r.LineClearAnimations.filter((function(e){return e.Data.Y<=t})).reduce((function(t,e){return t+e.CurrentValue}),0))},s=0;s<o.GridHeight;s++)f(s)}for(var p=0;p<o.GridHeight;p++)for(var h=0;h<o.GridWidth;h++){var y,v=null!==(y=o.Get(h,p))&&void 0!==y?y:j.None;v!==j.None&&(t.fill(Ie(t,v)),t.rect(h*i,S(p)*i,i,i))}if(o.Falling){var b,w,d=o.Falling.Points.map((function(t){return new A(t.X,S(t.Y))}));Ge(t,null===(b=o.Falling)||void 0===b?void 0:b.Type,new A(0,0),d,i,255);var g=o.Falling.Clone();o.HardDropPiece(g);var m=g.Points.map((function(t){return new A(t.X,S(t.Y))}));Ge(t,null===(w=o.Falling)||void 0===w?void 0:w.Type,new A(0,0),m,i,50)}We(this)&&(t.noStroke(),this.LineClearAnimations.forEach((function(e){t.fill(255,255,255,100),t.rect(0,e.Data.OrigY*i,o.GridWidth*i/2*e.CurrentValue,i),t.rect(o.GridWidth*i,e.Data.OrigY*i,-o.GridWidth*i/2*e.CurrentValue,i)})))}}function S(t){return null===l?t:l[t]}}}])&&Qe(r.prototype,o),i&&Qe(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kr(t,e)}(u,t);var r,o,i,a=Pr(u);function u(){var t;mr(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Cr(t),{writable:!0,value:void 0}),n.set(Cr(t),{writable:!0,value:void 0}),jr(Cr(t),e,[]),jr(Cr(t),n,new Map),t}return r=u,(o=[{key:"ConfigureAchievementSoundPlayable",value:function(){var t=this;null!==this.State?this.State.Achievement.on((function(n){return Tr(t,e).push(n)})):console.error("ConfigureAchievementSoundPlayable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var r=this;Or(_r(u.prototype),"p5Setup",this).call(this,t,e),Object.entries(Ce).forEach((function(t){var e=dr(t,2)[1];return Tr(r,n).set(e,new nr.Howl({src:[e]}))}))}},{key:"p5Draw",value:function(t){var r=this;for(Or(_r(u.prototype),"p5Draw",this).call(this,t);Tr(this,e).length>0;){var o=Tr(this,e).shift();if(console.log(o),!o)break;var i=Xe(o);i&&i.forEach((function(t){var e;return null===(e=Tr(r,n).get(t))||void 0===e?void 0:e.play()}))}}}])&&Sr(r.prototype,o),i&&Sr(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wr(t,e)}(u,t);var r,o,i,a=Lr(u);function u(){var t;Br(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Gr(t),{writable:!0,value:void 0}),n.set(Gr(t),{writable:!0,value:void 0}),Yr(Gr(t),e,[]),Yr(Gr(t),n,new Map),t}return r=u,(o=[{key:"ConfigureAchievementVoicePlayable",value:function(){var t=this;null!==this.State?this.State.Achievement.on((function(n){return Nr(t,e).push(n)})):console.error("ConfigureAchievementVoicePlayable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var r=this;Fr(Mr(u.prototype),"p5Setup",this).call(this,t,e),Object.entries(_e).forEach((function(t){var e=Ar(t,2)[1];return Nr(r,n).set(e,new nr.Howl({src:[e]}))}))}},{key:"p5Draw",value:function(t){for(Fr(Mr(u.prototype),"p5Draw",this).call(this,t);Nr(this,e).length>0;){var r,o=Nr(this,e).shift();if(!o)break;var i=Ke(o);i&&(null===(r=Nr(this,n).get(i))||void 0===r||r.play())}}}])&&Hr(r.prototype,o),i&&Hr(r,i),u}(t)}(function(t){var e,n,r;return e=new WeakMap,n=new WeakMap,r=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lr(t,e)}(c,t);var o,i,a,u=fr(c);function c(){var t;ar(this,c);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=u.call.apply(u,[this].concat(i)),e.set(pr(t),{writable:!0,value:void 0}),n.set(pr(t),{writable:!0,value:void 0}),r.set(pr(t),{writable:!0,value:void 0}),vr(pr(t),e,[]),vr(pr(t),r,new Map),vr(pr(t),n,null),t}return o=c,(i=[{key:"ConfigurePlayerSoundPlayable",value:function(){var t=this;null!==this.Game?this.Game.Input.on((function(n){return yr(t,e).push(n)})):console.error("ConfigurePlayerSoundPlayable called before this.Game is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var n=this;cr(hr(c.prototype),"p5Setup",this).call(this,t,e),Object.entries(Re).forEach((function(t){var e=or(t,2)[1];return yr(n,r).set(e,new nr.Howl({src:[e]}))}))}},{key:"p5Draw",value:function(t){for(cr(hr(c.prototype),"p5Draw",this).call(this,t);yr(this,e).length>0;){var o,i=yr(this,e).shift(),a=yr(this,n);if(vr(this,n,null!=i?i:null),!i)break;if(!(a&&i.Tick-a.Tick<=4&&i.Success===a.Success&&i.Input===a.Input)){var u=Xe(i);u&&(null===(o=yr(this,r).get(u))||void 0===o||o.play())}}}}])&&ur(o.prototype,i),a&&ur(o,a),c}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(i,t);var e,n,r,o=Be(i);function i(){var t;xe(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).HardDropAnimations=[],t.LineClearAnimations=[],t}return e=i,(n=[{key:"ConfigurePlayfieldAnimatable",value:function(){var t=this;null!==this.State?null!==this.Game?(this.Game.Input.on((function(e){e.Input===p.HardDrop&&e.Success&&e.Falling&&t.HardDropAnimations.push(new Te(1,0,20,{left:e.Falling.Left,right:e.Falling.Right,end:e.Falling.Top,type:e.Falling.Type},0,Te.EaseOutQuint))})),this.State.Achievement.on((function(e){var n=0;e.LinesCleared.forEach((function(e){t.LineClearAnimations.filter((function(t){return t.Data.Y>e})).forEach((function(t){return t.Data.Y--})),t.LineClearAnimations.push(new Te(1,0,20+n,{Y:e,OrigY:e},0,Te.EaseOutQuint)),n+=4}))}))):console.error("ConfigurePlayfieldAnimatable called before this.Game is assigned. Beware of the call order of Configure_ functions."):console.error("ConfigurePlayfieldAnimatable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){Ae(Fe(i.prototype),"p5Setup",this).call(this,t,e)}},{key:"p5Draw",value:function(t){Ae(Fe(i.prototype),"p5Draw",this).call(this,t),this.HardDropAnimations.forEach((function(t){return t.Tick()})),this.HardDropAnimations=this.HardDropAnimations.filter((function(t){return!t.Finished})),this.LineClearAnimations.forEach((function(t){return t.Tick()})),this.LineClearAnimations=this.LineClearAnimations.filter((function(t){return!t.Finished}))}}])&&Ee(e.prototype,n),r&&Ee(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jn(t,e)}(i,t);var e,n,r,o=Zn(i);function i(){var t;$n(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).blockSize=15,t}return e=i,(n=[{key:"BlockSize",get:function(){return this.blockSize}},{key:"ConfigureBlockSize",value:function(t){this.blockSize=t}}])&&qn(e.prototype,n),r&&qn(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kn(t,e)}(i,t);var e,n,r,o=Vn(i);function i(){var t;Nn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).keyHold=p.None,t.keyDelay=0,t}return e=i,(n=[{key:"p5Draw",value:function(t){Xn(Qn(i.prototype),"p5Draw",this).call(this,t),this.keyHold!==p.None&&this.Player instanceof ee&&(this.keyDelay<=0&&(this.Player.Enqueue(this.keyHold),this.keyDelay=3),this.keyDelay--)}},{key:"p5KeyPressed",value:function(t){this.Player instanceof ee&&(t.keyCode===t.LEFT_ARROW&&(this.keyHold=p.ShiftLeft),t.keyCode===t.RIGHT_ARROW&&(this.keyHold=p.ShiftRight),t.keyCode===t.UP_ARROW&&(this.keyHold=p.RotateCW),t.keyCode===t.CONTROL&&(this.keyHold=p.RotateCCW),t.keyCode===t.DOWN_ARROW&&(this.keyHold=p.SoftDrop),t.keyCode===t.SHIFT&&(this.keyHold=p.Hold)," "===t.key&&(this.keyHold=p.HardDrop),this.Player.Enqueue(this.keyHold),this.keyDelay=10)}},{key:"p5KeyReleased",value:function(t){if(this.Player instanceof ee){var e=p.None;t.keyCode===t.LEFT_ARROW&&(e=p.ShiftLeft),t.keyCode===t.RIGHT_ARROW&&(e=p.ShiftRight),t.keyCode===t.UP_ARROW&&(e=p.RotateCW),t.keyCode===t.CONTROL&&(e=p.RotateCCW),t.keyCode===t.DOWN_ARROW&&(e=p.SoftDrop),t.keyCode===t.SHIFT&&(e=p.Hold)," "===t.key&&(e=p.HardDrop),this.keyHold===e&&(this.keyHold=p.None)}}},{key:"KeyPressedHandler",get:function(){return this.p5KeyPressed.bind(this)}},{key:"KeyReleasedHandler",get:function(){return this.p5KeyReleased.bind(this)}}])&&Yn(e.prototype,n),r&&Yn(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(i,t);var e,n,r,o=me(i);function i(){var t;we(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).Game=null,t}return e=i,(n=[{key:"ConfigureGame",value:function(t){this.Game=t}}])&&de(e.prototype,n),r&&de(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(i,t);var e,n,r,o=he(i);function i(){var t;fe(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).Player=null,t}return e=i,(n=[{key:"ConfigurePlayer",value:function(t){this.Player=t}}])&&se(e.prototype,n),r&&se(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}(i,t);var e,n,r,o=ae(i);function i(){var t;re(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).State=null,t}return e=i,(n=[{key:"ConfigureGameState",value:function(t){this.State=t}}])&&oe(e.prototype,n),r&&oe(e,r),i}(t)}(function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&n?(this.width=e,this.height=n):(this.width=500,this.height=301.5)}var e,n,r;return e=t,(n=[{key:"SetTransform",value:function(t,e,n,r,o){t.resetMatrix(),t.scale(e,-n),t.translate(r,-this.height+o)}},{key:"ResetTransform",value:function(t){this.SetTransform(t,1,1,0,0)}},{key:"p5Setup",value:function(t,e){t.createCanvas(this.width,this.height).parent(e),this.ResetTransform(t)}},{key:"p5Draw",value:function(t){t.background(100)}},{key:"DrawHandler",get:function(){return this.p5Draw.bind(this)}},{key:"SetupHandler",get:function(){return this.p5Setup.bind(this)}}])&&Kr(e.prototype,n),r&&Kr(e,r),t}()))))))))))))));function Jr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Zr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const to=function(t){var e=Jr((0,r.useState)(),2)[1],n=Jr((0,r.useState)(),2)[1],o=Jr((0,r.useState)(),2),i=o[0],a=o[1];return(0,r.useEffect)((function(){var t=new ee,r=new Et(t),o=new qr(r);return e(t),n(r),a(o),setTimeout((function(){return r.StartClock()}),1e3),function(){r.StopClock()}}),[]),i?r.createElement(Dt(),{setup:i.SetupHandler,draw:i.DrawHandler,keyPressed:i.KeyPressedHandler,keyReleased:i.KeyReleasedHandler}):r.createElement("p",null,"Loading")};const eo=function(){return r.createElement(i.UT,null,r.createElement(a.rs,null,r.createElement(a.AW,{exact:!0,path:"/",component:l}),r.createElement(a.AW,{exact:!0,path:"/test",component:to}),r.createElement(a.AW,{component:u})))};o.render(r.createElement(eo,null),document.getElementById("app"))}},t=>{"use strict";var e;e=859,t(t.s=e)}]);