(self.webpackChunktetris_ai=self.webpackChunktetris_ai||[]).push([[826],{671:(t,e,n)=>{"use strict";var r=n(294),o=n(935),i=n(727),a=n(977);const u=function(t){return r.createElement("p",null,"Not found")};const c=function(){return r.createElement("div",{className:"flex flex-col justify-center items-center select-none min-h-screen bg-gradient-to-br from-gray-900  to-blue-700"},r.createElement("h1",{className:"text-6xl text-green-500 border-b-4 pb-4"},"Hello World !"),r.createElement("h2",{className:"text-2xl text-gray-300 mt-10"},"Click"," ",r.createElement(i.rU,{to:"/test",className:"text-green-400 underline"},"here")," ","to play pre-alpha Tetris"))};const l=function(t){return r.createElement(c,null)};var f;function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}!function(t){t[t.None=0]="None",t[t.SoftDrop=1]="SoftDrop",t[t.HardDrop=2]="HardDrop",t[t.Hold=3]="Hold",t[t.ShiftLeft=4]="ShiftLeft",t[t.ShiftRight=5]="ShiftRight",t[t.RotateCW=6]="RotateCW",t[t.RotateCCW=7]="RotateCCW"}(f||(f={}));const p=f;function y(t){return t===f.RotateCCW||t===f.RotateCW}var h=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Tick=e,this.Input=n,this.Success=r}var e,n,r;return e=t,(n=[{key:"Clone",value:function(){return new t(this.Tick,this.Input,this.Success)}}])&&s(e.prototype,n),r&&s(e,r),t}();function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b,w,d,g,m,S,k,O,P,R,_,T,C,j,x,E,A=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.X=e,this.Y=n}var e,n,r;return e=t,(n=[{key:"Add",value:function(e){return new t(this.X+e.X,this.Y+e.Y)}},{key:"Subtract",value:function(e){return new t(this.X-e.X,this.Y-e.Y)}},{key:"Clone",value:function(){return new t(this.X,this.Y)}}])&&v(e.prototype,n),r&&v(e,r),t}();function B(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.None=0]="None",t[t.I=1]="I",t[t.J=2]="J",t[t.L=3]="L",t[t.O=4]="O",t[t.S=5]="S",t[t.T=6]="T",t[t.Z=7]="Z"}(j||(j={})),function(t){t[t.R0=0]="R0",t[t.R90=1]="R90",t[t.R180=2]="R180",t[t.R270=3]="R270"}(x||(x={})),function(t){t[t.CW=1]="CW",t[t.CCW=-1]="CCW"}(E||(E={}));var D=Object.freeze([(b={},B(b,-1,[new A(0,0),new A(1,0),new A(1,1),new A(0,-2),new A(1,-2)]),B(b,1,[new A(0,0),new A(-1,0),new A(-1,1),new A(0,-2),new A(-1,-2)]),b),(w={},B(w,-1,[new A(0,0),new A(1,0),new A(1,-1),new A(0,2),new A(1,2)]),B(w,1,[new A(0,0),new A(1,0),new A(1,-1),new A(0,2),new A(1,2)]),w),(d={},B(d,-1,[new A(0,0),new A(-1,0),new A(-1,1),new A(0,-2),new A(-1,-2)]),B(d,1,[new A(0,0),new A(1,0),new A(1,1),new A(0,-2),new A(1,-2)]),d),(g={},B(g,-1,[new A(0,0),new A(-1,0),new A(-1,-1),new A(0,2),new A(-1,2)]),B(g,1,[new A(0,0),new A(-1,0),new A(-1,-1),new A(0,2),new A(-1,2)]),g)]),H=Object.freeze([(m={},B(m,-1,[new A(0,0),new A(-1,0),new A(2,0),new A(-1,2),new A(2,-1)]),B(m,1,[new A(0,0),new A(-2,0),new A(1,0),new A(-2,-1),new A(1,2)]),m),(S={},B(S,-1,[new A(0,0),new A(2,0),new A(-1,0),new A(2,1),new A(-1,-2)]),B(S,1,[new A(0,0),new A(-1,0),new A(2,0),new A(-1,2),new A(2,-1)]),S),(k={},B(k,-1,[new A(0,0),new A(1,0),new A(-2,0),new A(1,-2),new A(-2,1)]),B(k,1,[new A(0,0),new A(2,0),new A(-1,0),new A(2,1),new A(-1,-2)]),k),(O={},B(O,-1,[new A(0,0),new A(-2,0),new A(1,0),new A(-2,-1),new A(1,2)]),B(O,1,[new A(0,0),new A(1,0),new A(-2,0),new A(1,-2),new A(-2,1)]),O)]),W=Object.freeze([(P={},B(P,-1,[new A(0,0)]),B(P,1,[new A(0,0)]),P),(R={},B(R,-1,[new A(0,0)]),B(R,1,[new A(0,0)]),R),(_={},B(_,-1,[new A(0,0)]),B(_,1,[new A(0,0)]),_),(T={},B(T,-1,[new A(0,0)]),B(T,1,[new A(0,0)]),T)]),I=Object.freeze((B(C={},j.None,{Rotations:[[]],WallKick:W}),B(C,j.I,{Rotations:[[new A(0,2),new A(1,2),new A(2,2),new A(3,2)],[new A(2,0),new A(2,1),new A(2,2),new A(2,3)],[new A(0,1),new A(1,1),new A(2,1),new A(3,1)],[new A(1,0),new A(1,1),new A(1,2),new A(1,3)]],WallKick:H}),B(C,j.J,{Rotations:[[new A(0,2),new A(0,1),new A(1,1),new A(2,1)],[new A(2,2),new A(1,2),new A(1,1),new A(1,0)],[new A(0,1),new A(1,1),new A(2,1),new A(2,0)],[new A(0,0),new A(1,0),new A(1,1),new A(1,2)]],WallKick:D}),B(C,j.L,{Rotations:[[new A(0,1),new A(1,1),new A(2,1),new A(2,2)],[new A(1,2),new A(1,1),new A(1,0),new A(2,0)],[new A(0,0),new A(0,1),new A(1,1),new A(2,1)],[new A(0,2),new A(1,2),new A(1,1),new A(1,0)]],WallKick:D}),B(C,j.O,{Rotations:[[new A(0,0),new A(0,1),new A(1,0),new A(1,1)]],WallKick:W}),B(C,j.S,{Rotations:[[new A(0,1),new A(1,1),new A(1,2),new A(2,2)],[new A(1,2),new A(1,1),new A(2,1),new A(2,0)],[new A(0,0),new A(1,0),new A(1,1),new A(2,1)],[new A(0,2),new A(0,1),new A(1,1),new A(1,0)]],WallKick:D}),B(C,j.T,{Rotations:[[new A(0,1),new A(1,1),new A(1,2),new A(2,1)],[new A(1,2),new A(1,1),new A(2,1),new A(1,0)],[new A(0,1),new A(1,0),new A(1,1),new A(2,1)],[new A(1,2),new A(0,1),new A(1,1),new A(1,0)]],WallKick:D}),B(C,j.Z,{Rotations:[[new A(0,2),new A(1,1),new A(1,2),new A(2,1)],[new A(2,2),new A(1,1),new A(2,1),new A(1,0)],[new A(0,1),new A(1,0),new A(1,1),new A(2,0)],[new A(1,2),new A(0,1),new A(1,1),new A(0,0)]],WallKick:D}),C));const L=I;Array.prototype.max||Object.defineProperty(Array.prototype,"max",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var t=this.length,e=this[0];t--;)this[t]>e&&(e=this[t]);return e}}),Array.prototype.maxBy||Object.defineProperty(Array.prototype,"maxBy",{enumerable:!1,writable:!1,configurable:!1,value:function(t){for(var e=this.length,n=t(this[0]),r=this[0];e--;){var o=t(this[e]);o>n&&(n=o,r=this[e])}return r}}),Array.prototype.min||Object.defineProperty(Array.prototype,"min",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var t=this.length,e=this[0];t--;)this[t]<e&&(e=this[t]);return e}}),Array.prototype.minBy||Object.defineProperty(Array.prototype,"minBy",{enumerable:!1,writable:!1,configurable:!1,value:function(t){for(var e=this.length,n=t(this[0]),r=this[0];e--;){var o=t(this[e]);o<n&&(n=o,r=this[e])}return r}});const F=function(t){return function(){var e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}};function M(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,z(t,e,"get"))}function K(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,z(t,e,"set"),n),n}function z(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var U=new WeakMap,V=new WeakMap,Q=new WeakMap,$=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(G(this,t),U.set(this,{writable:!0,value:void 0}),V.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),n instanceof Array)return K(this,V,null),K(this,Q,new Array(r+n.length).fill(j.None)),(e=X(this,Q)).splice.apply(e,[r,n.length].concat(M(n))),void K(this,U,null);K(this,V,void 0===n?Math.floor(Math.random()*Math.pow(2,32)):n),K(this,U,F(X(this,V))),K(this,Q,[])}var e,n,r;return e=t,(n=[{key:"Seed",get:function(){return X(this,V)}},{key:"generate",value:function(){if(null!==X(this,V)&&null!==X(this,U))for(var t=[j.I,j.J,j.L,j.O,j.S,j.T,j.Z];t.length>0;){var e=X(this,U).call(this)%t.length;X(this,Q).push(t.splice(e,1)[0])}else X(this,Q).push(j.None)}},{key:"Get",value:function(t){for(;X(this,Q).length<=t;)this.generate();return X(this,Q)[t]}},{key:"GetRange",value:function(t,e){for(;X(this,Q).length<=t+e;)this.generate();return X(this,Q).slice(t,t+e)}}])&&Y(e.prototype,n),r&&Y(e,r),t}();function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Z=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.R0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:NaN,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:p.None;q(this,t),this.Type=e,this.Rotation=n,r?this.Position=r:(this.Position=new A(4,21),this.Bottom=21,this.Left=Math.floor(5-this.Width/2)),this.LastActionTick=o,this.ActionCount=i,this.DropTick=a,this.LastAction=u}var e,n,r;return e=t,r=[{key:"Spawn",value:function(e,n){return new t(e,void 0,void 0,n,0,n)}}],(n=[{key:"Clone",value:function(){return new t(this.Type,this.Rotation,this.Position.Clone(),this.LastActionTick,this.ActionCount,this.DropTick,this.LastAction)}},{key:"InternalPoints",get:function(){return I[this.Type].Rotations[this.Rotation]}},{key:"Points",get:function(){var t=this;return I[this.Type].Rotations[this.Rotation].map((function(e){return e.Add(t.Position)}))}},{key:"InternalLeft",get:function(){return this.InternalPoints.map((function(t){return t.X})).min()}},{key:"InternalRight",get:function(){return this.InternalPoints.map((function(t){return t.X})).max()}},{key:"InternalTop",get:function(){return this.InternalPoints.map((function(t){return t.Y})).max()}},{key:"InternalBottom",get:function(){return this.InternalPoints.map((function(t){return t.Y})).min()}},{key:"Left",get:function(){return this.Position.X+this.InternalLeft},set:function(t){this.Position.X=t-this.InternalLeft}},{key:"Right",get:function(){return this.Position.X+this.InternalRight},set:function(t){this.Position.X=t-this.InternalRight}},{key:"Top",get:function(){return this.Position.Y+this.InternalTop},set:function(t){this.Position.Y=t-this.InternalTop}},{key:"Bottom",get:function(){return this.Position.Y+this.InternalBottom},set:function(t){this.Position.Y=t-this.InternalBottom}},{key:"Width",get:function(){return this.InternalRight-this.InternalLeft}},{key:"Height",get:function(){return this.InternalTop-this.InternalBottom}},{key:"Rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.CW;this.Rotation+=t;var e=I[this.Type].Rotations.length-1;this.Rotation>=e&&(this.Rotation=0),this.Rotation<0&&(this.Rotation=e)}}])&&J(e.prototype,n),r&&J(e,r),t}();function tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const et=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),tt(this,"listeners",[]),tt(this,"listenersOncer",[]),tt(this,"on",(function(t){return e.listeners.push(t),{dispose:function(){return e.off(t)}}})),tt(this,"once",(function(t){e.listenersOncer.push(t)})),tt(this,"off",(function(t){var n=e.listeners.indexOf(t);n>-1&&e.listeners.splice(n,1)})),tt(this,"emit",(function(t){if(e.listeners.forEach((function(e){return e(t)})),e.listenersOncer.length>0){var n=e.listenersOncer;e.listenersOncer=[],n.forEach((function(e){return e(t)}))}})),tt(this,"pipe",(function(t){return e.on((function(e){return t.emit(e)}))}))};function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rt;!function(t){t[t.LineClear=0]="LineClear",t[t.TSpin=1]="TSpin",t[t.TSpinMini=2]="TSpinMini",t[t.PerfectClear=3]="PerfectClear"}(rt||(rt={}));const ot=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.LinesCleared=e,this.Type=n,this.Combo=r,this.BackToBack=o}var e,n,r;return e=t,(n=[{key:"Clone",value:function(){return new t(this.LinesCleared,this.Type,this.Combo,this.BackToBack)}}])&&nt(e.prototype,n),r&&nt(e,r),t}();function it(t){return t.Type===rt.LineClear&&t.LinesCleared>=4||t.Type===rt.TSpin||t.Type===rt.TSpinMini}function at(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ut(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,st(t,e,"get"))}function ft(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,st(t,e,"set"),n),n}function st(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var yt=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:j.None,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;pt(this,t),this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(j.None)})),o&&o.forEach((function(t,n){return t.forEach((function(t,r){return e.Grid[n][r]=t}))})),this.Falling=i?i.Clone():null,this.Hold=a,this.BlockHold=c,this.TicksElapsed=u,this.PieceQueue=n,this.PieceIndex=r,this.Combo=l,this.LastAchievement=f},ht=new WeakMap,vt=new WeakMap;const bt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:j.None,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(pt(this,t),ht.set(this,{writable:!0,value:void 0}),vt.set(this,{writable:!0,value:void 0}),e instanceof yt){var l=e;this.Grid=l.Grid,this.Falling=l.Falling,this.Hold=l.Hold,this.BlockHold=l.BlockHold,this.TicksElapsed=l.TicksElapsed,ft(this,ht,new $(l.PieceQueue,l.PieceIndex)),this.PieceIndex=l.PieceIndex,this.Combo=l.Combo,this.LastAchievement=l.LastAchievement}else this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(j.None)})),this.Falling=r,this.Hold=o,this.BlockHold=a,this.TicksElapsed=i,ft(this,ht,new $(e)),this.PieceIndex=n,this.Combo=u,this.LastAchievement=c;ft(this,vt,new et)}var e,n,r;return e=t,(n=[{key:"GetVisibleState",value:function(){return new yt(this.PieceQueue,this.PieceIndex,this.Grid,this.Falling,this.Hold,this.TicksElapsed,this.BlockHold,this.Combo)}},{key:"Achievement",get:function(){return lt(this,vt)}},{key:"GridWidth",get:function(){return 10}},{key:"GridHeight",get:function(){return 40}},{key:"PlayfieldHeight",get:function(){return 20}},{key:"PieceQueue",get:function(){return lt(this,ht).GetRange(this.PieceIndex,6)}},{key:"Get",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t instanceof A)e=t.X,n=t.Y;else{if(void 0===r)return null;e=t,n=r}return e<0||n<0||e>=10||n>=40?null:this.Grid[n][e]}},{key:"IsPieceValid",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?!e.Points.some((function(e){var n;return(null!==(n=t.Get(e))&&void 0!==n?n:j.I)!==j.None})):!this.Falling||!this.Falling.Points.some((function(e){var n;return(null!==(n=t.Get(e))&&void 0!==n?n:j.I)!==j.None}))}},{key:"DequeuePiece",value:function(){return null===this.Falling&&(this.Falling=Z.Spawn(lt(this,ht).Get(this.PieceIndex++),this.TicksElapsed),this.BlockHold=!1,!0)}},{key:"HoldPiece",value:function(){if(null===this.Falling)return!1;if(this.BlockHold)return!1;var t=this.Hold;return this.Hold=this.Falling.Type,t===j.None&&(t=lt(this,ht).Get(this.PieceIndex++)),this.Falling=Z.Spawn(t,this.TicksElapsed),this.BlockHold=!0,this.Falling.LastAction=p.Hold,!0}},{key:"ClearLines",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=0,o=null;if((null==n?void 0:n.Type)===j.T&&y(n.LastAction)){var i=[[0,0],[2,0],[0,2],[2,2]].reduce((function(t,r){var o=at(r,2),i=o[0],a=o[1];return e.Get(n.Position.X+i,n.Position.Y+a)!==j.None?t+1:t}),0);if(console.log("Corners: ",i),i>=3){var a=[[1,0],[0,1],[1,2],[2,1]].some((function(t){var r=at(t,2),o=r[0],i=r[1];return!n.InternalPoints.find((function(t){return t.X===o&&t.Y===i}))&&e.Get(n.Position.X+o,n.Position.Y+i)!==j.None}));o=a?rt.TSpinMini:rt.TSpin}}for(var u=0;u<this.GridHeight;u++)this.Grid[u].some((function(t){return t===j.None}))||(this.Grid.splice(u,1),this.Grid.push(new Array(this.GridWidth).fill(j.None)),r++,u--);if(0!==r||(this.Combo=0,null!==o)){var c=new ot(r,null!==(t=o)&&void 0!==t?t:rt.LineClear,this.Combo,!!this.LastAchievement&&it(this.LastAchievement));r>0&&this.Combo++,this.Grid.some((function(t){return t.some((function(t){return t!==j.None}))}))||(c.Type=rt.PerfectClear),c.BackToBack=it(c)&&c.BackToBack;var l=c.Clone();lt(this,vt).emit(c),this.LastAchievement=l}}},{key:"LockPiece",value:function(){var t=this;return null!==this.Falling&&!!this.IsPieceValid()&&(this.Falling.Points.forEach((function(e){var n,r;return t.Grid[e.Y][e.X]=null!==(n=null===(r=t.Falling)||void 0===r?void 0:r.Type)&&void 0!==n?n:j.None})),this.ClearLines(this.Falling),this.Falling=null,!0)}},{key:"RotatePiece",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.CW;if(null===this.Falling)return!1;var n=I[this.Falling.Type].WallKick[this.Falling.Rotation][e].find((function(n){var r,o=null===(r=t.Falling)||void 0===r?void 0:r.Clone();return!!o&&(o.Rotate(e),o.Position=o.Position.Add(n),t.IsPieceValid(o))}));return!!n&&(this.Falling.Rotate(e),this.Falling.Position=this.Falling.Position.Add(n),this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=e===E.CW?p.RotateCW:p.RotateCCW,!0)}},{key:"ShiftPiece",value:function(t){if(null===this.Falling)return!1;var e=this.Falling.Clone();return e.Position.X+=t,!!this.IsPieceValid(e)&&(this.Falling=e,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=t>0?p.ShiftRight:p.ShiftLeft,!0)}},{key:"CanPieceDrop",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)t=e.Clone();else{if(!this.Falling)return!1;t=this.Falling.Clone()}return t.Position.Y--,this.IsPieceValid(t)}},{key:"SoftDropPiece",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null!==this.Falling&&!!this.CanPieceDrop()&&(this.Falling.Position.Y--,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount=0,t?this.Falling.DropTick=this.TicksElapsed:this.Falling.LastAction=p.SoftDrop,!0)}},{key:"HardDropPiece",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)t=e;else{if(!this.Falling)return!1;t=this.Falling}for(var n=t.Position.Y;this.IsPieceValid(t);)t.Position.Y--;return t.Position.Y++,n!==t.Position.Y&&(t.LastAction=p.HardDrop),t!==this.Falling||this.LockPiece()}},{key:"Tick",value:function(){null===this.Falling?this.DequeuePiece():(this.TicksElapsed-this.Falling.DropTick>=15&&this.SoftDropPiece(!0),this.TicksElapsed-this.Falling.LastActionTick>=60&&!this.CanPieceDrop()&&this.LockPiece()),this.TicksElapsed++}}])&&ct(e.prototype,n),r&&ct(e,r),t}();var wt=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rt(t);if(e){var o=Rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ot(this,n)}}function Ot(t,e){return!e||"object"!==dt(e)&&"function"!=typeof e?Pt(t):e}function Pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _t(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ct(t,e,"get"))}function Tt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ct(t,e,"set"),n),n}function Ct(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var jt=new WeakMap,xt=new WeakMap,Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(i,t);var e,n,r,o=kt(i);function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return gt(this,i),e=o.call(this),jt.set(Pt(e),{writable:!0,value:void 0}),xt.set(Pt(e),{writable:!0,value:void 0}),Tt(Pt(e),jt,null),e.Player=t,e.State=n instanceof bt?n:new bt(n),Tt(Pt(e),xt,new et),e}return e=i,(n=[{key:"Input",get:function(){return _t(this,xt)}},{key:"ClockRunning",get:function(){return null!==_t(this,jt)}},{key:"StartClock",value:function(){Tt(this,jt,window.setInterval(this.Tick.bind(this),1e3/60))}},{key:"StopClock",value:function(){null!==_t(this,jt)&&window.clearInterval(_t(this,jt))}},{key:"Tick",value:function(){this.State.Tick();var t=this.Player.Tick(this.State.GetVisibleState()),e=!1;switch(t){case p.None:break;case p.HardDrop:e=this.State.HardDropPiece();break;case p.Hold:e=this.State.HoldPiece();break;case p.RotateCW:e=this.State.RotatePiece(E.CW);break;case p.RotateCCW:e=this.State.RotatePiece(E.CCW);break;case p.ShiftLeft:e=this.State.ShiftPiece(-1);break;case p.ShiftRight:e=this.State.ShiftPiece(1);break;case p.SoftDrop:e=this.State.SoftDropPiece(!1)}t!==p.None&&_t(this,xt).emit(new h(this.State.TicksElapsed,t,e))}}])&&mt(e.prototype,n),r&&mt(e,r),i}(wt),At=n(210),Bt=n.n(At);function Dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e,n){return(Lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ft(t,e){return(Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yt(t);if(e){var o=Yt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nt(this,n)}}function Nt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?Gt(t):e}function Gt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,zt(t,e,"get"))}function Kt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,zt(t,e,"set"),n),n}function zt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jt(t);if(e){var o=Jt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qt(this,n)}}function qt(t,e){return!e||"object"!==Ut(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jt(t){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zt,te,ee,ne,re,oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(n,t);var e=$t(n);function n(){return Vt(this,n),e.apply(this,arguments)}return n}((Zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"Tick",value:function(t){return p.None}}])&&Dt(e.prototype,n),r&&Dt(e,r),t}(),te=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(i,t);var e,n,r,o=Mt(i);function i(){var t;Wt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=o.call.apply(o,[this].concat(n)),te.set(Gt(t),{writable:!0,value:void 0}),Kt(Gt(t),te,[]),t}return e=i,(n=[{key:"Tick",value:function(t){var e;return"Update"in Zt?Lt(Yt(i.prototype),"Tick",this).call(this,t):null!==(e=Xt(this,te).shift())&&void 0!==e?e:p.None}},{key:"Update",value:function(t,e){var n;return e&&null!==(n=Xt(this,te).shift())&&void 0!==n?n:p.None}},{key:"Enqueue",value:function(t){Xt(this,te).push(t)}}])&&It(e.prototype,n),r&&It(e,r),i}(Zt)));function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function le(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=se(t);if(e){var o=se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fe(this,n)}}function fe(t,e){return!e||"object"!==ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pe(t){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function he(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=de(t);if(e){var o=de(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return we(this,n)}}function we(t,e){return!e||"object"!==pe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ke(t,e){return(ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Re(t);if(e){var o=Re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pe(this,n)}}function Pe(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Re(t){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _e(t,e){switch(e){case j.None:return t.color(50);case j.I:return t.color(77,208,225);case j.J:return t.color(33,150,243);case j.L:return t.color(255,152,0);case j.O:return t.color(253,216,53);case j.S:return t.color(76,175,80);case j.T:return t.color(224,64,251);case j.Z:return t.color(229,115,115)}}function Te(t,e,n,r,o,i){var a=_e(t,null!=e?e:j.None);a.setAlpha(i),t.fill(a),r.forEach((function(e){t.rect(n.X+e.X*o,n.Y+e.Y*o,o,o)}))}function Ce(t,e,n,r,o,i){t.push(),t.scale(1,-1),t.text(e,n,-r,o,void 0===i?i:-i),t.pop()}function je(t){return void 0!==Object.keys(ne).find((function(e){return e===t}))}function xe(t){return void 0!==Object.keys(re).find((function(e){return e===t}))}function Ee(t){if(t instanceof h)switch(t.Input){case p.None:return null;case p.HardDrop:return ee.Lock;case p.RotateCCW:case p.RotateCW:return t.Success?ee.RotateSuccess:ee.RotateFail;case p.ShiftLeft:case p.ShiftRight:return t.Success?ee.ShiftSuccess:ee.ShiftFail;case p.SoftDrop:return ee.SoftDrop;case p.Hold:return t.Success?ee.Hold:null}if(t instanceof ot){var e=[];if(t.Combo>0){var n="Combo".concat(Math.min(20,t.Combo));je(n)&&e.push(ne[n])}if(t.Type===rt.PerfectClear)return e.push(ne.PerfectClear),e;var r="";return t.BackToBack&&(r+="B2b"),t.Type===rt.TSpinMini?r+="TSpinMini":(t.Type===rt.TSpin&&(r+="TSpin"),1===t.LinesCleared?r+="Single":2===t.LinesCleared?r+="Double":3===t.LinesCleared?r+="Triple":4===t.LinesCleared&&(r+="Tetris")),je(r)&&e.push(ne[r]),e}return null}function Ae(t){if(t.Type===rt.PerfectClear)return re.PerfectClear;var e="";if(t.BackToBack&&(e+="B2b"),t.Type===rt.TSpinMini?e+="TSpinMini":(t.Type===rt.TSpin&&(e+="TSpin"),1===t.LinesCleared?e+="Single":2===t.LinesCleared?e+="Double":3===t.LinesCleared?e+="Triple":4===t.LinesCleared&&(e+="Tetris")),xe(e)&&"Single"!==e)return re[e];if(t.Combo>0){var n="Combo".concat(Math.min(5,t.Combo));if(xe(n))return re[n]}return null}function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function He(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function We(t,e,n){return(We="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ne(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ie(t,e){return(Ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Le(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ne(t);if(e){var o=Ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fe(this,n)}}function Fe(t,e){return!e||"object"!==Be(e)&&"function"!=typeof e?Me(t):e}function Me(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ne(t){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ge(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Xe(t,e,"get"))}function Ye(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Xe(t,e,"set"),n),n}function Xe(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ve(t,e,n){return(Ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ze(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Qe(t,e){return(Qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ze(t);if(e){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(t,e){return!e||"object"!==Ke(e)&&"function"!=typeof e?Je(t):e}function Je(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ze(t){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,nn(t,e,"get"))}function en(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,nn(t,e,"set"),n),n}function nn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function rn(t){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function on(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function an(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function un(t,e,n){return(un="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function cn(t,e){return(cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ln(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=pn(t);if(e){var o=pn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fn(this,n)}}function fn(t,e){return!e||"object"!==rn(e)&&"function"!=typeof e?sn(t):e}function sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pn(t){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,vn(t,e,"get"))}function hn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,vn(t,e,"set"),n),n}function vn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gn(t,e,n){return(gn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function mn(t,e){return(mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pn(t);if(e){var o=Pn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kn(this,n)}}function kn(t,e){return!e||"object"!==bn(e)&&"function"!=typeof e?On(t):e}function On(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pn(t){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Tn(t,e,"get"))}function _n(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Tn(t,e,"set"),n),n}function Tn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Cn(t){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function En(t,e,n){return(En="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function An(t,e){return(An=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Hn(t);if(e){var o=Hn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Dn(this,n)}}function Dn(t,e){return!e||"object"!==Cn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hn(t){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function In(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fn(t,e){return(Fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gn(t);if(e){var o=Gn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nn(this,n)}}function Nn(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.Lock="/assets/sfx/sfx_lockdown.wav",t.RotateSuccess="/assets/sfx/sfx_rotate.wav",t.RotateFail="/assets/sfx/sfx_rotatefail.wav",t.ShiftSuccess="/assets/sfx/sfx_move.wav",t.ShiftFail="/assets/sfx/sfx_movefail.wav",t.SoftDrop="/assets/sfx/sfx_softdrop.wav",t.Hold="/assets/sfx/sfx_hold.wav"}(ee||(ee={})),function(t){t.Single="/assets/sfx/sfx_single.wav",t.Double="/assets/sfx/sfx_double.wav",t.Triple="/assets/sfx/sfx_triple.wav",t.Tetris="/assets/sfx/sfx_tetris.wav",t.TSpin="/assets/sfx/sfx_tspin_zero.wav",t.TSpinMini="/assets/sfx/sfx_tspin_mini.wav",t.TSpinSingle="/assets/sfx/sfx_tspin_single.wav",t.TSpinDouble="/assets/sfx/sfx_tspin_double.wav",t.TSpinTriple="/assets/sfx/sfx_tspin_triple.wav",t.B2bTSpinMini="/assets/sfx/sfx_b2b_tspin_mini.wav",t.B2bTSpinSingle="/assets/sfx/sfx_b2b_tspin_single.wav",t.B2bTSpinDouble="/assets/sfx/sfx_b2b_tspin_double.wav",t.B2bTSpinTriple="/assets/sfx/sfx_b2b_tspin_triple.wav",t.B2bTetris="/assets/sfx/sfx_b2b_tetris.wav",t.PerfectClear="/assets/sfx/sfx_perfectclear.wav",t.Combo1="/assets/sfx/sfx_combo1.wav",t.Combo2="/assets/sfx/sfx_combo2.wav",t.Combo3="/assets/sfx/sfx_combo3.wav",t.Combo4="/assets/sfx/sfx_combo4.wav",t.Combo5="/assets/sfx/sfx_combo5.wav",t.Combo6="/assets/sfx/sfx_combo6.wav",t.Combo7="/assets/sfx/sfx_combo7.wav",t.Combo8="/assets/sfx/sfx_combo8.wav",t.Combo9="/assets/sfx/sfx_combo9.wav",t.Combo10="/assets/sfx/sfx_combo10.wav",t.Combo11="/assets/sfx/sfx_combo11.wav",t.Combo12="/assets/sfx/sfx_combo12.wav",t.Combo13="/assets/sfx/sfx_combo13.wav",t.Combo14="/assets/sfx/sfx_combo14.wav",t.Combo15="/assets/sfx/sfx_combo15.wav",t.Combo16="/assets/sfx/sfx_combo16.wav",t.Combo17="/assets/sfx/sfx_combo17.wav",t.Combo18="/assets/sfx/sfx_combo18.wav",t.Combo19="/assets/sfx/sfx_combo19.wav",t.Combo20="/assets/sfx/sfx_combo20.wav"}(ne||(ne={})),function(t){t.Single="/assets/voice/voice_single.wav",t.Double="/assets/voice/voice_double.wav",t.Triple="/assets/voice/voice_triple.wav",t.Tetris="/assets/voice/voice_tetris.wav",t.TSpin="/assets/voice/voice_tspin.wav",t.TSpinMini="/assets/voice/voice_tspinmini.wav",t.TSpinSingle="/assets/voice/voice_tspinsingle.wav",t.TSpinDouble="/assets/voice/voice_tspindouble.wav",t.TSpinTriple="/assets/voice/voice_tspintriple.wav",t.B2bTSpinMini="/assets/voice/voice_b2btspinmini.wav",t.B2bTSpinSingle="/assets/voice/voice_b2btspinsingle.wav",t.B2bTSpinDouble="/assets/voice/voice_b2btspindouble.wav",t.B2bTSpinTriple="/assets/voice/voice_b2btspintriple.wav",t.B2bTetris="/assets/voice/voice_b2btetris.wav",t.PerfectClear="/assets/voice/voice_perfectclear.wav",t.Combo1="/assets/voice/voice_combo01.wav",t.Combo2="/assets/voice/voice_combo02.wav",t.Combo3="/assets/voice/voice_combo03.wav",t.Combo4="/assets/voice/voice_combo04.wav",t.Combo5="/assets/voice/voice_combo05.wav"}(re||(re={}));var Yn=n(766);function Xn(t){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return zn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Un(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qn(t,e,n){return(Qn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function $n(t,e){return($n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tr(t);if(e){var o=tr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jn(this,n)}}function Jn(t,e){return!e||"object"!==Xn(e)&&"function"!=typeof e?Zn(t):e}function Zn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tr(t){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function er(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,rr(t,e,"get"))}function nr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,rr(t,e,"set"),n),n}function rr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function or(t){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ir(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ar(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ar(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lr(t,e,n){return(lr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function fr(t,e){return(fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hr(t);if(e){var o=hr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pr(this,n)}}function pr(t,e){return!e||"object"!==or(e)&&"function"!=typeof e?yr(t):e}function yr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hr(t){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,wr(t,e,"get"))}function br(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,wr(t,e,"set"),n),n}function wr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function dr(t){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return mr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Or(t,e,n){return(Or="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Pr(t,e){return(Pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Cr(t);if(e){var o=Cr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _r(this,n)}}function _r(t,e){return!e||"object"!==dr(e)&&"function"!=typeof e?Tr(t):e}function Tr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cr(t){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Er(t,e,"get"))}function xr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Er(t,e,"set"),n),n}function Er(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Br(t){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dr(t,e){return(Dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ir(t);if(e){var o=Ir(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wr(this,n)}}function Wr(t,e){return!e||"object"!==Br(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ir(t){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dr(t,e)}(n,t);var e=Hr(n);function n(t,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(i=r&&o?e.call(this,r,o):e.call(this)).ConfigureGameState(t.State),i.ConfigurePlayer(t.Player),i.ConfigureGame(t),i.ConfigureBlockSize(15),i.ConfigurePlayerSoundPlayable(),i.ConfigureAchievementSoundPlayable(),i.ConfigureAchievementVoicePlayable(),i.ConfigurePlayfieldDrawable(new A(120,0),new A(1,1)),i.ConfigureHoldPieceDrawable(new A(10,200),new A(1,1)),i.ConfigurePieceQueueDrawable(new A(400,0),new A(.7,.7)),i.ConfigureFramerateDrawable(new A(0,i.height-10),new A(1,1)),Wr(i)}return n}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mn(t,e)}(u,t);var r,o,i,a=Sn(u);function u(){var t;wn(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(On(t),{writable:!0,value:void 0}),n.set(On(t),{writable:!0,value:void 0}),_n(On(t),e,new A(0,0)),_n(On(t),n,new A(1,1)),t}return r=u,(o=[{key:"ConfigureFramerateDrawable",value:function(t,r){_n(this,e,t),_n(this,n,r)}},{key:"p5Draw",value:function(t){gn(Pn(u.prototype),"p5Draw",this).call(this,t),this.SetTransform(t,Rn(this,n).X,Rn(this,n).Y,Rn(this,e).X,Rn(this,e).Y),t.noStroke(),t.fill(0),Ce(t,"FPS: ".concat(t.frameRate().toFixed(2)),0,0)}}])&&dn(r.prototype,o),i&&dn(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cn(t,e)}(u,t);var r,o,i,a=ln(u);function u(){var t;on(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(sn(t),{writable:!0,value:void 0}),n.set(sn(t),{writable:!0,value:void 0}),hn(sn(t),e,new A(0,0)),hn(sn(t),n,new A(1,1)),t}return r=u,(o=[{key:"ConfigurePieceQueueDrawable",value:function(t,r){hn(this,e,t),hn(this,n,r)}},{key:"p5Draw",value:function(t){if(un(pn(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,yn(this,n).X,yn(this,n).Y,yn(this,e).X,yn(this,e).Y);for(var r=this.State,o=this.BlockSize,i=r.PieceQueue.length,a=0;a<i;a++){var c=L[r.PieceQueue[a]].Rotations[0].slice();Te(t,r.PieceQueue[a],new A(0,this.height-(a+1)*o*4),c,o,255)}}}}])&&an(r.prototype,o),i&&an(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qe(t,e)}(u,t);var r,o,i,a=$e(u);function u(){var t;ze(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Je(t),{writable:!0,value:void 0}),n.set(Je(t),{writable:!0,value:void 0}),en(Je(t),e,new A(0,0)),en(Je(t),n,new A(1,1)),t}return r=u,(o=[{key:"ConfigureHoldPieceDrawable",value:function(t,r){en(this,e,t),en(this,n,r)}},{key:"p5Draw",value:function(t){if(Ve(Ze(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,tn(this,n).X,tn(this,n).Y,tn(this,e).X,tn(this,e).Y);var r=this.State,o=this.BlockSize;if(t.fill(50),t.rect(0,0,5*o,6*o),t.noStroke(),t.fill(255),t.textAlign(t.CENTER),Ce(t,"HOLD",2.5*o,5*o),t.textAlign(t.LEFT),t.stroke(0),r.Hold){var i=L[r.Hold].Rotations[0].slice();Te(t,r.Hold,new A(o/2,o/2),i,o,255)}}}}])&&Ue(r.prototype,o),i&&Ue(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ie(t,e)}(u,t);var r,o,i,a=Le(u);function u(){var t;De(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Me(t),{writable:!0,value:void 0}),n.set(Me(t),{writable:!0,value:void 0}),Ye(Me(t),e,new A(0,0)),Ye(Me(t),n,new A(1,1)),t}return r=u,(o=[{key:"ConfigurePlayfieldDrawable",value:function(t,r){Ye(this,e,t),Ye(this,n,r)}},{key:"p5Draw",value:function(t){if(We(Ne(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,Ge(this,n).X,Ge(this,n).Y,Ge(this,e).X,Ge(this,e).Y);var r=this.State,o=this.BlockSize;if(r){t.stroke(0);for(var i=0;i<=r.GridHeight;i++)t.line(0,i*o,r.GridWidth*o,i*o);for(var a=0;a<=r.GridWidth;a++)t.line(a*o,0,a*o,r.GridHeight*o);for(var c=0;c<r.GridHeight;c++)for(var l=0;l<r.GridWidth;l++){var f;t.fill(_e(t,null!==(f=r.Get(l,c))&&void 0!==f?f:j.None)),t.rect(l*o,c*o,o,o)}if(r.Falling){var s,p,y=r.Falling.Points;Te(t,null===(s=r.Falling)||void 0===s?void 0:s.Type,new A(0,0),y,o,255);var h=r.Falling.Clone();r.HardDropPiece(h);var v=h.Points;Te(t,null===(p=r.Falling)||void 0===p?void 0:p.Type,new A(0,0),v,o,100)}}}}}])&&He(r.prototype,o),i&&He(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fr(t,e)}(u,t);var r,o,i,a=sr(u);function u(){var t;ur(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(yr(t),{writable:!0,value:void 0}),n.set(yr(t),{writable:!0,value:void 0}),br(yr(t),e,[]),br(yr(t),n,new Map),t}return r=u,(o=[{key:"ConfigureAchievementSoundPlayable",value:function(){var t=this;null!==this.State?this.State.Achievement.on((function(n){return vr(t,e).push(n)})):console.error("ConfigureAchievementSoundPlayable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var r=this;lr(hr(u.prototype),"p5Setup",this).call(this,t,e),Object.entries(ne).forEach((function(t){var e=ir(t,2)[1];return vr(r,n).set(e,new Yn.Howl({src:[e]}))}))}},{key:"p5Draw",value:function(t){var r=this;for(lr(hr(u.prototype),"p5Draw",this).call(this,t);vr(this,e).length>0;){var o=vr(this,e).shift();if(console.log(o),!o)break;var i=Ee(o);i&&(console.log(i),i.forEach((function(t){var e;return null===(e=vr(r,n).get(t))||void 0===e?void 0:e.play()})))}}}])&&cr(r.prototype,o),i&&cr(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pr(t,e)}(u,t);var r,o,i,a=Rr(u);function u(){var t;Sr(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Tr(t),{writable:!0,value:void 0}),n.set(Tr(t),{writable:!0,value:void 0}),xr(Tr(t),e,[]),xr(Tr(t),n,new Map),t}return r=u,(o=[{key:"ConfigureAchievementVoicePlayable",value:function(){var t=this;null!==this.State?this.State.Achievement.on((function(n){return jr(t,e).push(n)})):console.error("ConfigureAchievementVoicePlayable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var r=this;Or(Cr(u.prototype),"p5Setup",this).call(this,t,e),Object.entries(re).forEach((function(t){var e=gr(t,2)[1];return jr(r,n).set(e,new Yn.Howl({src:[e]}))}))}},{key:"p5Draw",value:function(t){for(Or(Cr(u.prototype),"p5Draw",this).call(this,t);jr(this,e).length>0;){var r,o=jr(this,e).shift();if(!o)break;var i=Ae(o);i&&(null===(r=jr(this,n).get(i))||void 0===r||r.play())}}}])&&kr(r.prototype,o),i&&kr(r,i),u}(t)}(function(t){var e,n,r;return e=new WeakMap,n=new WeakMap,r=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$n(t,e)}(c,t);var o,i,a,u=qn(c);function c(){var t;Un(this,c);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=u.call.apply(u,[this].concat(i)),e.set(Zn(t),{writable:!0,value:void 0}),n.set(Zn(t),{writable:!0,value:void 0}),r.set(Zn(t),{writable:!0,value:void 0}),nr(Zn(t),e,[]),nr(Zn(t),r,new Map),nr(Zn(t),n,null),t}return o=c,(i=[{key:"ConfigurePlayerSoundPlayable",value:function(){var t=this;null!==this.Game?this.Game.Input.on((function(n){return er(t,e).push(n)})):console.error("ConfigurePlayerSoundPlayable called before this.Game is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var n=this;Qn(tr(c.prototype),"p5Setup",this).call(this,t,e),Object.entries(ee).forEach((function(t){var e=Kn(t,2)[1];return er(n,r).set(e,new Yn.Howl({src:[e]}))}))}},{key:"p5Draw",value:function(t){for(Qn(tr(c.prototype),"p5Draw",this).call(this,t);er(this,e).length>0;){var o,i=er(this,e).shift(),a=er(this,n);if(nr(this,n,null!=i?i:null),!i)break;if(!(a&&i.Tick-a.Tick<=4&&i.Success===a.Success&&i.Input===a.Input)){var u=Ee(i);u&&(null===(o=er(this,r).get(u))||void 0===o||o.play())}}}}])&&Vn(o.prototype,i),a&&Vn(o,a),c}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fn(t,e)}(i,t);var e,n,r,o=Mn(i);function i(){var t;In(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).blockSize=15,t}return e=i,(n=[{key:"BlockSize",get:function(){return this.blockSize}},{key:"ConfigureBlockSize",value:function(t){this.blockSize=t}}])&&Ln(e.prototype,n),r&&Ln(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&An(t,e)}(i,t);var e,n,r,o=Bn(i);function i(){var t;jn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).keyHold=p.None,t.keyDelay=0,t}return e=i,(n=[{key:"p5Draw",value:function(t){En(Hn(i.prototype),"p5Draw",this).call(this,t),this.keyHold!==p.None&&this.Player instanceof oe&&(this.keyDelay<=0&&(this.Player.Enqueue(this.keyHold),this.keyDelay=3),this.keyDelay--)}},{key:"p5KeyPressed",value:function(t){this.Player instanceof oe&&(t.keyCode===t.LEFT_ARROW&&(this.keyHold=p.ShiftLeft),t.keyCode===t.RIGHT_ARROW&&(this.keyHold=p.ShiftRight),t.keyCode===t.UP_ARROW&&(this.keyHold=p.RotateCW),t.keyCode===t.CONTROL&&(this.keyHold=p.RotateCCW),t.keyCode===t.DOWN_ARROW&&(this.keyHold=p.SoftDrop),t.keyCode===t.SHIFT&&(this.keyHold=p.Hold)," "===t.key&&(this.keyHold=p.HardDrop),this.Player.Enqueue(this.keyHold),this.keyDelay=10)}},{key:"p5KeyReleased",value:function(t){if(this.Player instanceof oe){var e=p.None;t.keyCode===t.LEFT_ARROW&&(e=p.ShiftLeft),t.keyCode===t.RIGHT_ARROW&&(e=p.ShiftRight),t.keyCode===t.UP_ARROW&&(e=p.RotateCW),t.keyCode===t.CONTROL&&(e=p.RotateCCW),t.keyCode===t.DOWN_ARROW&&(e=p.SoftDrop),t.keyCode===t.SHIFT&&(e=p.Hold)," "===t.key&&(e=p.HardDrop),this.keyHold===e&&(this.keyHold=p.None)}}},{key:"KeyPressedHandler",get:function(){return this.p5KeyPressed.bind(this)}},{key:"KeyReleasedHandler",get:function(){return this.p5KeyReleased.bind(this)}}])&&xn(e.prototype,n),r&&xn(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ke(t,e)}(i,t);var e,n,r,o=Oe(i);function i(){var t;me(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).Game=null,t}return e=i,(n=[{key:"ConfigureGame",value:function(t){this.Game=t}}])&&Se(e.prototype,n),r&&Se(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(i,t);var e,n,r,o=be(i);function i(){var t;ye(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).Player=null,t}return e=i,(n=[{key:"ConfigurePlayer",value:function(t){this.Player=t}}])&&he(e.prototype,n),r&&he(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(i,t);var e,n,r,o=le(i);function i(){var t;ae(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).State=null,t}return e=i,(n=[{key:"ConfigureGameState",value:function(t){this.State=t}}])&&ue(e.prototype,n),r&&ue(e,r),i}(t)}(function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&n?(this.width=e,this.height=n):(this.width=500,this.height=301.5)}var e,n,r;return e=t,(n=[{key:"SetTransform",value:function(t,e,n,r,o){t.resetMatrix(),t.scale(e,-n),t.translate(r,-this.height+o)}},{key:"ResetTransform",value:function(t){this.SetTransform(t,1,1,0,0)}},{key:"p5Setup",value:function(t,e){t.createCanvas(this.width,this.height).parent(e),this.ResetTransform(t)}},{key:"p5Draw",value:function(t){t.background(100)}},{key:"DrawHandler",get:function(){return this.p5Draw.bind(this)}},{key:"SetupHandler",get:function(){return this.p5Setup.bind(this)}}])&&Ar(e.prototype,n),r&&Ar(e,r),t}())))))))))))));function Fr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Mr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Nr=function(t){var e=Fr((0,r.useState)(),2),n=(e[0],e[1]),o=Fr((0,r.useState)(),2),i=(o[0],o[1]),a=Fr((0,r.useState)(),2),u=a[0],c=a[1];return(0,r.useEffect)((function(){var t=new oe,e=new Et(t),r=new Lr(e);return n(t),i(e),c(r),setTimeout((function(){return e.StartClock()}),1e3),console.log(r),function(){e.StopClock()}}),[]),u?r.createElement(Bt(),{setup:u.SetupHandler,draw:u.DrawHandler,keyPressed:u.KeyPressedHandler,keyReleased:u.KeyReleasedHandler}):r.createElement("p",null,"Loading")};const Gr=function(){return r.createElement(i.UT,null,r.createElement(a.rs,null,r.createElement(a.AW,{exact:!0,path:"/",component:l}),r.createElement(a.AW,{exact:!0,path:"/test",component:Nr}),r.createElement(a.AW,{component:u})))};o.render(r.createElement(Gr,null),document.getElementById("app"))}},t=>{"use strict";var e;e=671,t(t.s=e)}]);