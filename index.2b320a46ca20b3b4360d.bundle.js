(self.webpackChunktetris_ai=self.webpackChunktetris_ai||[]).push([[826],{855:(t,e,n)=>{"use strict";var r=n(294),o=n(935),i=n(727),a=n(977);const u=function(t){return r.createElement("p",null,"Not found")};const c=function(){return r.createElement("div",{className:"flex flex-col justify-center items-center select-none min-h-screen bg-gradient-to-br from-gray-900  to-blue-700"},r.createElement("h1",{className:"text-6xl text-green-500 border-b-4 pb-4"},"Hello World !"),r.createElement("h2",{className:"text-2xl text-gray-300 mt-10"},"Click"," ",r.createElement(i.rU,{to:"/test",className:"text-green-400 underline"},"here")," ","to play pre-alpha Tetris"))};const l=function(t){return r.createElement(c,null)};var f;function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}!function(t){t[t.None=0]="None",t[t.SoftDrop=1]="SoftDrop",t[t.HardDrop=2]="HardDrop",t[t.Hold=3]="Hold",t[t.ShiftLeft=4]="ShiftLeft",t[t.ShiftRight=5]="ShiftRight",t[t.RotateCW=6]="RotateCW",t[t.RotateCCW=7]="RotateCCW"}(f||(f={}));const p=f;function h(t){return t===f.RotateCCW||t===f.RotateCW}var y=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Tick=e,this.Input=n,this.Success=r,this.Falling=o}var e,n,r;return e=t,(n=[{key:"Clone",value:function(){return new t(this.Tick,this.Input,this.Success,this.Falling)}}])&&s(e.prototype,n),r&&s(e,r),t}();function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b,w,d,g,m,S,k,O,P,T,C,R,_,j,x,E,A=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.X=e,this.Y=n}var e,n,r;return e=t,(n=[{key:"Add",value:function(e){return new t(this.X+e.X,this.Y+e.Y)}},{key:"Subtract",value:function(e){return new t(this.X-e.X,this.Y-e.Y)}},{key:"Clone",value:function(){return new t(this.X,this.Y)}}])&&v(e.prototype,n),r&&v(e,r),t}();function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.None=0]="None",t[t.I=1]="I",t[t.J=2]="J",t[t.L=3]="L",t[t.O=4]="O",t[t.S=5]="S",t[t.T=6]="T",t[t.Z=7]="Z"}(j||(j={})),function(t){t[t.R0=0]="R0",t[t.R90=1]="R90",t[t.R180=2]="R180",t[t.R270=3]="R270"}(x||(x={})),function(t){t[t.CW=1]="CW",t[t.CCW=-1]="CCW"}(E||(E={}));var B=Object.freeze([(b={},D(b,-1,[new A(0,0),new A(1,0),new A(1,1),new A(0,-2),new A(1,-2)]),D(b,1,[new A(0,0),new A(-1,0),new A(-1,1),new A(0,-2),new A(-1,-2)]),b),(w={},D(w,-1,[new A(0,0),new A(1,0),new A(1,-1),new A(0,2),new A(1,2)]),D(w,1,[new A(0,0),new A(1,0),new A(1,-1),new A(0,2),new A(1,2)]),w),(d={},D(d,-1,[new A(0,0),new A(-1,0),new A(-1,1),new A(0,-2),new A(-1,-2)]),D(d,1,[new A(0,0),new A(1,0),new A(1,1),new A(0,-2),new A(1,-2)]),d),(g={},D(g,-1,[new A(0,0),new A(-1,0),new A(-1,-1),new A(0,2),new A(-1,2)]),D(g,1,[new A(0,0),new A(-1,0),new A(-1,-1),new A(0,2),new A(-1,2)]),g)]),H=Object.freeze([(m={},D(m,-1,[new A(0,0),new A(-1,0),new A(2,0),new A(-1,2),new A(2,-1)]),D(m,1,[new A(0,0),new A(-2,0),new A(1,0),new A(-2,-1),new A(1,2)]),m),(S={},D(S,-1,[new A(0,0),new A(2,0),new A(-1,0),new A(2,1),new A(-1,-2)]),D(S,1,[new A(0,0),new A(-1,0),new A(2,0),new A(-1,2),new A(2,-1)]),S),(k={},D(k,-1,[new A(0,0),new A(1,0),new A(-2,0),new A(1,-2),new A(-2,1)]),D(k,1,[new A(0,0),new A(2,0),new A(-1,0),new A(2,1),new A(-1,-2)]),k),(O={},D(O,-1,[new A(0,0),new A(-2,0),new A(1,0),new A(-2,-1),new A(1,2)]),D(O,1,[new A(0,0),new A(1,0),new A(-2,0),new A(1,-2),new A(-2,1)]),O)]),W=Object.freeze([(P={},D(P,-1,[new A(0,0)]),D(P,1,[new A(0,0)]),P),(T={},D(T,-1,[new A(0,0)]),D(T,1,[new A(0,0)]),T),(C={},D(C,-1,[new A(0,0)]),D(C,1,[new A(0,0)]),C),(R={},D(R,-1,[new A(0,0)]),D(R,1,[new A(0,0)]),R)]),F=Object.freeze((D(_={},j.None,{Rotations:[[]],WallKick:W}),D(_,j.I,{Rotations:[[new A(0,2),new A(1,2),new A(2,2),new A(3,2)],[new A(2,0),new A(2,1),new A(2,2),new A(2,3)],[new A(0,1),new A(1,1),new A(2,1),new A(3,1)],[new A(1,0),new A(1,1),new A(1,2),new A(1,3)]],WallKick:H}),D(_,j.J,{Rotations:[[new A(0,2),new A(0,1),new A(1,1),new A(2,1)],[new A(2,2),new A(1,2),new A(1,1),new A(1,0)],[new A(0,1),new A(1,1),new A(2,1),new A(2,0)],[new A(0,0),new A(1,0),new A(1,1),new A(1,2)]],WallKick:B}),D(_,j.L,{Rotations:[[new A(0,1),new A(1,1),new A(2,1),new A(2,2)],[new A(1,2),new A(1,1),new A(1,0),new A(2,0)],[new A(0,0),new A(0,1),new A(1,1),new A(2,1)],[new A(0,2),new A(1,2),new A(1,1),new A(1,0)]],WallKick:B}),D(_,j.O,{Rotations:[[new A(0,0),new A(0,1),new A(1,0),new A(1,1)]],WallKick:W}),D(_,j.S,{Rotations:[[new A(0,1),new A(1,1),new A(1,2),new A(2,2)],[new A(1,2),new A(1,1),new A(2,1),new A(2,0)],[new A(0,0),new A(1,0),new A(1,1),new A(2,1)],[new A(0,2),new A(0,1),new A(1,1),new A(1,0)]],WallKick:B}),D(_,j.T,{Rotations:[[new A(0,1),new A(1,1),new A(1,2),new A(2,1)],[new A(1,2),new A(1,1),new A(2,1),new A(1,0)],[new A(0,1),new A(1,0),new A(1,1),new A(2,1)],[new A(1,2),new A(0,1),new A(1,1),new A(1,0)]],WallKick:B}),D(_,j.Z,{Rotations:[[new A(0,2),new A(1,1),new A(1,2),new A(2,1)],[new A(2,2),new A(1,1),new A(2,1),new A(1,0)],[new A(0,1),new A(1,0),new A(1,1),new A(2,0)],[new A(1,2),new A(0,1),new A(1,1),new A(0,0)]],WallKick:B}),_));const I=F;Array.prototype.max||Object.defineProperty(Array.prototype,"max",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var t=this.length,e=this[0];t--;)this[t]>e&&(e=this[t]);return e}}),Array.prototype.maxBy||Object.defineProperty(Array.prototype,"maxBy",{enumerable:!1,writable:!1,configurable:!1,value:function(t){for(var e=this.length,n=t(this[0]),r=this[0];e--;){var o=t(this[e]);o>n&&(n=o,r=this[e])}return r}}),Array.prototype.min||Object.defineProperty(Array.prototype,"min",{enumerable:!1,writable:!1,configurable:!1,value:function(){for(var t=this.length,e=this[0];t--;)this[t]<e&&(e=this[t]);return e}}),Array.prototype.minBy||Object.defineProperty(Array.prototype,"minBy",{enumerable:!1,writable:!1,configurable:!1,value:function(t){for(var e=this.length,n=t(this[0]),r=this[0];e--;){var o=t(this[e]);o<n&&(n=o,r=this[e])}return r}});const L=function(t){return function(){var e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}};function M(t){return function(t){if(Array.isArray(t))return G(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,K(t,e,"get"))}function z(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,K(t,e,"set"),n),n}function K(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var V=new WeakMap,U=new WeakMap,Q=new WeakMap,$=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(N(this,t),V.set(this,{writable:!0,value:void 0}),U.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),n instanceof Array)return z(this,U,null),z(this,Q,new Array(r+n.length).fill(j.None)),(e=X(this,Q)).splice.apply(e,[r,n.length].concat(M(n))),void z(this,V,null);z(this,U,void 0===n?Math.floor(Math.random()*Math.pow(2,32)):n),z(this,V,L(X(this,U))),z(this,Q,[])}var e,n,r;return e=t,(n=[{key:"Seed",get:function(){return X(this,U)}},{key:"generate",value:function(){if(null!==X(this,U)&&null!==X(this,V))for(var t=[j.I,j.J,j.L,j.O,j.S,j.T,j.Z];t.length>0;){var e=X(this,V).call(this)%t.length;X(this,Q).push(t.splice(e,1)[0])}else X(this,Q).push(j.None)}},{key:"Get",value:function(t){for(;X(this,Q).length<=t;)this.generate();return X(this,Q)[t]}},{key:"GetRange",value:function(t,e){for(;X(this,Q).length<=t+e;)this.generate();return X(this,Q).slice(t,t+e)}}])&&Y(e.prototype,n),r&&Y(e,r),t}();function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Z=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.R0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:NaN,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:p.None;q(this,t),this.Type=e,this.Rotation=n,r?this.Position=r:(this.Position=new A(4,21),this.Bottom=21,this.Left=Math.floor(5-this.Width/2)),this.LastActionTick=o,this.ActionCount=i,this.DropTick=a,this.LastAction=u}var e,n,r;return e=t,r=[{key:"Spawn",value:function(e,n){return new t(e,void 0,void 0,n,0,n)}}],(n=[{key:"Clone",value:function(){return new t(this.Type,this.Rotation,this.Position.Clone(),this.LastActionTick,this.ActionCount,this.DropTick,this.LastAction)}},{key:"InternalPoints",get:function(){return F[this.Type].Rotations[this.Rotation]}},{key:"Points",get:function(){var t=this;return F[this.Type].Rotations[this.Rotation].map((function(e){return e.Add(t.Position)}))}},{key:"InternalLeft",get:function(){return this.InternalPoints.map((function(t){return t.X})).min()}},{key:"InternalRight",get:function(){return this.InternalPoints.map((function(t){return t.X})).max()}},{key:"InternalTop",get:function(){return this.InternalPoints.map((function(t){return t.Y})).max()}},{key:"InternalBottom",get:function(){return this.InternalPoints.map((function(t){return t.Y})).min()}},{key:"Left",get:function(){return this.Position.X+this.InternalLeft},set:function(t){this.Position.X=t-this.InternalLeft}},{key:"Right",get:function(){return this.Position.X+this.InternalRight},set:function(t){this.Position.X=t-this.InternalRight}},{key:"Top",get:function(){return this.Position.Y+this.InternalTop},set:function(t){this.Position.Y=t-this.InternalTop}},{key:"Bottom",get:function(){return this.Position.Y+this.InternalBottom},set:function(t){this.Position.Y=t-this.InternalBottom}},{key:"Width",get:function(){return this.InternalRight-this.InternalLeft+1}},{key:"Height",get:function(){return this.InternalTop-this.InternalBottom+1}},{key:"Rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.CW;this.Rotation+=t;var e=F[this.Type].Rotations.length;this.Rotation>=e&&(this.Rotation=0),this.Rotation<0&&(this.Rotation=e-1)}}])&&J(e.prototype,n),r&&J(e,r),t}();function tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const et=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),tt(this,"listeners",[]),tt(this,"listenersOncer",[]),tt(this,"on",(function(t){return e.listeners.push(t),{dispose:function(){return e.off(t)}}})),tt(this,"once",(function(t){e.listenersOncer.push(t)})),tt(this,"off",(function(t){var n=e.listeners.indexOf(t);n>-1&&e.listeners.splice(n,1)})),tt(this,"emit",(function(t){if(e.listeners.forEach((function(e){return e(t)})),e.listenersOncer.length>0){var n=e.listenersOncer;e.listenersOncer=[],n.forEach((function(e){return e(t)}))}})),tt(this,"pipe",(function(t){return e.on((function(e){return t.emit(e)}))}))};function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rt;!function(t){t[t.LineClear=0]="LineClear",t[t.TSpin=1]="TSpin",t[t.TSpinMini=2]="TSpinMini",t[t.PerfectClear=3]="PerfectClear"}(rt||(rt={}));const ot=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.LinesCleared=e,this.Type=n,this.Combo=r,this.BackToBack=o}var e,n,r;return e=t,(n=[{key:"Clone",value:function(){return new t(this.LinesCleared,this.Type,this.Combo,this.BackToBack)}},{key:"Rating",get:function(){var t=Math.pow(1.1,this.LinesCleared.length);switch(this.Type){case rt.PerfectClear:t*=1.5;case rt.TSpin:t*=1.3;case rt.TSpinMini:t*=1.1}return this.BackToBack&&(t*=1.1),this.Combo&&(t*=Math.pow(1.05,this.Combo)),t}},{key:"toString",value:function(){var t="",e="";switch(this.Combo>0&&(t+="".concat(this.Combo," Combo ")),this.BackToBack&&(t+="Back-to-back "),this.Type){case rt.PerfectClear:e+="Perfect Clear ";break;case rt.TSpinMini:e+="T-Spin Mini ";break;case rt.TSpin:e+="T-Spin "}if(this.Type!==rt.PerfectClear)switch(this.LinesCleared.length){case 4:e+="Tetris ";break;case 3:e+="Triple ";break;case 2:e+="Double ";break;case 1:e+="Single "}return[t.trim(),e.trim()]}}])&&nt(e.prototype,n),r&&nt(e,r),t}();function it(t){return t.Type===rt.LineClear&&t.LinesCleared.length>=4||(t.Type===rt.TSpin||t.Type===rt.TSpinMini)&&t.LinesCleared.length>0}function at(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ut(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,st(t,e,"get"))}function ft(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,st(t,e,"set"),n),n}function st(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ht=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:j.None,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;pt(this,t),this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(j.None)})),o&&o.forEach((function(t,n){return t.forEach((function(t,r){return e.Grid[n][r]=t}))})),this.Falling=i?i.Clone():null,this.Hold=a,this.BlockHold=c,this.TicksElapsed=u,this.PieceQueue=n,this.PieceIndex=r,this.Combo=l,this.LastAchievement=f},yt=new WeakMap,vt=new WeakMap;const bt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:j.None,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(pt(this,t),yt.set(this,{writable:!0,value:void 0}),vt.set(this,{writable:!0,value:void 0}),e instanceof ht){var l=e;this.Grid=l.Grid,this.Falling=l.Falling,this.Hold=l.Hold,this.BlockHold=l.BlockHold,this.TicksElapsed=l.TicksElapsed,ft(this,yt,new $(l.PieceQueue,l.PieceIndex)),this.PieceIndex=l.PieceIndex,this.Combo=l.Combo,this.LastAchievement=l.LastAchievement}else this.Grid=new Array(40).fill(null).map((function(){return new Array(10).fill(j.None)})),this.Falling=r,this.Hold=o,this.BlockHold=a,this.TicksElapsed=i,ft(this,yt,new $(e)),this.PieceIndex=n,this.Combo=u,this.LastAchievement=c;ft(this,vt,new et)}var e,n,r;return e=t,(n=[{key:"GetVisibleState",value:function(){return new ht(this.PieceQueue,this.PieceIndex,this.Grid,this.Falling,this.Hold,this.TicksElapsed,this.BlockHold,this.Combo)}},{key:"Achievement",get:function(){return lt(this,vt)}},{key:"GridWidth",get:function(){return 10}},{key:"GridHeight",get:function(){return 40}},{key:"PlayfieldHeight",get:function(){return 20}},{key:"PieceQueue",get:function(){return lt(this,yt).GetRange(this.PieceIndex,6)}},{key:"Get",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t instanceof A)e=t.X,n=t.Y;else{if(void 0===r)return null;e=t,n=r}return e<0||n<0||e>=10||n>=40?null:this.Grid[n][e]}},{key:"IsPieceValid",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?!e.Points.some((function(e){var n;return(null!==(n=t.Get(e))&&void 0!==n?n:j.I)!==j.None})):!this.Falling||!this.Falling.Points.some((function(e){var n;return(null!==(n=t.Get(e))&&void 0!==n?n:j.I)!==j.None}))}},{key:"DequeuePiece",value:function(){return null===this.Falling&&(this.Falling=Z.Spawn(lt(this,yt).Get(this.PieceIndex++),this.TicksElapsed),this.BlockHold=!1,!0)}},{key:"HoldPiece",value:function(){if(null===this.Falling)return!1;if(this.BlockHold)return!1;var t=this.Hold;return this.Hold=this.Falling.Type,t===j.None&&(t=lt(this,yt).Get(this.PieceIndex++)),this.Falling=Z.Spawn(t,this.TicksElapsed),this.BlockHold=!0,this.Falling.LastAction=p.Hold,!0}},{key:"ClearLines",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=[],o=null;if((null==n?void 0:n.Type)===j.T&&h(n.LastAction)){var i=[[0,0],[2,0],[0,2],[2,2]].reduce((function(t,r){var o=at(r,2),i=o[0],a=o[1];return e.Get(n.Position.X+i,n.Position.Y+a)!==j.None?t+1:t}),0);if(i>=3){var a=[[1,0],[0,1],[1,2],[2,1]].some((function(t){var r=at(t,2),o=r[0],i=r[1];return!n.InternalPoints.find((function(t){return t.X===o&&t.Y===i}))&&e.Get(n.Position.X+o,n.Position.Y+i)!==j.None}));o=a?rt.TSpinMini:rt.TSpin}}for(var u=this.GridHeight-1;u>=0;u--)this.Grid[u].some((function(t){return t===j.None}))||(this.Grid.splice(u,1),this.Grid.push(new Array(this.GridWidth).fill(j.None)),r.push(u));if(0!==r.length||(this.Combo=0,null!==o)){var c=new ot(r,null!==(t=o)&&void 0!==t?t:rt.LineClear,this.Combo,!!this.LastAchievement&&it(this.LastAchievement));r.length>0&&this.Combo++,this.Grid.some((function(t){return t.some((function(t){return t!==j.None}))}))||(c.Type=rt.PerfectClear),c.BackToBack=it(c)&&c.BackToBack;var l=c.Clone();lt(this,vt).emit(c),this.LastAchievement=l}}},{key:"LockPiece",value:function(){var t=this;return null!==this.Falling&&!!this.IsPieceValid()&&(this.Falling.Points.forEach((function(e){var n,r;return t.Grid[e.Y][e.X]=null!==(n=null===(r=t.Falling)||void 0===r?void 0:r.Type)&&void 0!==n?n:j.None})),this.ClearLines(this.Falling),this.Falling=null,!0)}},{key:"RotatePiece",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.CW;if(null===this.Falling)return!1;var n=F[this.Falling.Type].WallKick[this.Falling.Rotation][e].find((function(n){var r,o=null===(r=t.Falling)||void 0===r?void 0:r.Clone();return!!o&&(o.Rotate(e),o.Position=o.Position.Add(n),t.IsPieceValid(o))}));return!!n&&(this.Falling.Rotate(e),this.Falling.Position=this.Falling.Position.Add(n),this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=e===E.CW?p.RotateCW:p.RotateCCW,!0)}},{key:"ShiftPiece",value:function(t){if(null===this.Falling)return!1;var e=this.Falling.Clone();return e.Position.X+=t,!!this.IsPieceValid(e)&&(this.Falling=e,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount++,this.Falling.LastAction=t>0?p.ShiftRight:p.ShiftLeft,!0)}},{key:"CanPieceDrop",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)t=e.Clone();else{if(!this.Falling)return!1;t=this.Falling.Clone()}return t.Position.Y--,this.IsPieceValid(t)}},{key:"SoftDropPiece",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null!==this.Falling&&!!this.CanPieceDrop()&&(this.Falling.Position.Y--,this.Falling.LastActionTick=this.TicksElapsed,this.Falling.ActionCount=0,t?this.Falling.DropTick=this.TicksElapsed:this.Falling.LastAction=p.SoftDrop,!0)}},{key:"HardDropPiece",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)t=e;else{if(!this.Falling)return!1;t=this.Falling}for(var n=t.Position.Y;this.IsPieceValid(t);)t.Position.Y--;return t.Position.Y++,n!==t.Position.Y&&(t.LastAction=p.HardDrop),t!==this.Falling||this.LockPiece()}},{key:"Tick",value:function(){null===this.Falling?this.DequeuePiece():(this.TicksElapsed-this.Falling.DropTick>=15&&this.SoftDropPiece(!0),this.TicksElapsed-this.Falling.LastActionTick>=60&&!this.CanPieceDrop()&&this.LockPiece()),this.TicksElapsed++}}])&&ct(e.prototype,n),r&&ct(e,r),t}();var wt=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tt(t);if(e){var o=Tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ot(this,n)}}function Ot(t,e){return!e||"object"!==dt(e)&&"function"!=typeof e?Pt(t):e}function Pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ct(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,_t(t,e,"get"))}function Rt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,_t(t,e,"set"),n),n}function _t(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var jt=new WeakMap,xt=new WeakMap,Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(i,t);var e,n,r,o=kt(i);function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return gt(this,i),e=o.call(this),jt.set(Pt(e),{writable:!0,value:void 0}),xt.set(Pt(e),{writable:!0,value:void 0}),Rt(Pt(e),jt,null),e.Player=t,e.State=n instanceof bt?n:new bt(n),Rt(Pt(e),xt,new et),e}return e=i,(n=[{key:"Input",get:function(){return Ct(this,xt)}},{key:"ClockRunning",get:function(){return null!==Ct(this,jt)}},{key:"StartClock",value:function(){Rt(this,jt,window.setInterval(this.Tick.bind(this),1e3/60))}},{key:"StopClock",value:function(){null!==Ct(this,jt)&&window.clearInterval(Ct(this,jt))}},{key:"Tick",value:function(){this.State.Tick();var t=this.Player.Tick(this.State.GetVisibleState()),e=this.State.Falling,n=!1;switch(t){case p.None:break;case p.HardDrop:n=this.State.HardDropPiece();break;case p.Hold:n=this.State.HoldPiece();break;case p.RotateCW:n=this.State.RotatePiece(E.CW);break;case p.RotateCCW:n=this.State.RotatePiece(E.CCW);break;case p.ShiftLeft:n=this.State.ShiftPiece(-1);break;case p.ShiftRight:n=this.State.ShiftPiece(1);break;case p.SoftDrop:n=this.State.SoftDropPiece(!1)}t!==p.None&&Ct(this,xt).emit(new y(this.State.TicksElapsed,t,n,e))}}])&&mt(e.prototype,n),r&&mt(e,r),i}(wt),At=n(210),Dt=n.n(At);function Bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function It(t,e,n){return(It="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yt(t);if(e){var o=Yt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gt(this,n)}}function Gt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?Nt(t):e}function Nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Kt(t,e,"get"))}function zt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Kt(t,e,"set"),n),n}function Kt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Vt(t){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jt(t);if(e){var o=Jt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qt(this,n)}}function qt(t,e){return!e||"object"!==Vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jt(t){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zt,te,ee=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(n,t);var e=$t(n);function n(){return Ut(this,n),e.apply(this,arguments)}return n}((Zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"Tick",value:function(t){return p.None}}])&&Bt(e.prototype,n),r&&Bt(e,r),t}(),te=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(i,t);var e,n,r,o=Mt(i);function i(){var t;Wt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=o.call.apply(o,[this].concat(n)),te.set(Nt(t),{writable:!0,value:void 0}),zt(Nt(t),te,[]),t}return e=i,(n=[{key:"Tick",value:function(t){var e;return"Update"in Zt?It(Yt(i.prototype),"Tick",this).call(this,t):null!==(e=Xt(this,te).shift())&&void 0!==e?e:p.None}},{key:"Update",value:function(t,e){var n;return e&&null!==(n=Xt(this,te).shift())&&void 0!==n?n:p.None}},{key:"Enqueue",value:function(t){Xt(this,te).push(t)}}])&&Ft(e.prototype,n),r&&Ft(e,r),i}(Zt)));function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ce(t);if(e){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(t,e){return!e||"object"!==ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ce(t){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pe(t,e){return(pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function he(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ve(t);if(e){var o=ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(t,e){return!e||"object"!==le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function we(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function me(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ke(t);if(e){var o=ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(t,e){return!e||"object"!==be(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Te,Ce,Re,_e=function(){function t(e,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.Linear;Oe(this,t),this.From=e,this.To=n,this.Duration=r,this.Data=o,this.Elapsed=i,this.EasingFunction=a}var e,n,r;return e=t,r=[{key:"Linear",value:function(t){return t}},{key:"EaseOutQuint",value:function(t){return 1-Math.pow(1-t,5)}},{key:"EaseInOutSine",value:function(t){return-(Math.cos(Math.PI*t)-1)/2}},{key:"RevertingFunction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.EaseInOutSine,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;return function(t){return t<=n?e(t/n):t>=1-n?e((1-t)/n):1}}}],(n=[{key:"CurrentValue",get:function(){return this.From+(this.To-this.From)*this.EasingFunction(this.Elapsed/this.Duration)}},{key:"Finished",get:function(){return this.Elapsed>=this.Duration}},{key:"Tick",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.Elapsed+=t}}])&&Pe(e.prototype,n),r&&Pe(e,r),t}();function je(t){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ae(t,e,n){return(Ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=We(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=We(t);if(e){var o=We(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return He(this,n)}}function He(t,e){return!e||"object"!==je(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function We(t){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fe(t){return"ConfigurePlayfieldAnimatable"in t}function Ie(t,e){return t.setAlpha(e),t}function Le(t,e){switch(e){case j.None:return t.color(50);case j.I:return t.color(77,208,225);case j.J:return t.color(33,150,243);case j.L:return t.color(255,152,0);case j.O:return t.color(253,216,53);case j.S:return t.color(76,175,80);case j.T:return t.color(224,64,251);case j.Z:return t.color(229,115,115)}}function Me(t,e,n,r,o,i){t.fill(Ie(Le(t,null!=e?e:j.None),i)),r.forEach((function(e){t.rect(n.X+e.X*o,n.Y+e.Y*o,o,o)}))}function Ge(t,e,n,r,o,i){t.push(),t.scale(1,-1),t.text(e,n,-r,o,void 0===i?i:-i),t.pop()}function Ne(t){return void 0!==Object.keys(Ce).find((function(e){return e===t}))}function Ye(t){return void 0!==Object.keys(Re).find((function(e){return e===t}))}function Xe(t){if(t instanceof y)switch(t.Input){case p.None:return null;case p.HardDrop:return Te.Lock;case p.RotateCCW:case p.RotateCW:return t.Success?Te.RotateSuccess:Te.RotateFail;case p.ShiftLeft:case p.ShiftRight:return t.Success?Te.ShiftSuccess:Te.ShiftFail;case p.SoftDrop:return Te.SoftDrop;case p.Hold:return t.Success?Te.Hold:null}if(t instanceof ot){var e=[];if(t.Combo>0){var n="Combo".concat(Math.min(20,t.Combo));Ne(n)&&e.push(Ce[n])}if(t.Type===rt.PerfectClear)return e.push(Ce.PerfectClear),e;var r="";return t.BackToBack&&(r+="B2b"),t.Type===rt.TSpinMini?r+="TSpinMini":(t.Type===rt.TSpin&&(r+="TSpin"),1===t.LinesCleared.length?r+="Single":2===t.LinesCleared.length?r+="Double":3===t.LinesCleared.length?r+="Triple":4===t.LinesCleared.length&&(r+="Tetris")),(Ne(r)||r.startsWith("B2b")&&Ne(r=r.substr(3)))&&e.push(Ce[r]),e}return null}function ze(t){if(t.Type===rt.PerfectClear)return Re.PerfectClear;var e="";if(t.BackToBack&&(e+="B2b"),t.Type===rt.TSpinMini?e+="TSpinMini":(t.Type===rt.TSpin&&(e+="TSpin"),1===t.LinesCleared.length?e+="Single":2===t.LinesCleared.length?e+="Double":3===t.LinesCleared.length?e+="Triple":4===t.LinesCleared.length&&(e+="Tetris")),Ye(e)&&"Single"!==e)return Re[e];if(e.startsWith("B2b")&&Ye(e=e.substr(3)))return Re[e];if(t.Combo>0){var n="Combo".concat(Math.min(5,t.Combo));if(Ye(n))return Re[n]}return null}function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qe(t,e,n){return(Qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function $e(t,e){return($e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tn(t);if(e){var o=tn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Je(this,n)}}function Je(t,e){return!e||"object"!==Ke(e)&&"function"!=typeof e?Ze(t):e}function Ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tn(t){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function en(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,rn(t,e,"get"))}function nn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,rn(t,e,"set"),n),n}function rn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function an(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cn(t,e,n){return(cn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ln(t,e){return(ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hn(t);if(e){var o=hn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sn(this,n)}}function sn(t,e){return!e||"object"!==on(e)&&"function"!=typeof e?pn(t):e}function pn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hn(t){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,bn(t,e,"get"))}function vn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,bn(t,e,"set"),n),n}function bn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function wn(t){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mn(t,e,n){return(mn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Sn(t,e){return(Sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tn(t);if(e){var o=Tn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return On(this,n)}}function On(t,e){return!e||"object"!==wn(e)&&"function"!=typeof e?Pn(t):e}function Pn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tn(t){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,_n(t,e,"get"))}function Rn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,_n(t,e,"set"),n),n}function _n(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function En(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function An(t,e,n){return(An="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Dn(t,e){return(Dn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fn(t);if(e){var o=Fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hn(this,n)}}function Hn(t,e){return!e||"object"!==jn(e)&&"function"!=typeof e?Wn(t):e}function Wn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function In(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Mn(t,e,"get"))}function Ln(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Mn(t,e,"set"),n),n}function Mn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Gn(t){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xn(t,e,n){return(Xn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Un(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function zn(t,e){return(zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Un(t);if(e){var o=Un(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vn(this,n)}}function Vn(t,e){return!e||"object"!==Gn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Un(t){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qn(t){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jn(t,e){return(Jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=er(t);if(e){var o=er(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tr(this,n)}}function tr(t,e){return!e||"object"!==Qn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function er(t){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.Lock="/assets/sfx/sfx_lockdown.wav",t.RotateSuccess="/assets/sfx/sfx_rotate.wav",t.RotateFail="/assets/sfx/sfx_rotatefail.wav",t.ShiftSuccess="/assets/sfx/sfx_move.wav",t.ShiftFail="/assets/sfx/sfx_movefail.wav",t.SoftDrop="/assets/sfx/sfx_softdrop.wav",t.Hold="/assets/sfx/sfx_hold.wav"}(Te||(Te={})),function(t){t.Single="/assets/sfx/sfx_single.wav",t.Double="/assets/sfx/sfx_double.wav",t.Triple="/assets/sfx/sfx_triple.wav",t.Tetris="/assets/sfx/sfx_tetris.wav",t.TSpin="/assets/sfx/sfx_tspin_zero.wav",t.TSpinMini="/assets/sfx/sfx_tspin_mini.wav",t.TSpinSingle="/assets/sfx/sfx_tspin_single.wav",t.TSpinDouble="/assets/sfx/sfx_tspin_double.wav",t.TSpinTriple="/assets/sfx/sfx_tspin_triple.wav",t.B2bTSpinMini="/assets/sfx/sfx_b2b_tspin_mini.wav",t.B2bTSpinSingle="/assets/sfx/sfx_b2b_tspin_single.wav",t.B2bTSpinDouble="/assets/sfx/sfx_b2b_tspin_double.wav",t.B2bTSpinTriple="/assets/sfx/sfx_b2b_tspin_triple.wav",t.B2bTetris="/assets/sfx/sfx_b2b_tetris.wav",t.PerfectClear="/assets/sfx/sfx_perfectclear.wav",t.Combo1="/assets/sfx/sfx_combo1.wav",t.Combo2="/assets/sfx/sfx_combo2.wav",t.Combo3="/assets/sfx/sfx_combo3.wav",t.Combo4="/assets/sfx/sfx_combo4.wav",t.Combo5="/assets/sfx/sfx_combo5.wav",t.Combo6="/assets/sfx/sfx_combo6.wav",t.Combo7="/assets/sfx/sfx_combo7.wav",t.Combo8="/assets/sfx/sfx_combo8.wav",t.Combo9="/assets/sfx/sfx_combo9.wav",t.Combo10="/assets/sfx/sfx_combo10.wav",t.Combo11="/assets/sfx/sfx_combo11.wav",t.Combo12="/assets/sfx/sfx_combo12.wav",t.Combo13="/assets/sfx/sfx_combo13.wav",t.Combo14="/assets/sfx/sfx_combo14.wav",t.Combo15="/assets/sfx/sfx_combo15.wav",t.Combo16="/assets/sfx/sfx_combo16.wav",t.Combo17="/assets/sfx/sfx_combo17.wav",t.Combo18="/assets/sfx/sfx_combo18.wav",t.Combo19="/assets/sfx/sfx_combo19.wav",t.Combo20="/assets/sfx/sfx_combo20.wav"}(Ce||(Ce={})),function(t){t.Single="/assets/voice/voice_single.wav",t.Double="/assets/voice/voice_double.wav",t.Triple="/assets/voice/voice_triple.wav",t.Tetris="/assets/voice/voice_tetris.wav",t.TSpin="/assets/voice/voice_tspin.wav",t.TSpinMini="/assets/voice/voice_tspinmini.wav",t.TSpinSingle="/assets/voice/voice_tspinsingle.wav",t.TSpinDouble="/assets/voice/voice_tspindouble.wav",t.TSpinTriple="/assets/voice/voice_tspintriple.wav",t.B2bTSpinMini="/assets/voice/voice_b2btspinmini.wav",t.B2bTSpinSingle="/assets/voice/voice_b2btspinsingle.wav",t.B2bTSpinDouble="/assets/voice/voice_b2btspindouble.wav",t.B2bTSpinTriple="/assets/voice/voice_b2btspintriple.wav",t.B2bTetris="/assets/voice/voice_b2btetris.wav",t.PerfectClear="/assets/voice/voice_perfectclear.wav",t.Combo1="/assets/voice/voice_combo01.wav",t.Combo2="/assets/voice/voice_combo02.wav",t.Combo3="/assets/voice/voice_combo03.wav",t.Combo4="/assets/voice/voice_combo04.wav",t.Combo5="/assets/voice/voice_combo05.wav"}(Re||(Re={}));var nr=n(766);function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ir(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ar(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cr(t,e,n){return(cr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function lr(t,e){return(lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hr(t);if(e){var o=hr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sr(this,n)}}function sr(t,e){return!e||"object"!==rr(e)&&"function"!=typeof e?pr(t):e}function pr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hr(t){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,br(t,e,"get"))}function vr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,br(t,e,"set"),n),n}function br(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function wr(t){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return gr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kr(t,e,n){return(kr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Or(t,e){return(Or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rr(t);if(e){var o=Rr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tr(this,n)}}function Tr(t,e){return!e||"object"!==wr(e)&&"function"!=typeof e?Cr(t):e}function Cr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rr(t){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _r(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,xr(t,e,"get"))}function jr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,xr(t,e,"set"),n),n}function xr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Er(t){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ar(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Dr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wr(t,e,n){return(Wr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Fr(t,e){return(Fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ir(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gr(t);if(e){var o=Gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lr(this,n)}}function Lr(t,e){return!e||"object"!==Er(e)&&"function"!=typeof e?Mr(t):e}function Mr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gr(t){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Xr(t,e,"get"))}function Yr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Xr(t,e,"set"),n),n}function Xr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function zr(t){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Vr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $r(t,e,n){return($r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eo(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function qr(t,e){return(qr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eo(t);if(e){var o=eo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zr(this,n)}}function Zr(t,e){return!e||"object"!==zr(e)&&"function"!=typeof e?to(t):e}function to(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eo(t){return(eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function no(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,oo(t,e,"get"))}function ro(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,oo(t,e,"set"),n),n}function oo(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function io(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ao(t){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uo(t,e){return(uo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function co(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fo(t);if(e){var o=fo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return lo(this,n)}}function lo(t,e){return!e||"object"!==ao(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fo(t){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var so=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uo(t,e)}(n,t);var e=co(n);function n(t,r,o){var i,a,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(u=r&&o?e.call(this,r,o):e.call(this)).ConfigureGameState(t.State),u.ConfigurePlayer(t.Player),u.ConfigureGame(t),u.ConfigureBlockSize(20),u.ConfigurePlayfieldAnimatable(),u.ConfigurePlayerSfxPlayable(),u.ConfigureAchievementSfxPlayable(),u.ConfigureAchievementVoicePlayable(),u.ConfigureAchievementTextDrawable(new A(11*u.BlockSize,u.BlockSize*((null!==(i=null===(a=u.State)||void 0===a?void 0:a.PlayfieldHeight)&&void 0!==i?i:20)+1)),new A(1,1)),u.ConfigurePlayfieldDrawable(new A(6*u.BlockSize,0),new A(1,1)),u.ConfigureHoldPieceDrawable(new A(10,200),new A(1,1)),u.ConfigurePieceQueueDrawable(new A(17*u.BlockSize,100),new A(.7,.7)),u.ConfigureFramerateDrawable(new A(0,u.height-10),new A(1,1)),lo(u)}return n}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dn(t,e)}(u,t);var r,o,i,a=Bn(u);function u(){var t;xn(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Wn(t),{writable:!0,value:void 0}),n.set(Wn(t),{writable:!0,value:void 0}),Ln(Wn(t),e,new A(0,0)),Ln(Wn(t),n,new A(1,1)),t}return r=u,(o=[{key:"ConfigureFramerateDrawable",value:function(t,r){Ln(this,e,t),Ln(this,n,r)}},{key:"p5Draw",value:function(t){An(Fn(u.prototype),"p5Draw",this).call(this,t),this.SetTransform(t,In(this,n).X,In(this,n).Y,In(this,e).X,In(this,e).Y),t.noStroke(),t.fill(0),Ge(t,"FPS: ".concat(t.frameRate().toFixed(2)),0,0)}}])&&En(r.prototype,o),i&&En(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sn(t,e)}(u,t);var r,o,i,a=kn(u);function u(){var t;dn(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Pn(t),{writable:!0,value:void 0}),n.set(Pn(t),{writable:!0,value:void 0}),Rn(Pn(t),e,new A(0,0)),Rn(Pn(t),n,new A(1,1)),t}return r=u,(o=[{key:"ConfigurePieceQueueDrawable",value:function(t,r){Rn(this,e,t),Rn(this,n,r)}},{key:"p5Draw",value:function(t){if(mn(Tn(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,Cn(this,n).X,Cn(this,n).Y,Cn(this,e).X,Cn(this,e).Y);for(var r=this.State,o=this.BlockSize,i=0,a=r.PieceQueue.length-1;a>=0;a--){var c=I[r.PieceQueue[a]].Rotations[0].slice(),l=c.map((function(t){return t.X})),f=c.map((function(t){return t.Y})),s=f.max()-f.min()+1,p=l.max()-l.min()+1;Me(t,r.PieceQueue[a],new A((2-p/2)*o,i-f.min()*o),c,o,255),i+=(s+1)*o}}}}])&&gn(r.prototype,o),i&&gn(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ln(t,e)}(u,t);var r,o,i,a=fn(u);function u(){var t;an(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(pn(t),{writable:!0,value:void 0}),n.set(pn(t),{writable:!0,value:void 0}),vn(pn(t),e,new A(0,0)),vn(pn(t),n,new A(1,1)),t}return r=u,(o=[{key:"ConfigureHoldPieceDrawable",value:function(t,r){vn(this,e,t),vn(this,n,r)}},{key:"p5Draw",value:function(t){if(cn(hn(u.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,yn(this,n).X,yn(this,n).Y,yn(this,e).X,yn(this,e).Y);var r=this.State,o=this.BlockSize;if(t.fill(50),t.rect(0,0,5*o,6*o),t.noStroke(),t.fill(255),t.textAlign(t.CENTER),t.textSize(15),Ge(t,"HOLD",2.5*o,5*o),t.textAlign(t.LEFT),t.stroke(0),r.Hold){var i=I[r.Hold].Rotations[0].slice(),a=i.map((function(t){return t.X})),c=i.map((function(t){return t.Y})),l=a.max()-a.min()+1,f=c.max()-c.min()+1;Me(t,r.Hold,new A((2.5-l/2)*o,(2.5-f/2-c.min())*o),i,o,255)}}}}])&&un(r.prototype,o),i&&un(r,i),u}(t)}(function(t){var e,n,r;return e=new WeakMap,n=new WeakMap,r=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$e(t,e)}(c,t);var o,i,a,u=qe(c);function c(){var t;Ve(this,c);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=u.call.apply(u,[this].concat(i)),e.set(Ze(t),{writable:!0,value:void 0}),n.set(Ze(t),{writable:!0,value:void 0}),r.set(Ze(t),{writable:!0,value:void 0}),nn(Ze(t),e,new A(0,0)),nn(Ze(t),n,new A(1,1)),nn(Ze(t),r,null),t}return o=c,(i=[{key:"ConfigurePlayfieldDrawable",value:function(t,r){nn(this,e,t),nn(this,n,r)}},{key:"p5Setup",value:function(t,e){Qe(tn(c.prototype),"p5Setup",this).call(this,t,e),this.State&&nn(this,r,t.createGraphics(this.State.GridWidth*this.BlockSize,(this.State.PlayfieldHeight+.1)*this.BlockSize))}},{key:"p5Draw",value:function(t){var o=this;if(Qe(tn(c.prototype),"p5Draw",this).call(this,t),null!==this.State){this.SetTransform(t,en(this,n).X,en(this,n).Y,en(this,e).X,en(this,e).Y);var i=this.State,a=this.BlockSize;if(en(this,r)){var u=en(this,r);if(i){u.background(50),u.stroke(0,0,0,100);for(var l=0;l<=i.GridHeight;l++)u.line(0,l*a,i.GridWidth*a,l*a);for(var f=0;f<=i.GridWidth;f++)u.line(f*a,0,f*a,i.GridHeight*a);Fe(this)&&(u.noStroke(),this.HardDropAnimations.forEach((function(t){u.fill(Ie(Le(u,t.Data.type),20)),u.rect(t.Data.left*a,t.Data.end*a,(t.Data.right-t.Data.left+1)*a,(i.PlayfieldHeight-t.Data.end)*t.CurrentValue*a)}))),u.stroke(0,0,0,150);var s=null;if(Fe(this)){s=[];for(var p=function(t){s.push(t+o.LineClearAnimations.filter((function(e){return e.Data.Y<=t})).reduce((function(t,e){return t+e.CurrentValue}),0))},h=0;h<i.GridHeight;h++)p(h)}for(var y=0;y<i.GridHeight;y++)for(var v=0;v<i.GridWidth;v++){var b,w=null!==(b=i.Get(v,y))&&void 0!==b?b:j.None;w!==j.None&&(u.fill(Le(u,w)),u.rect(v*a,O(y)*a,a,a))}if(i.Falling){var d,g,m=i.Falling.Points.map((function(t){return new A(t.X,O(t.Y))}));Me(u,null===(d=i.Falling)||void 0===d?void 0:d.Type,new A(0,0),m,a,255);var S=i.Falling.Clone();i.HardDropPiece(S);var k=S.Points.map((function(t){return new A(t.X,O(t.Y))}));Me(u,null===(g=i.Falling)||void 0===g?void 0:g.Type,new A(0,0),k,a,50)}Fe(this)&&(u.noStroke(),u.fill(255,255,255,100),this.LineClearAnimations.forEach((function(t){u.rect(0,t.Data.OrigY*a,i.GridWidth*a/2*t.CurrentValue,a),u.rect(i.GridWidth*a,t.Data.OrigY*a,-i.GridWidth*a/2*t.CurrentValue,a)}))),t.image(u,0,0)}}}function O(t){return null===s?t:s[t]}}}])&&Ue(o.prototype,i),a&&Ue(o,a),c}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qr(t,e)}(u,t);var r,o,i,a=Jr(u);function u(){var t;Ur(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(to(t),{writable:!0,value:void 0}),n.set(to(t),{writable:!0,value:void 0}),t.AchievementAnimation=null,ro(to(t),e,new A(0,0)),ro(to(t),n,new A(1,1)),t}return r=u,(o=[{key:"ConfigureAchievementTextDrawable",value:function(t,r){var o=this;ro(this,e,t),ro(this,n,r),null!==this.State?this.State.Achievement.on((function(t){var e=Kr(t.toString(),2),n=e[0],r=e[1];o.AchievementAnimation=new _e(0,1,100*t.Rating,{subtitle:n,title:r,rating:t.Rating},0,_e.RevertingFunction())})):console.error("ConfigureAchievementTextDrawable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Draw",value:function(t){$r(eo(u.prototype),"p5Draw",this).call(this,t),this.SetTransform(t,no(this,n).X,no(this,n).Y,no(this,e).X,no(this,e).Y);var r=this.AchievementAnimation;r&&(r.Tick(),r.Finished&&(this.AchievementAnimation=null),t.textAlign(t.CENTER,t.BOTTOM),t.fill(255,255,255,255*r.CurrentValue),t.noStroke(),t.textSize(15*r.Data.rating*.8),Ge(t,r.Data.subtitle,0,15*r.Data.rating),t.textSize(15*r.Data.rating),Ge(t,r.Data.title,0,0))}}])&&Qr(r.prototype,o),i&&Qr(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Or(t,e)}(u,t);var r,o,i,a=Pr(u);function u(){var t;mr(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Cr(t),{writable:!0,value:void 0}),n.set(Cr(t),{writable:!0,value:void 0}),jr(Cr(t),e,[]),jr(Cr(t),n,new Map),t}return r=u,(o=[{key:"ConfigureAchievementSfxPlayable",value:function(){var t=this;null!==this.State?this.State.Achievement.on((function(n){return _r(t,e).push(n)})):console.error("ConfigureAchievementSfxPlayable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var r=this;kr(Rr(u.prototype),"p5Setup",this).call(this,t,e),Object.entries(Ce).forEach((function(t){var e=dr(t,2)[1];return _r(r,n).set(e,new nr.Howl({src:[e]}))}))}},{key:"p5Draw",value:function(t){var r=this;for(kr(Rr(u.prototype),"p5Draw",this).call(this,t);_r(this,e).length>0;){var o=_r(this,e).shift();if(console.log(o),!o)break;var i=Xe(o);i&&i.forEach((function(t){var e;return null===(e=_r(r,n).get(t))||void 0===e?void 0:e.play()}))}}}])&&Sr(r.prototype,o),i&&Sr(r,i),u}(t)}(function(t){var e,n;return e=new WeakMap,n=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fr(t,e)}(u,t);var r,o,i,a=Ir(u);function u(){var t;Br(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=a.call.apply(a,[this].concat(o)),e.set(Mr(t),{writable:!0,value:void 0}),n.set(Mr(t),{writable:!0,value:void 0}),Yr(Mr(t),e,[]),Yr(Mr(t),n,new Map),t}return r=u,(o=[{key:"ConfigureAchievementVoicePlayable",value:function(){var t=this;null!==this.State?this.State.Achievement.on((function(n){return Nr(t,e).push(n)})):console.error("ConfigureAchievementVoicePlayable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var r=this;Wr(Gr(u.prototype),"p5Setup",this).call(this,t,e),Object.entries(Re).forEach((function(t){var e=Ar(t,2)[1];return Nr(r,n).set(e,new nr.Howl({src:[e]}))}))}},{key:"p5Draw",value:function(t){for(Wr(Gr(u.prototype),"p5Draw",this).call(this,t);Nr(this,e).length>0;){var r,o=Nr(this,e).shift();if(!o)break;var i=ze(o);i&&(null===(r=Nr(this,n).get(i))||void 0===r||r.play())}}}])&&Hr(r.prototype,o),i&&Hr(r,i),u}(t)}(function(t){var e,n,r;return e=new WeakMap,n=new WeakMap,r=new WeakMap,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lr(t,e)}(c,t);var o,i,a,u=fr(c);function c(){var t;ar(this,c);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=u.call.apply(u,[this].concat(i)),e.set(pr(t),{writable:!0,value:void 0}),n.set(pr(t),{writable:!0,value:void 0}),r.set(pr(t),{writable:!0,value:void 0}),vr(pr(t),e,[]),vr(pr(t),r,new Map),vr(pr(t),n,null),t}return o=c,(i=[{key:"ConfigurePlayerSfxPlayable",value:function(){var t=this;null!==this.Game?this.Game.Input.on((function(n){return yr(t,e).push(n)})):console.error("ConfigurePlayerSfxPlayable called before this.Game is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Setup",value:function(t,e){var n=this;cr(hr(c.prototype),"p5Setup",this).call(this,t,e),Object.entries(Te).forEach((function(t){var e=or(t,2)[1];return yr(n,r).set(e,new nr.Howl({src:[e]}))}))}},{key:"p5Draw",value:function(t){for(cr(hr(c.prototype),"p5Draw",this).call(this,t);yr(this,e).length>0;){var o,i=yr(this,e).shift(),a=yr(this,n);if(vr(this,n,null!=i?i:null),!i)break;if(!(a&&i.Tick-a.Tick<=4&&i.Success===a.Success&&i.Input===a.Input)){var u=Xe(i);u&&(null===(o=yr(this,r).get(u))||void 0===o||o.play())}}}}])&&ur(o.prototype,i),a&&ur(o,a),c}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(i,t);var e,n,r,o=Be(i);function i(){var t;xe(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).HardDropAnimations=[],t.LineClearAnimations=[],t}return e=i,(n=[{key:"ConfigurePlayfieldAnimatable",value:function(){var t=this;null!==this.State?null!==this.Game?(this.Game.Input.on((function(e){e.Input===p.HardDrop&&e.Success&&e.Falling&&t.HardDropAnimations.push(new _e(1,0,20,{left:e.Falling.Left,right:e.Falling.Right,end:e.Falling.Top,type:e.Falling.Type},0,_e.EaseOutQuint))})),this.State.Achievement.on((function(e){var n=0;e.LinesCleared.forEach((function(e){t.LineClearAnimations.filter((function(t){return t.Data.Y>e})).forEach((function(t){return t.Data.Y--})),t.LineClearAnimations.push(new _e(1,0,20+n,{Y:e,OrigY:e},0,_e.EaseOutQuint)),n+=4}))}))):console.error("ConfigurePlayfieldAnimatable called before this.Game is assigned. Beware of the call order of Configure_ functions."):console.error("ConfigurePlayfieldAnimatable called before this.State is assigned. Beware of the call order of Configure_ functions.")}},{key:"p5Draw",value:function(t){Ae(We(i.prototype),"p5Draw",this).call(this,t),this.HardDropAnimations.forEach((function(t){return t.Tick()})),this.HardDropAnimations=this.HardDropAnimations.filter((function(t){return!t.Finished})),this.LineClearAnimations.forEach((function(t){return t.Tick()})),this.LineClearAnimations=this.LineClearAnimations.filter((function(t){return!t.Finished}))}}])&&Ee(e.prototype,n),r&&Ee(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jn(t,e)}(i,t);var e,n,r,o=Zn(i);function i(){var t;$n(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).blockSize=20,t}return e=i,(n=[{key:"BlockSize",get:function(){return this.blockSize}},{key:"ConfigureBlockSize",value:function(t){this.blockSize=t}}])&&qn(e.prototype,n),r&&qn(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zn(t,e)}(i,t);var e,n,r,o=Kn(i);function i(){var t;Nn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).keyHold=p.None,t.keyDelay=0,t}return e=i,(n=[{key:"p5Draw",value:function(t){Xn(Un(i.prototype),"p5Draw",this).call(this,t),this.keyHold!==p.None&&this.Player instanceof ee&&(this.keyDelay<=0&&(this.Player.Enqueue(this.keyHold),this.keyDelay=3),this.keyDelay--)}},{key:"p5KeyPressed",value:function(t){this.Player instanceof ee&&(t.keyCode===t.LEFT_ARROW&&(this.keyHold=p.ShiftLeft),t.keyCode===t.RIGHT_ARROW&&(this.keyHold=p.ShiftRight),t.keyCode===t.UP_ARROW&&(this.keyHold=p.RotateCW),t.keyCode===t.CONTROL&&(this.keyHold=p.RotateCCW),t.keyCode===t.DOWN_ARROW&&(this.keyHold=p.SoftDrop),t.keyCode===t.SHIFT&&(this.keyHold=p.Hold)," "===t.key&&(this.keyHold=p.HardDrop),this.Player.Enqueue(this.keyHold),this.keyDelay=10)}},{key:"p5KeyReleased",value:function(t){if(this.Player instanceof ee){var e=p.None;t.keyCode===t.LEFT_ARROW&&(e=p.ShiftLeft),t.keyCode===t.RIGHT_ARROW&&(e=p.ShiftRight),t.keyCode===t.UP_ARROW&&(e=p.RotateCW),t.keyCode===t.CONTROL&&(e=p.RotateCCW),t.keyCode===t.DOWN_ARROW&&(e=p.SoftDrop),t.keyCode===t.SHIFT&&(e=p.Hold)," "===t.key&&(e=p.HardDrop),this.keyHold===e&&(this.keyHold=p.None)}}},{key:"KeyPressedHandler",get:function(){return this.p5KeyPressed.bind(this)}},{key:"KeyReleasedHandler",get:function(){return this.p5KeyReleased.bind(this)}}])&&Yn(e.prototype,n),r&&Yn(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(i,t);var e,n,r,o=me(i);function i(){var t;we(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).Game=null,t}return e=i,(n=[{key:"ConfigureGame",value:function(t){this.Game=t}}])&&de(e.prototype,n),r&&de(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(i,t);var e,n,r,o=he(i);function i(){var t;fe(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).Player=null,t}return e=i,(n=[{key:"ConfigurePlayer",value:function(t){this.Player=t}}])&&se(e.prototype,n),r&&se(e,r),i}(t)}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}(i,t);var e,n,r,o=ae(i);function i(){var t;re(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).State=null,t}return e=i,(n=[{key:"ConfigureGameState",value:function(t){this.State=t}}])&&oe(e.prototype,n),r&&oe(e,r),i}(t)}(function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&n?(this.width=e,this.height=n):(this.width=440,this.height=502)}var e,n,r;return e=t,(n=[{key:"SetTransform",value:function(t,e,n,r,o){t.resetMatrix(),t.scale(1,-1),t.translate(r,-this.height+o),t.scale(e,n)}},{key:"ResetTransform",value:function(t){this.SetTransform(t,1,1,0,0)}},{key:"p5Setup",value:function(t,e){t.createCanvas(this.width,this.height).parent(e),this.ResetTransform(t)}},{key:"p5Draw",value:function(t){t.background(100)}},{key:"DrawHandler",get:function(){return this.p5Draw.bind(this)}},{key:"SetupHandler",get:function(){return this.p5Setup.bind(this)}}])&&io(e.prototype,n),r&&io(e,r),t}())))))))))))))));function po(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ho(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ho(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ho(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const yo=function(t){var e=po((0,r.useState)(),2)[1],n=po((0,r.useState)(),2)[1],o=po((0,r.useState)(),2),i=o[0],a=o[1];return(0,r.useEffect)((function(){var t=new ee,r=new Et(t),o=new so(r);return e(t),n(r),a(o),setTimeout((function(){return r.StartClock()}),1e3),function(){r.StopClock()}}),[]),i?r.createElement("div",{className:"min-h-screen w-screen flex justify-center items-center"},r.createElement(Dt(),{setup:i.SetupHandler,draw:i.DrawHandler,keyPressed:i.KeyPressedHandler,keyReleased:i.KeyReleasedHandler})):r.createElement("p",null,"Loading")};const vo=function(){return r.createElement(i.UT,null,r.createElement(a.rs,null,r.createElement(a.AW,{exact:!0,path:"/",component:l}),r.createElement(a.AW,{exact:!0,path:"/test",component:yo}),r.createElement(a.AW,{component:u})))};o.render(r.createElement(vo,null),document.getElementById("app"))}},t=>{"use strict";var e;e=855,t(t.s=e)}]);